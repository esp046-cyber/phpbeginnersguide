<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PHP 2026 ‚Äî Complete Beginner's Guide ¬∑ Web App</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Syne:wght@400;600;800&family=Fraunces:ital,wght@0,300;0,700;1,300&display=swap" rel="stylesheet">
<style>
  /* ‚îÄ‚îÄ DARK THEME (default) ‚îÄ‚îÄ */
  :root {
    --bg: #0a0c10;
    --surface: #111420;
    --surface2: #181d2e;
    --border: #222840;
    --accent: #7c6ffd;
    --accent2: #00e5c8;
    --accent3: #ff6b6b;
    --accent4: #ffc93c;
    --text: #e4e8f7;
    --muted: #7a82a8;
    --code-bg: #0d1117;
    --code-border: #1e2740;
    --keyword: #7c6ffd;
    --string: #00e5c8;
    --comment: #4a5580;
    --number: #ffc93c;
    --func: #82e0aa;
    --var: #f0b429;
    --type: #ff8c94;
  }
  /* ‚îÄ‚îÄ LIGHT THEME ‚îÄ‚îÄ */
  body.light-mode {
    --bg: #f0f2f8; --surface: #ffffff; --surface2: #eef0f8;
    --border: #d0d5e8; --accent: #5a4fcf; --accent2: #009980;
    --accent3: #d94040; --accent4: #c47800; --text: #1a1d2e;
    --muted: #5a607a; --code-bg: #f5f6fc; --code-border: #d0d5e8;
    --keyword: #5a4fcf; --string: #00776a; --comment: #6b7492;
    --number: #b36000; --func: #267a55; --var: #8a5c00; --type: #b83030;
  }
  body.light-mode .hero { background: linear-gradient(135deg,#e8eaf8,#f4f0ff); }
  body.light-mode pre { color: var(--text); }
  /* ‚îÄ‚îÄ PRINT STYLES ‚îÄ‚îÄ */
  @media print {
    .app-toolbar,.sidebar,.toc-progress,#quiz-panel,#contact-panel,
    .btn-run,.btn-bookmark,.search-wrap,.print-hide { display:none !important; }
    .layout { grid-template-columns: 1fr !important; }
    body { font-size:12pt; background:#fff; color:#000; }
    .chapter { page-break-inside:avoid; }
    pre { background:#f8f8f8 !important; color:#000 !important; border:1px solid #ccc; }
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Fraunces', Georgia, serif;
    font-size: 17px;
    line-height: 1.75;
    min-height: 100vh;
  }

  /* ‚îÄ‚îÄ NOISE TEXTURE OVERLAY ‚îÄ‚îÄ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    opacity: 0.5;
  }

  /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
  .hero {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    padding: 6rem 4rem 4rem;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid var(--border);
  }

  .hero::after {
    content: '';
    position: absolute;
    top: -40%;
    right: -20%;
    width: 70vw;
    height: 70vw;
    background: radial-gradient(circle, rgba(124,111,253,0.12) 0%, transparent 70%);
    pointer-events: none;
  }

  .hero-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--accent2);
    margin-bottom: 1.5rem;
    animation: fadeUp 0.6s ease both;
  }

  .hero h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(3rem, 8vw, 7rem);
    font-weight: 800;
    line-height: 1;
    letter-spacing: -0.03em;
    margin-bottom: 1.5rem;
    animation: fadeUp 0.6s 0.1s ease both;
  }

  .hero h1 span { color: var(--accent); }
  .hero h1 em { color: var(--accent2); font-style: normal; }

  .hero-desc {
    max-width: 560px;
    color: var(--muted);
    font-size: 1.1rem;
    font-weight: 300;
    margin-bottom: 3rem;
    animation: fadeUp 0.6s 0.2s ease both;
  }

  .hero-stats {
    display: flex;
    gap: 3rem;
    animation: fadeUp 0.6s 0.3s ease both;
  }

  .stat { text-align: left; }
  .stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: var(--accent);
  }
  .stat-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
  }

  .hero-php-badge {
    position: absolute;
    bottom: 3rem;
    right: 4rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    color: var(--muted);
    opacity: 0.5;
    animation: fadeUp 0.6s 0.4s ease both;
  }

  /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
  .layout {
    display: grid;
    grid-template-columns: 260px 1fr;
    min-height: 100vh;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
  .sidebar {
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
    padding: 2.5rem 1.5rem;
    border-right: 1px solid var(--border);
    background: var(--surface);
  }

  .sidebar::-webkit-scrollbar { width: 4px; }
  .sidebar::-webkit-scrollbar-track { background: transparent; }
  .sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

  .sidebar-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--muted);
    margin-bottom: 1.5rem;
    padding-left: 0.5rem;
  }

  .nav-section { margin-bottom: 0.25rem; }

  .nav-section-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--accent);
    padding: 0.8rem 0.5rem 0.3rem;
    display: block;
    opacity: 0.7;
  }

  .nav-link {
    display: block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    color: var(--muted);
    text-decoration: none;
    padding: 0.4rem 0.5rem;
    border-radius: 4px;
    transition: all 0.2s;
    line-height: 1.4;
  }

  .nav-link:hover {
    color: var(--text);
    background: var(--border);
    padding-left: 1rem;
  }

  /* ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ */
  main { padding: 4rem 3rem; }

  /* ‚îÄ‚îÄ CHAPTERS ‚îÄ‚îÄ */
  .chapter {
    margin-bottom: 6rem;
    animation: fadeUp 0.5s ease both;
  }

  .chapter-header {
    display: flex;
    align-items: baseline;
    gap: 1rem;
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
  }

  .chapter-num {
    font-family: 'Syne', sans-serif;
    font-size: 0.75rem;
    font-weight: 800;
    color: var(--accent);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    white-space: nowrap;
  }

  .chapter h2 {
    font-family: 'Syne', sans-serif;
    font-size: 2.2rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    color: var(--text);
  }

  h3 {
    font-family: 'Syne', sans-serif;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--accent2);
    margin: 2.5rem 0 1rem;
    letter-spacing: -0.01em;
  }

  h4 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85rem;
    color: var(--accent4);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 2rem 0 0.75rem;
  }

  p { margin-bottom: 1.2rem; color: var(--text); }

  strong { color: var(--accent2); font-weight: 600; }
  em { color: var(--accent4); font-style: italic; }

  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }

  /* ‚îÄ‚îÄ CODE BLOCKS ‚îÄ‚îÄ */
  .code-block {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    border-radius: 8px;
    margin: 1.5rem 0;
    overflow: hidden;
    position: relative;
  }

  .code-label {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 1rem;
    background: rgba(255,255,255,0.03);
    border-bottom: 1px solid var(--code-border);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    color: var(--muted);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .code-dots {
    display: flex;
    gap: 5px;
  }
  .dot {
    width: 10px; height: 10px;
    border-radius: 50%;
  }
  .dot:nth-child(1) { background: #ff5f57; }
  .dot:nth-child(2) { background: #ffbd2e; }
  .dot:nth-child(3) { background: #28ca41; }

  pre {
    padding: 1.5rem;
    overflow-x: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.7;
    tab-size: 4;
  }

  code { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; }

  /* Inline code */
  p code, li code {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    padding: 0.1em 0.4em;
    border-radius: 4px;
    color: var(--accent2);
    font-size: 0.82em;
  }

  /* Syntax highlighting via CSS classes */
  .kw { color: #7c6ffd; font-weight: bold; }
  .str { color: #00e5c8; }
  .cmt { color: #4a5580; font-style: italic; }
  .num { color: #ffc93c; }
  .fn  { color: #82e0aa; }
  .var { color: #f0b429; }
  .typ { color: #ff8c94; }
  .op  { color: #e4e8f7; }
  .tag { color: #7c6ffd; }
  .attr{ color: #ffc93c; }
  .pun { color: #888; }

  /* ‚îÄ‚îÄ INFO BOXES ‚îÄ‚îÄ */
  .box {
    border-radius: 8px;
    padding: 1.25rem 1.5rem;
    margin: 1.5rem 0;
    border-left: 3px solid;
    font-size: 0.95rem;
  }
  .box-info    { background: rgba(124,111,253,0.07); border-color: var(--accent); }
  .box-tip     { background: rgba(0,229,200,0.07);   border-color: var(--accent2); }
  .box-warn    { background: rgba(255,196,60,0.07);  border-color: var(--accent4); }
  .box-danger  { background: rgba(255,107,107,0.07); border-color: var(--accent3); }
  .box-exercise{ background: rgba(130,224,170,0.07); border-color: #82e0aa; }

  .box-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }
  .box-info .box-title    { color: var(--accent); }
  .box-tip .box-title     { color: var(--accent2); }
  .box-warn .box-title    { color: var(--accent4); }
  .box-danger .box-title  { color: var(--accent3); }
  .box-exercise .box-title{ color: #82e0aa; }

  /* ‚îÄ‚îÄ TABLES ‚îÄ‚îÄ */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    font-size: 0.9rem;
  }
  th {
    background: var(--surface2);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--accent);
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 2px solid var(--border);
  }
  td {
    padding: 0.7rem 1rem;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
    font-size: 0.88rem;
  }
  tr:hover td { background: rgba(255,255,255,0.02); }
  td code { font-size: 0.8em; }

  /* ‚îÄ‚îÄ GRID CARDS ‚îÄ‚îÄ */
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
  }
  .card {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.25rem;
    transition: border-color 0.2s;
  }
  .card:hover { border-color: var(--accent); }
  .card-icon {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
  }
  .card-title {
    font-family: 'Syne', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 0.3rem;
  }
  .card p {
    font-size: 0.82rem;
    color: var(--muted);
    margin: 0;
  }

  /* ‚îÄ‚îÄ LISTS ‚îÄ‚îÄ */
  ul, ol {
    padding-left: 1.5rem;
    margin-bottom: 1.2rem;
  }
  li { margin-bottom: 0.4rem; }

  /* ‚îÄ‚îÄ DIVIDERS ‚îÄ‚îÄ */
  .divider {
    height: 1px;
    background: linear-gradient(to right, var(--accent), transparent);
    margin: 3rem 0;
    opacity: 0.3;
  }

  /* ‚îÄ‚îÄ PROGRESS BAR ‚îÄ‚îÄ */
  .toc-progress {
    position: fixed;
    top: 0; left: 0;
    height: 2px;
    background: linear-gradient(to right, var(--accent), var(--accent2));
    z-index: 10000;
    transition: width 0.1s;
    width: 0%;
  }

  /* ‚îÄ‚îÄ VERSION BADGE ‚îÄ‚îÄ */
  .badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    padding: 0.2em 0.6em;
    border-radius: 3px;
    vertical-align: middle;
    margin-left: 0.5rem;
  }
  .badge-new   { background: rgba(0,229,200,0.15); color: var(--accent2); border: 1px solid rgba(0,229,200,0.3); }
  .badge-php8  { background: rgba(124,111,253,0.15); color: var(--accent); border: 1px solid rgba(124,111,253,0.3); }
  .badge-warn  { background: rgba(255,196,60,0.15); color: var(--accent4); border: 1px solid rgba(255,196,60,0.3); }

  /* ‚îÄ‚îÄ EXERCISE BLOCKS ‚îÄ‚îÄ */
  .exercise {
    background: rgba(130,224,170,0.05);
    border: 1px solid rgba(130,224,170,0.2);
    border-radius: 8px;
    padding: 1.5rem;
    margin: 2rem 0;
  }
  .exercise-title {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 1rem;
    color: #82e0aa;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .exercise ol { margin: 0.5rem 0 0; }

  /* ‚îÄ‚îÄ APP TOOLBAR ‚îÄ‚îÄ */
  .app-toolbar {
    position: fixed; top: 0; left: 0; right: 0; z-index: 9998;
    background: rgba(10,12,16,0.92); backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 0.75rem;
    padding: 0.55rem 1.5rem; height: 52px;
  }
  body.light-mode .app-toolbar { background: rgba(240,242,248,0.95); }
  .toolbar-brand {
    font-family: 'Syne', sans-serif; font-weight: 800; font-size: 0.9rem;
    color: var(--accent); letter-spacing: -0.02em; white-space: nowrap; margin-right: 0.5rem;
  }
  .search-wrap { flex: 1; max-width: 320px; position: relative; }
  .search-wrap input {
    width: 100%; background: var(--surface2); border: 1px solid var(--border);
    border-radius: 6px; padding: 0.38rem 0.75rem 0.38rem 2rem;
    font-family: 'JetBrains Mono', monospace; font-size: 0.75rem;
    color: var(--text); outline: none; transition: border-color 0.2s;
  }
  .search-wrap input:focus { border-color: var(--accent); }
  .search-wrap::before {
    content: '‚åï'; position: absolute; left: 0.55rem; top: 50%;
    transform: translateY(-50%); color: var(--muted); font-size: 1rem; pointer-events: none;
  }
  .toolbar-btn {
    background: var(--surface2); border: 1px solid var(--border); border-radius: 6px;
    color: var(--text); padding: 0.35rem 0.7rem; font-size: 0.75rem;
    cursor: pointer; font-family: 'JetBrains Mono', monospace;
    transition: all 0.2s; white-space: nowrap;
  }
  .toolbar-btn:hover { border-color: var(--accent); color: var(--accent); }
  .toolbar-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }
  #search-results {
    position: absolute; top: calc(100% + 4px); left: 0; right: 0;
    background: var(--surface); border: 1px solid var(--border); border-radius: 8px;
    max-height: 300px; overflow-y: auto; z-index: 9999; display: none;
  }
  #search-results a {
    display: block; padding: 0.6rem 1rem; font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem; color: var(--text); text-decoration: none; border-bottom: 1px solid var(--border);
    transition: background 0.15s;
  }
  #search-results a:hover { background: var(--surface2); color: var(--accent); }
  #search-results a:last-child { border: none; }
  .search-highlight { color: var(--accent2); font-weight: bold; }

  /* ‚îÄ‚îÄ PANEL OVERLAYS (quiz, contact) ‚îÄ‚îÄ */
  .panel-overlay {
    display: none; position: fixed; inset: 0; z-index: 10001;
    background: rgba(0,0,0,0.7); backdrop-filter: blur(4px);
    align-items: center; justify-content: center;
  }
  .panel-overlay.open { display: flex; }
  .panel-box {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 2rem; width: min(640px,92vw);
    max-height: 88vh; overflow-y: auto; position: relative;
  }
  .panel-close {
    position: absolute; top: 1rem; right: 1rem; background: none;
    border: none; color: var(--muted); font-size: 1.4rem; cursor: pointer; line-height: 1;
  }
  .panel-close:hover { color: var(--accent3); }
  .panel-title {
    font-family: 'Syne', sans-serif; font-size: 1.4rem; font-weight: 800;
    margin-bottom: 1.5rem; color: var(--text);
  }

  /* ‚îÄ‚îÄ PROGRESS TRACKER ‚îÄ‚îÄ */
  .progress-bar-wrap {
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 6px; padding: 1rem 1.25rem; margin-bottom: 2rem;
  }
  .progress-bar-label {
    font-family: 'JetBrains Mono', monospace; font-size: 0.7rem;
    color: var(--muted); text-transform: uppercase; letter-spacing: 0.1em;
    margin-bottom: 0.5rem; display: flex; justify-content: space-between;
  }
  .progress-bar-track { background: var(--border); border-radius: 4px; height: 6px; overflow: hidden; }
  .progress-bar-fill {
    height: 100%; border-radius: 4px;
    background: linear-gradient(to right, var(--accent), var(--accent2));
    transition: width 0.4s ease;
  }
  .btn-read {
    margin-top: 0.75rem; font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.1em;
    padding: 0.3rem 0.8rem; border-radius: 4px; cursor: pointer;
    border: 1px solid var(--border); background: transparent; color: var(--muted);
    transition: all 0.2s;
  }
  .btn-read:hover { border-color: var(--accent2); color: var(--accent2); }
  .btn-read.done { background: rgba(0,229,200,0.1); border-color: var(--accent2); color: var(--accent2); }

  /* ‚îÄ‚îÄ CODE BLOCK EXPAND/COLLAPSE + RUN ‚îÄ‚îÄ */
  .code-block.collapsed pre { max-height: 120px; overflow: hidden; }
  .code-block.collapsed pre::after {
    content: ''; display: block; position: absolute; bottom: 0; left: 0; right: 0;
    height: 60px; background: linear-gradient(transparent, var(--code-bg));
  }
  .code-block pre { position: relative; }
  .code-actions {
    display: flex; gap: 0.4rem; align-items: center; padding: 0.4rem 0.75rem;
    background: rgba(255,255,255,0.02); border-top: 1px solid var(--code-border);
  }
  .btn-toggle-code, .btn-run, .btn-copy {
    font-family: 'JetBrains Mono', monospace; font-size: 0.65rem;
    text-transform: uppercase; letter-spacing: 0.08em;
    padding: 0.25rem 0.65rem; border-radius: 4px; cursor: pointer;
    border: 1px solid var(--code-border); background: transparent;
    transition: all 0.2s;
  }
  .btn-toggle-code { color: var(--muted); }
  .btn-toggle-code:hover { color: var(--accent); border-color: var(--accent); }
  .btn-run { color: var(--accent2); border-color: rgba(0,229,200,0.3); }
  .btn-run:hover { background: rgba(0,229,200,0.1); }
  .btn-copy { color: var(--muted); }
  .btn-copy:hover { color: var(--accent4); border-color: var(--accent4); }
  .run-output {
    margin: 0; padding: 0.75rem 1rem;
    background: rgba(0,229,200,0.05); border-top: 1px solid rgba(0,229,200,0.2);
    font-family: 'JetBrains Mono', monospace; font-size: 0.78rem;
    color: var(--accent2); white-space: pre-wrap; display: none;
  }
  .run-output.visible { display: block; }

  /* ‚îÄ‚îÄ BOOKMARK ‚îÄ‚îÄ */
  .btn-bookmark {
    float: right; background: none; border: none; cursor: pointer;
    font-size: 1.2rem; color: var(--muted); transition: color 0.2s;
    margin-left: 1rem;
  }
  .btn-bookmark:hover { color: var(--accent4); }
  .btn-bookmark.bookmarked { color: var(--accent4); }

  /* ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ */
  .quiz-q { margin-bottom: 1.5rem; }
  .quiz-q-text {
    font-family: 'Syne', sans-serif; font-size: 0.95rem; font-weight: 600;
    margin-bottom: 0.75rem; color: var(--text);
  }
  .quiz-option {
    display: flex; align-items: center; gap: 0.5rem;
    padding: 0.5rem 0.75rem; border-radius: 6px; margin-bottom: 0.4rem;
    border: 1px solid var(--border); cursor: pointer; transition: all 0.2s;
    font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--text);
  }
  .quiz-option:hover { border-color: var(--accent); background: rgba(124,111,253,0.07); }
  .quiz-option.correct { border-color: var(--accent2); background: rgba(0,229,200,0.1); color: var(--accent2); }
  .quiz-option.wrong { border-color: var(--accent3); background: rgba(255,107,107,0.1); color: var(--accent3); }
  .quiz-option input { accent-color: var(--accent); }
  .quiz-score {
    text-align: center; padding: 1.5rem;
    font-family: 'Syne', sans-serif; font-size: 1.8rem; font-weight: 800;
  }
  .quiz-score span { color: var(--accent); }
  .quiz-actions { display: flex; gap: 0.75rem; margin-top: 1rem; }
  .quiz-btn {
    flex: 1; padding: 0.65rem; border-radius: 6px; cursor: pointer;
    font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
    text-transform: uppercase; letter-spacing: 0.1em; transition: all 0.2s;
  }
  .quiz-btn-submit { background: var(--accent); color: #fff; border: none; }
  .quiz-btn-submit:hover { opacity: 0.85; }
  .quiz-btn-reset { background: transparent; border: 1px solid var(--border); color: var(--muted); }
  .quiz-btn-reset:hover { border-color: var(--accent3); color: var(--accent3); }

  /* ‚îÄ‚îÄ CONTACT FORM ‚îÄ‚îÄ */
  .form-group { margin-bottom: 1.1rem; }
  .form-group label {
    display: block; font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em;
    color: var(--muted); margin-bottom: 0.4rem;
  }
  .form-group input, .form-group textarea, .form-group select {
    width: 100%; background: var(--surface2); border: 1px solid var(--border);
    border-radius: 6px; padding: 0.65rem 0.9rem; color: var(--text);
    font-family: 'Fraunces', serif; font-size: 0.9rem; outline: none;
    transition: border-color 0.2s;
  }
  .form-group input:focus, .form-group textarea:focus { border-color: var(--accent); }
  .form-group textarea { resize: vertical; min-height: 90px; }
  .form-error { color: var(--accent3); font-size: 0.75rem; margin-top: 0.3rem; display: none; }
  .form-error.show { display: block; }
  .form-submit {
    width: 100%; padding: 0.75rem; background: var(--accent); border: none;
    border-radius: 6px; color: #fff; font-family: 'Syne', sans-serif;
    font-size: 0.9rem; font-weight: 700; cursor: pointer; transition: opacity 0.2s;
  }
  .form-submit:hover { opacity: 0.85; }
  .form-success {
    text-align: center; padding: 1.5rem; color: var(--accent2);
    font-family: 'Syne', sans-serif; font-size: 1.1rem; display: none;
  }

  /* ‚îÄ‚îÄ BOOKMARKS SIDEBAR SECTION ‚îÄ‚îÄ */
  .bookmarks-list { margin-top: 0.5rem; }
  .bookmarks-list a {
    display: block; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem;
    color: var(--accent4); padding: 0.3rem 0.5rem; border-radius: 4px;
    text-decoration: none; transition: background 0.15s;
  }
  .bookmarks-list a:hover { background: rgba(255,196,60,0.1); }
  .no-bookmarks { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: var(--muted); padding: 0.3rem 0.5rem; }

  /* ‚îÄ‚îÄ MINI APP DEMOS ‚îÄ‚îÄ */
  .demo-app {
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0; overflow: hidden;
  }
  .demo-app-title {
    font-family: 'Syne', sans-serif; font-size: 0.85rem; font-weight: 700;
    color: var(--accent2); text-transform: uppercase; letter-spacing: 0.08em;
    margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;
  }
  .demo-input {
    width: 100%; background: var(--code-bg); border: 1px solid var(--code-border);
    border-radius: 6px; padding: 0.5rem 0.75rem; color: var(--text);
    font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;
    margin-bottom: 0.6rem; outline: none;
  }
  .demo-input:focus { border-color: var(--accent); }
  .demo-btn {
    background: var(--accent); border: none; color: #fff; border-radius: 5px;
    padding: 0.45rem 1rem; font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem; cursor: pointer; margin-right: 0.4rem; margin-bottom: 0.4rem;
    transition: opacity 0.2s;
  }
  .demo-btn:hover { opacity: 0.8; }
  .demo-btn.danger { background: var(--accent3); }
  .demo-btn.success { background: #2a7a55; }
  .demo-output {
    margin-top: 0.75rem; background: var(--code-bg); border: 1px solid var(--code-border);
    border-radius: 6px; padding: 0.75rem; font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem; min-height: 40px; color: var(--text);
  }
  .demo-output .ok  { color: var(--accent2); }
  .demo-output .err { color: var(--accent3); }
  .demo-output .info{ color: var(--accent4); }
  .todo-item {
    display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0;
    border-bottom: 1px solid var(--border);
  }
  .todo-item:last-child { border: none; }
  .todo-item span { flex: 1; font-size: 0.82rem; }
  .todo-item.done span { text-decoration: line-through; color: var(--muted); }
  .todo-item button { background: none; border: none; cursor: pointer; font-size: 0.9rem; }

  /* ‚îÄ‚îÄ SIDEBAR MOBILE TOGGLE ‚îÄ‚îÄ */
  .sidebar-toggle {
    display: none; background: var(--accent); border: none; color: #fff;
    border-radius: 6px; padding: 0.35rem 0.65rem; font-size: 0.9rem;
    cursor: pointer; line-height: 1;
  }
  @media (max-width: 900px) {
    .sidebar-toggle { display: block; }
    .sidebar { transform: translateX(-100%); transition: transform 0.3s; position: fixed; z-index: 9000; top: 52px; bottom: 0; }
    .sidebar.open { transform: translateX(0); }
  }
  .sidebar-overlay {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5);
    z-index: 8999; top: 52px;
  }
  .sidebar-overlay.open { display: block; }

  /* Adjust body/layout for toolbar */
  body { padding-top: 52px; }
  .hero { padding-top: calc(6rem + 52px); min-height: calc(100vh); }

  /* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .layout { grid-template-columns: 1fr; }
    .sidebar { position: static; height: auto; }
    .hero { padding: 4rem 2rem; }
    main { padding: 2.5rem 1.5rem; }
  }
</style>
</head>
<body>

<div class="toc-progress" id="progress"></div>

<!-- ‚ïê‚ïê APP TOOLBAR ‚ïê‚ïê -->
<div class="app-toolbar print-hide">
  <button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle sidebar">‚ò∞</button>
  <span class="toolbar-brand">PHP 2026</span>
  <div class="search-wrap">
    <input type="text" id="search-input" placeholder="Search topics‚Ä¶" oninput="doSearch(this.value)" onblur="setTimeout(()=>document.getElementById('search-results').style.display='none',200)">
    <div id="search-results"></div>
  </div>
  <button class="toolbar-btn" onclick="toggleTheme()" id="theme-btn" title="Toggle dark/light mode">‚òÄ Light</button>
  <button class="toolbar-btn" onclick="openPanel('quiz-panel')" title="Take the quiz">üìù Quiz</button>
  <button class="toolbar-btn" onclick="openPanel('contact-panel')" title="Contact form">‚úâ Contact</button>
  <button class="toolbar-btn" onclick="window.print()" title="Print / Save PDF">üñ® PDF</button>
</div>
<div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

<!-- ‚ïê‚ïê QUIZ PANEL ‚ïê‚ïê -->
<div class="panel-overlay" id="quiz-panel">
  <div class="panel-box">
    <button class="panel-close" onclick="closePanel('quiz-panel')">‚úï</button>
    <div class="panel-title">üìù PHP Knowledge Quiz</div>
    <div id="quiz-body"></div>
    <div id="quiz-score-display" style="display:none" class="quiz-score">Score: <span id="quiz-score-val">0</span> / 10</div>
    <div class="quiz-actions">
      <button class="quiz-btn quiz-btn-submit print-hide" onclick="submitQuiz()" id="quiz-submit-btn">Submit Answers</button>
      <button class="quiz-btn quiz-btn-reset print-hide" onclick="resetQuiz()">Reset</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê CONTACT PANEL ‚ïê‚ïê -->
<div class="panel-overlay" id="contact-panel">
  <div class="panel-box">
    <button class="panel-close" onclick="closePanel('contact-panel')">‚úï</button>
    <div class="panel-title">‚úâ Contact / Feedback</div>
    <div id="contact-success" class="form-success">‚úÖ Message sent! Thanks for your feedback.</div>
    <form id="contact-form" onsubmit="submitContact(event)">
      <div class="form-group">
        <label>Your Name *</label>
        <input type="text" id="c-name" placeholder="Alice Smith">
        <div class="form-error" id="err-name">Please enter your name.</div>
      </div>
      <div class="form-group">
        <label>Email Address *</label>
        <input type="email" id="c-email" placeholder="alice@example.com">
        <div class="form-error" id="err-email">Please enter a valid email.</div>
      </div>
      <div class="form-group">
        <label>Topic</label>
        <select id="c-topic">
          <option value="">‚Äî Select topic ‚Äî</option>
          <option>Question about PHP syntax</option>
          <option>Error I can't fix</option>
          <option>Suggestion for guide</option>
          <option>Other</option>
        </select>
      </div>
      <div class="form-group">
        <label>Message *</label>
        <textarea id="c-msg" placeholder="Your message‚Ä¶"></textarea>
        <div class="form-error" id="err-msg">Message must be at least 10 characters.</div>
      </div>
      <button type="submit" class="form-submit">Send Message</button>
    </form>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     HERO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="hero">
  <div class="hero-tag">// Complete Reference ¬∑ 2026 Edition ¬∑ Interactive Web App</div>
  <h1>Learn <span>PHP</span><br><em>From Zero.</em></h1>
  <p class="hero-desc">
    A comprehensive, hands-on beginner's guide covering everything from syntax basics to modern PHP 8.4 features ‚Äî with real examples, interactive exercises, quizzes, and mini-app demos.
  </p>
  <div class="hero-stats">
    <div class="stat">
      <div class="stat-num">25</div>
      <div class="stat-label">Chapters</div>
    </div>
    <div class="stat">
      <div class="stat-num">200+</div>
      <div class="stat-label">Examples</div>
    </div>
    <div class="stat">
      <div class="stat-num">PHP 8.4</div>
      <div class="stat-label">Latest</div>
    </div>
  </div>
  <div class="hero-php-badge">&lt;?php echo "Hello, 2026!"; ?&gt;</div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LAYOUT: SIDEBAR + MAIN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="layout">

  <!-- SIDEBAR NAV -->
  <nav class="sidebar" id="main-sidebar">
    <div class="sidebar-title">// Table of Contents</div>

    <!-- Progress tracker summary -->
    <div style="padding:0.5rem; margin-bottom:0.5rem;">
      <div class="progress-bar-label"><span>Progress</span><span id="sb-progress-pct">0%</span></div>
      <div class="progress-bar-track"><div class="progress-bar-fill" id="sb-progress-fill" style="width:0%"></div></div>
    </div>

    <!-- Bookmarks -->
    <div class="nav-section">
      <span class="nav-section-title">‚≠ê Bookmarks</span>
      <div class="bookmarks-list" id="bookmarks-list"><span class="no-bookmarks">No bookmarks yet</span></div>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">Foundations</span>
      <a class="nav-link" href="#ch1">01 ¬∑ Introduction to PHP</a>
      <a class="nav-link" href="#ch2">02 ¬∑ Syntax &amp; Structure</a>
      <a class="nav-link" href="#ch3">03 ¬∑ Variables &amp; Data Types</a>
      <a class="nav-link" href="#ch4">04 ¬∑ Operators</a>
      <a class="nav-link" href="#ch5">05 ¬∑ Control Structures</a>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">Core Language</span>
      <a class="nav-link" href="#ch6">06 ¬∑ Functions</a>
      <a class="nav-link" href="#ch7">07 ¬∑ Arrays</a>
      <a class="nav-link" href="#ch8">08 ¬∑ Strings</a>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">Web & Data</span>
      <a class="nav-link" href="#ch9">09 ¬∑ Forms &amp; User Input</a>
      <a class="nav-link" href="#ch10">10 ¬∑ File Handling</a>
      <a class="nav-link" href="#ch11">11 ¬∑ MySQL &amp; Databases</a>
      <a class="nav-link" href="#ch12">12 ¬∑ Sessions &amp; Cookies</a>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">OOP & Advanced</span>
      <a class="nav-link" href="#ch13">13 ¬∑ OOP Basics</a>
      <a class="nav-link" href="#ch14">14 ¬∑ OOP Advanced</a>
      <a class="nav-link" href="#ch15">15 ¬∑ Error Handling</a>
      <a class="nav-link" href="#ch16">16 ¬∑ Security</a>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">Modern PHP</span>
      <a class="nav-link" href="#ch17">17 ¬∑ PHP 8.x Features</a>
      <a class="nav-link" href="#ch18">18 ¬∑ Best Practices</a>
    </div>

    <div class="nav-section">
      <span class="nav-section-title">Extended Topics</span>
      <a class="nav-link" href="#ch19">19 ¬∑ Superglobals</a>
      <a class="nav-link" href="#ch20">20 ¬∑ Namespaces &amp; Autoloading</a>
      <a class="nav-link" href="#ch21">21 ¬∑ Composer</a>
      <a class="nav-link" href="#ch22">22 ¬∑ PHP Attributes</a>
      <a class="nav-link" href="#ch23">23 ¬∑ Common Pitfalls</a>
      <a class="nav-link" href="#ch24">24 ¬∑ Exercises &amp; Solutions</a>
      <a class="nav-link" href="#ch25">25 ¬∑ Quick Reference</a>
      <a class="nav-link" href="#ch26">26 ¬∑ Mini-App Demos</a>
    </div>
  </nav>

  <!-- ‚ïê‚ïê MAIN CONTENT ‚ïê‚ïê -->
  <main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 1 ¬∑ INTRODUCTION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch1">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 01</span>
        <h2>Introduction to PHP</h2>
      </div>

      <p>PHP (recursive acronym: <strong>PHP: Hypertext Preprocessor</strong>) is a widely-used, open-source, server-side scripting language especially suited for web development. Originally created by Rasmus Lerdorf in 1993, PHP powers roughly <strong>77% of all websites</strong> whose server-side language is known ‚Äî including WordPress, Facebook's early codebase, and Wikipedia.</p>

      <div class="cards">
        <div class="card">
          <div class="card-icon">‚ö°</div>
          <div class="card-title">Server-Side</div>
          <p>PHP runs on the server and sends HTML to the browser ‚Äî the visitor never sees your PHP code.</p>
        </div>
        <div class="card">
          <div class="card-icon">üîå</div>
          <div class="card-title">Open Source</div>
          <p>Free to use. Huge ecosystem with Composer packages, frameworks like Laravel, Symfony.</p>
        </div>
        <div class="card">
          <div class="card-icon">üóÑÔ∏è</div>
          <div class="card-title">Database-Friendly</div>
          <p>Native support for MySQL, PostgreSQL, SQLite, MongoDB, and more.</p>
        </div>
        <div class="card">
          <div class="card-icon">üöÄ</div>
          <div class="card-title">PHP 8.4 (2024)</div>
          <p>Latest stable with JIT compiler, fibers, enums, named args, and more.</p>
        </div>
      </div>

      <h3>How PHP Works</h3>
      <p>The request/response cycle:</p>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Request Flow</div>
        <pre><span class="cmt">// 1. Browser sends HTTP request to web server (Apache/Nginx)
// 2. Web server passes .php file to PHP interpreter
// 3. PHP executes code, queries databases, processes logic
// 4. PHP returns plain HTML to the web server
// 5. Web server sends HTML back to the browser</span>

Browser ‚Üí Web Server ‚Üí PHP Engine ‚Üí Database
                                         ‚Üì
Browser ‚Üê Web Server ‚Üê HTML Output ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
      </div>

      <h3>Installation</h3>
      <p>The fastest way to get PHP running locally:</p>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Terminal</div>
        <pre><span class="cmt"># Option 1: XAMPP (Windows/Mac/Linux) ‚Äî includes Apache + MySQL
# Download from: https://www.apachefriends.org/

# Option 2: Laravel Herd (Mac/Windows) ‚Äî zero config
# https://herd.laravel.com/

# Option 3: PHP built-in server (quick testing)
</span>php -S localhost:8000    <span class="cmt"># Start dev server in current directory</span>
php --version           <span class="cmt"># Check PHP version</span></pre>
      </div>

      <h3>Your First PHP File</h3>
      <p>Create a file called <code>hello.php</code>:</p>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>hello.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">echo</span> <span class="str">"Hello, World! I am learning PHP in 2026!"</span>;
<span class="tag">?&gt;</span></pre>
      </div>

      <div class="box box-tip">
        <div class="box-title">üí° Tip</div>
        If a PHP file contains only PHP (no HTML), you can omit the closing <code>?&gt;</code> tag. This is actually best practice to avoid accidental whitespace.
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Exercise 1</div>
        <ol>
          <li>Install XAMPP or start PHP's built-in server.</li>
          <li>Create <code>index.php</code> in your web root.</li>
          <li>Output your name and today's date using <code>echo</code>.</li>
          <li>Use <code>phpinfo();</code> to display your PHP configuration.</li>
        </ol>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 2 ¬∑ SYNTAX
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch2">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 02</span>
        <h2>Syntax &amp; Structure</h2>
      </div>

      <h3>PHP Tags</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
    <span class="cmt">// Standard PHP tag ‚Äî always use this</span>
    <span class="fn">echo</span> <span class="str">"Standard"</span>;
<span class="tag">?&gt;</span>

<span class="cmt">// Short echo tag (if enabled in php.ini)</span>
<span class="tag">&lt;?=</span> <span class="str">"Shorthand echo"</span> <span class="tag">?&gt;</span>

<span class="cmt">// Mixing PHP with HTML</span>
<span class="op">&lt;h1&gt;</span><span class="tag">&lt;?php</span> <span class="fn">echo</span> <span class="var">$title</span>; <span class="tag">?&gt;</span><span class="op">&lt;/h1&gt;</span></pre>
      </div>

      <h3>Comments</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>

<span class="cmt">// Single-line comment</span>

<span class="cmt"># Also single-line (shell style)</span>

<span class="cmt">/* 
   Multi-line comment.
   Useful for longer explanations.
*/</span>

<span class="cmt">/**
 * DocBlock comment ‚Äî used for functions/classes
 * @param string $name The user's name
 * @return string Greeting message
 */</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="typ">string</span> <span class="var">$name</span>): <span class="typ">string</span> {
    <span class="kw">return</span> <span class="str">"Hello, "</span> . <span class="var">$name</span>;
}</pre>
      </div>

      <h3>Statements &amp; Semicolons</h3>
      <p>Every PHP statement ends with a semicolon (<code>;</code>). Forgetting it is one of the most common beginner mistakes.</p>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">echo</span> <span class="str">"This is fine"</span>;          <span class="cmt">// ‚úÖ Has semicolon</span>
<span class="var">$x</span> = <span class="num">10</span>;                      <span class="cmt">// ‚úÖ Has semicolon</span>
<span class="fn">echo</span> <span class="str">"Missing semicolon"</span>       <span class="cmt">// ‚ùå Parse error!</span></pre>
      </div>

      <h3>Output Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">echo</span> <span class="str">"Hello"</span>;              <span class="cmt">// Output string (fastest)</span>
<span class="fn">echo</span> <span class="str">"A"</span>, <span class="str">" B"</span>, <span class="str">" C"</span>;    <span class="cmt">// echo accepts multiple args</span>

<span class="fn">print</span> <span class="str">"Hello"</span>;            <span class="cmt">// Similar to echo, returns 1</span>

<span class="fn">var_dump</span>(<span class="num">42</span>);              <span class="cmt">// Shows type + value: int(42)</span>
<span class="fn">var_dump</span>(<span class="str">"hi"</span>, <span class="kw">true</span>);     <span class="cmt">// Accepts multiple args</span>

<span class="fn">print_r</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>]);       <span class="cmt">// Human-readable output (arrays)</span>

<span class="fn">var_export</span>(<span class="num">3.14</span>);         <span class="cmt">// Valid PHP representation</span></pre>
      </div>

      <h3>White Space &amp; Case Sensitivity</h3>
      <div class="box box-info">
        <div class="box-title">‚ÑπÔ∏è Important</div>
        PHP is <strong>case-insensitive</strong> for function names and keywords (<code>echo</code>, <code>ECHO</code>, <code>Echo</code> all work), but <strong>case-sensitive</strong> for variable names (<code>$name</code> ‚â† <code>$Name</code>).
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 3 ¬∑ VARIABLES & TYPES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch3">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 03</span>
        <h2>Variables &amp; Data Types</h2>
      </div>

      <h3>Variables</h3>
      <p>Variables in PHP start with a <code>$</code> sign. PHP is <em>dynamically typed</em> ‚Äî you don't declare the type, PHP figures it out.</p>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Variable declaration and assignment</span>
<span class="var">$name</span>     = <span class="str">"Alice"</span>;      <span class="cmt">// string</span>
<span class="var">$age</span>      = <span class="num">28</span>;           <span class="cmt">// integer</span>
<span class="var">$height</span>   = <span class="num">5.7</span>;         <span class="cmt">// float</span>
<span class="var">$isActive</span> = <span class="kw">true</span>;        <span class="cmt">// boolean</span>
<span class="var">$nothing</span>  = <span class="kw">null</span>;        <span class="cmt">// null</span>

<span class="cmt">// PHP is loosely typed ‚Äî type changes dynamically</span>
<span class="var">$x</span> = <span class="num">5</span>;       <span class="cmt">// int</span>
<span class="var">$x</span> = <span class="str">"five"</span>; <span class="cmt">// now string ‚Äî PHP allows this</span>

<span class="cmt">// Variables are case-sensitive!</span>
<span class="var">$color</span> = <span class="str">"blue"</span>;
<span class="fn">echo</span> <span class="var">$Color</span>; <span class="cmt">// ‚ö†Ô∏è Undefined variable ‚Äî different!</span></pre>
      </div>

      <h3>Naming Rules</h3>
      <table>
        <tr><th>Rule</th><th>Example</th></tr>
        <tr><td>Must start with <code>$</code></td><td><code>$name</code> ‚úÖ</td></tr>
        <tr><td>After <code>$</code>: letter or underscore</td><td><code>$_name</code> ‚úÖ &nbsp; <code>$2name</code> ‚ùå</td></tr>
        <tr><td>Can contain letters, numbers, underscores</td><td><code>$user_id_2</code> ‚úÖ</td></tr>
        <tr><td>Case-sensitive</td><td><code>$Name</code> ‚â† <code>$name</code></td></tr>
        <tr><td>Convention: camelCase or snake_case</td><td><code>$firstName</code> or <code>$first_name</code></td></tr>
      </table>

      <h3>Data Types</h3>

      <h4>Scalars</h4>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚îÄ‚îÄ INTEGER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$int</span>  = <span class="num">42</span>;
<span class="var">$neg</span>  = -<span class="num">10</span>;
<span class="var">$hex</span>  = <span class="num">0x1A</span>;     <span class="cmt">// hexadecimal = 26</span>
<span class="var">$oct</span>  = <span class="num">0755</span>;    <span class="cmt">// octal = 493</span>
<span class="var">$bin</span>  = <span class="num">0b1101</span>;  <span class="cmt">// binary = 13</span>
<span class="var">$big</span>  = <span class="num">1_000_000</span>; <span class="cmt">// underscores for readability (PHP 7.4+)</span>

<span class="cmt">// ‚îÄ‚îÄ FLOAT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$pi</span>  = <span class="num">3.14159</span>;
<span class="var">$sci</span> = <span class="num">1.5e3</span>;     <span class="cmt">// 1500.0</span>
<span class="var">$neg</span> = <span class="num">2.7e-2</span>;   <span class="cmt">// 0.027</span>

<span class="cmt">// ‚îÄ‚îÄ STRING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$single</span> = <span class="str">'No variable interpolation: $name'</span>;
<span class="var">$double</span> = <span class="str">"Hello, $name! You are {$age} years old."</span>;

<span class="cmt">// Heredoc (like double-quoted, preserves whitespace)</span>
<span class="var">$heredoc</span> = <span class="kw">&lt;&lt;&lt;EOT</span>
<span class="str">Line 1: $name
Line 2: Multi-line string
</span><span class="kw">EOT</span>;

<span class="cmt">// Nowdoc (like single-quoted)</span>
<span class="var">$nowdoc</span> = <span class="kw">&lt;&lt;&lt;'EOT'</span>
<span class="str">No $interpolation here
</span><span class="kw">EOT</span>;

<span class="cmt">// ‚îÄ‚îÄ BOOLEAN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$yes</span>   = <span class="kw">true</span>;
<span class="var">$no</span>    = <span class="kw">false</span>;
<span class="fn">var_dump</span>(<span class="var">$yes</span>);   <span class="cmt">// bool(true)</span>

<span class="cmt">// ‚îÄ‚îÄ NULL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$empty</span> = <span class="kw">null</span>;
<span class="var">$unset</span>; <span class="cmt">// also null (but generates notice)</span></pre>
      </div>

      <h4>Compound Types</h4>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Array ‚Äî covered in Chapter 7</span>
<span class="var">$colors</span> = [<span class="str">"red"</span>, <span class="str">"green"</span>, <span class="str">"blue"</span>];

<span class="cmt">// Object ‚Äî covered in Chapter 13</span>
<span class="var">$obj</span> = <span class="kw">new</span> <span class="typ">stdClass</span>();
<span class="var">$obj</span>-&gt;name = <span class="str">"Bob"</span>;</pre>
      </div>

      <h3>Type Checking &amp; Casting</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$value</span> = <span class="str">"42"</span>; <span class="cmt">// string</span>

<span class="cmt">// Check type</span>
<span class="fn">gettype</span>(<span class="var">$value</span>);         <span class="cmt">// "string"</span>
<span class="fn">is_string</span>(<span class="var">$value</span>);       <span class="cmt">// true</span>
<span class="fn">is_int</span>(<span class="var">$value</span>);          <span class="cmt">// false</span>
<span class="fn">is_numeric</span>(<span class="var">$value</span>);      <span class="cmt">// true (string containing number)</span>

<span class="cmt">// Type casting</span>
<span class="var">$int</span>   = (<span class="typ">int</span>)<span class="var">$value</span>;    <span class="cmt">// 42</span>
<span class="var">$float</span> = (<span class="typ">float</span>)<span class="var">$value</span>;  <span class="cmt">// 42.0</span>
<span class="var">$bool</span>  = (<span class="typ">bool</span>)<span class="var">$value</span>;   <span class="cmt">// true</span>
<span class="var">$str</span>   = (<span class="typ">string</span>)<span class="num">3.14</span>;  <span class="cmt">// "3.14"</span>

<span class="cmt">// Or use settype()</span>
<span class="fn">settype</span>(<span class="var">$value</span>, <span class="str">"integer"</span>); <span class="cmt">// modifies $value in place</span>

<span class="cmt">// intval(), floatval(), strval()</span>
<span class="fn">intval</span>(<span class="str">"42px"</span>);           <span class="cmt">// 42 (stops at non-numeric)</span>
<span class="fn">intval</span>(<span class="str">"0xFF"</span>, <span class="num">16</span>);      <span class="cmt">// 255</span></pre>
      </div>

      <h3>Constants</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// define() ‚Äî traditional way</span>
<span class="fn">define</span>(<span class="str">"MAX_SIZE"</span>, <span class="num">100</span>);
<span class="fn">define</span>(<span class="str">"APP_NAME"</span>, <span class="str">"MyApp"</span>);
<span class="fn">echo</span> MAX_SIZE;     <span class="cmt">// No $ sign!</span>

<span class="cmt">// const keyword ‚Äî preferred in class context</span>
<span class="kw">const</span> VERSION = <span class="str">"1.0.0"</span>;
<span class="fn">echo</span> VERSION;

<span class="cmt">// PHP magic constants (auto-set by PHP)</span>
<span class="fn">echo</span> __FILE__;      <span class="cmt">// Full path to current file</span>
<span class="fn">echo</span> __LINE__;      <span class="cmt">// Current line number</span>
<span class="fn">echo</span> __DIR__;       <span class="cmt">// Directory of current file</span>
<span class="fn">echo</span> __FUNCTION__;  <span class="cmt">// Name of current function</span>
<span class="fn">echo</span> __CLASS__;     <span class="cmt">// Name of current class</span></pre>
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Exercise 2</div>
        <ol>
          <li>Create variables of each scalar type and output them with <code>var_dump()</code>.</li>
          <li>Use type casting to convert the string <code>"3.99"</code> to int and float.</li>
          <li>Define a constant <code>PI</code> with the value <code>3.14159265</code> and use it in a calculation.</li>
        </ol>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 4 ¬∑ OPERATORS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch4">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 04</span>
        <h2>Operators</h2>
      </div>

      <h3>Arithmetic Operators</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$a</span> = <span class="num">10</span>; <span class="var">$b</span> = <span class="num">3</span>;

<span class="fn">echo</span> <span class="var">$a</span> + <span class="var">$b</span>;   <span class="cmt">// 13  ‚Äî Addition</span>
<span class="fn">echo</span> <span class="var">$a</span> - <span class="var">$b</span>;   <span class="cmt">// 7   ‚Äî Subtraction</span>
<span class="fn">echo</span> <span class="var">$a</span> * <span class="var">$b</span>;   <span class="cmt">// 30  ‚Äî Multiplication</span>
<span class="fn">echo</span> <span class="var">$a</span> / <span class="var">$b</span>;   <span class="cmt">// 3.333... ‚Äî Division</span>
<span class="fn">echo</span> <span class="var">$a</span> % <span class="var">$b</span>;   <span class="cmt">// 1   ‚Äî Modulus (remainder)</span>
<span class="fn">echo</span> <span class="var">$a</span> ** <span class="var">$b</span>;  <span class="cmt">// 1000 ‚Äî Exponentiation (PHP 5.6+)</span>

<span class="cmt">// Increment / Decrement</span>
<span class="var">$x</span> = <span class="num">5</span>;
<span class="fn">echo</span> <span class="var">$x</span>++;  <span class="cmt">// 5 (returns then increments)</span>
<span class="fn">echo</span> ++<span class="var">$x</span>;  <span class="cmt">// 7 (increments then returns)</span>
<span class="fn">echo</span> <span class="var">$x</span>--;  <span class="cmt">// 7 (returns then decrements)</span>
<span class="fn">echo</span> --<span class="var">$x</span>;  <span class="cmt">// 5 (decrements then returns)</span></pre>
      </div>

      <h3>Assignment Operators</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$n</span> = <span class="num">10</span>;
<span class="var">$n</span> += <span class="num">5</span>;   <span class="cmt">// $n = $n + 5  ‚Üí 15</span>
<span class="var">$n</span> -= <span class="num">3</span>;   <span class="cmt">// $n = $n - 3  ‚Üí 12</span>
<span class="var">$n</span> *= <span class="num">2</span>;   <span class="cmt">// $n = $n * 2  ‚Üí 24</span>
<span class="var">$n</span> /= <span class="num">4</span>;   <span class="cmt">// $n = $n / 4  ‚Üí 6</span>
<span class="var">$n</span> %= <span class="num">4</span>;   <span class="cmt">// $n = $n % 4  ‚Üí 2</span>
<span class="var">$n</span> **= <span class="num">3</span>;  <span class="cmt">// $n = $n ** 3 ‚Üí 8</span>

<span class="var">$s</span>  = <span class="str">"Hello"</span>;
<span class="var">$s</span> .= <span class="str">" World"</span>;  <span class="cmt">// String concatenation: "Hello World"</span>

<span class="cmt">// Null coalescing assignment (PHP 7.4+)</span>
<span class="var">$config</span>[<span class="str">'debug'</span>] ??= <span class="kw">false</span>; <span class="cmt">// Set only if null/undefined</span></pre>
      </div>

      <h3>Comparison Operators</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$a</span> = <span class="num">5</span>; <span class="var">$b</span> = <span class="str">"5"</span>; <span class="var">$c</span> = <span class="num">6</span>;

<span class="cmt">// Loose comparison (converts types)</span>
<span class="var">$a</span> == <span class="var">$b</span>   <span class="cmt">// true  ‚Äî value equal (int vs string)</span>
<span class="var">$a</span> != <span class="var">$c</span>   <span class="cmt">// true  ‚Äî not equal</span>

<span class="cmt">// Strict comparison (type + value)</span>
<span class="var">$a</span> === <span class="var">$b</span>  <span class="cmt">// false ‚Äî int !== string!</span>
<span class="var">$a</span> !== <span class="var">$b</span>  <span class="cmt">// true</span>

<span class="cmt">// Relational</span>
<span class="var">$a</span> &lt; <span class="var">$c</span>    <span class="cmt">// true</span>
<span class="var">$a</span> &gt; <span class="var">$c</span>    <span class="cmt">// false</span>
<span class="var">$a</span> &lt;= <span class="var">$c</span>   <span class="cmt">// true</span>
<span class="var">$a</span> &gt;= <span class="var">$c</span>   <span class="cmt">// false</span>

<span class="cmt">// Spaceship operator (PHP 7+) ‚Äî returns -1, 0, or 1</span>
<span class="fn">echo</span> <span class="num">1</span> &lt;=&gt; <span class="num">2</span>;  <span class="cmt">// -1 (left is less)</span>
<span class="fn">echo</span> <span class="num">2</span> &lt;=&gt; <span class="num">2</span>;  <span class="cmt">//  0 (equal)</span>
<span class="fn">echo</span> <span class="num">3</span> &lt;=&gt; <span class="num">2</span>;  <span class="cmt">//  1 (left is greater)</span></pre>
      </div>

      <div class="box box-warn">
        <div class="box-title">‚ö†Ô∏è Warning: Always Use ===</div>
        Always prefer <code>===</code> over <code>==</code>. PHP's loose comparison has surprising edge cases: <code>0 == "foo"</code> is <code>true</code> in PHP 7 (fixed in PHP 8, but still use <code>===</code>).
      </div>

      <h3>Logical Operators</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$t</span> = <span class="kw">true</span>; <span class="var">$f</span> = <span class="kw">false</span>;

<span class="var">$t</span> &amp;&amp; <span class="var">$f</span>    <span class="cmt">// false ‚Äî AND (short-circuits)</span>
<span class="var">$t</span> || <span class="var">$f</span>    <span class="cmt">// true  ‚Äî OR  (short-circuits)</span>
!<span class="var">$t</span>          <span class="cmt">// false ‚Äî NOT</span>
<span class="var">$t</span> <span class="kw">and</span> <span class="var">$f</span>   <span class="cmt">// false ‚Äî same as && but lower precedence</span>
<span class="var">$t</span> <span class="kw">or</span>  <span class="var">$f</span>   <span class="cmt">// true  ‚Äî same as || but lower precedence</span>
<span class="var">$t</span> <span class="kw">xor</span> <span class="var">$f</span>   <span class="cmt">// true  ‚Äî exclusive or</span></pre>
      </div>

      <h3>String Operators</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$first</span> = <span class="str">"Hello"</span>;
<span class="var">$last</span>  = <span class="str">"World"</span>;
<span class="var">$full</span>  = <span class="var">$first</span> . <span class="str">" "</span> . <span class="var">$last</span>;  <span class="cmt">// Concatenation: "Hello World"</span>
<span class="var">$full</span> .= <span class="str">"!"</span>;                      <span class="cmt">// Append: "Hello World!"</span></pre>
      </div>

      <h3>Null Coalescing Operator</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ?? ‚Äî returns left side if not null, otherwise right side</span>
<span class="var">$username</span> = <span class="var">$_GET</span>[<span class="str">'user'</span>] ?? <span class="str">"Guest"</span>;

<span class="cmt">// Chaining</span>
<span class="var">$value</span> = <span class="var">$a</span> ?? <span class="var">$b</span> ?? <span class="var">$c</span> ?? <span class="str">"default"</span>;

<span class="cmt">// Ternary operator</span>
<span class="var">$msg</span> = (<span class="var">$age</span> >= <span class="num">18</span>) ? <span class="str">"Adult"</span> : <span class="str">"Minor"</span>;

<span class="cmt">// Short ternary (Elvis) ‚Äî returns left if truthy</span>
<span class="var">$name</span> = <span class="var">$username</span> ?: <span class="str">"Anonymous"</span>;</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 5 ¬∑ CONTROL STRUCTURES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch5">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 05</span>
        <h2>Control Structures</h2>
      </div>

      <h3>if / elseif / else</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$score</span> = <span class="num">82</span>;

<span class="kw">if</span> (<span class="var">$score</span> >= <span class="num">90</span>) {
    <span class="fn">echo</span> <span class="str">"A ‚Äî Excellent!"</span>;
} <span class="kw">elseif</span> (<span class="var">$score</span> >= <span class="num">80</span>) {
    <span class="fn">echo</span> <span class="str">"B ‚Äî Good job!"</span>;   <span class="cmt">// This runs</span>
} <span class="kw">elseif</span> (<span class="var">$score</span> >= <span class="num">70</span>) {
    <span class="fn">echo</span> <span class="str">"C ‚Äî Average"</span>;
} <span class="kw">else</span> {
    <span class="fn">echo</span> <span class="str">"F ‚Äî Keep trying"</span>;
}

<span class="cmt">// Alternative syntax (useful in HTML templates)</span>
<span class="kw">if</span> (<span class="var">$score</span> > <span class="num">50</span>):
    <span class="fn">echo</span> <span class="str">"Passed"</span>;
<span class="kw">else</span>:
    <span class="fn">echo</span> <span class="str">"Failed"</span>;
<span class="kw">endif</span>;</pre>
      </div>

      <h3>switch / match</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$day</span> = <span class="str">"Monday"</span>;

<span class="cmt">// Classic switch (uses loose comparison)</span>
<span class="kw">switch</span> (<span class="var">$day</span>) {
    <span class="kw">case</span> <span class="str">"Monday"</span>:
    <span class="kw">case</span> <span class="str">"Tuesday"</span>:
        <span class="fn">echo</span> <span class="str">"Weekday"</span>;
        <span class="kw">break</span>;
    <span class="kw">case</span> <span class="str">"Saturday"</span>:
    <span class="kw">case</span> <span class="str">"Sunday"</span>:
        <span class="fn">echo</span> <span class="str">"Weekend"</span>;
        <span class="kw">break</span>;
    <span class="kw">default</span>:
        <span class="fn">echo</span> <span class="str">"Other day"</span>;
}

<span class="cmt">// match expression (PHP 8.0+) ‚Äî strict, returns value, no fallthrough</span>
<span class="var">$result</span> = <span class="kw">match</span>(<span class="var">$day</span>) {
    <span class="str">"Monday"</span>, <span class="str">"Tuesday"</span>, <span class="str">"Wednesday"</span>,
    <span class="str">"Thursday"</span>, <span class="str">"Friday"</span>  =&gt; <span class="str">"Weekday"</span>,
    <span class="str">"Saturday"</span>, <span class="str">"Sunday"</span>  =&gt; <span class="str">"Weekend"</span>,
    <span class="kw">default</span>                 =&gt; <span class="str">"Unknown"</span>,
};
<span class="fn">echo</span> <span class="var">$result</span>; <span class="cmt">// "Weekday"</span></pre>
      </div>

      <h3>Loops</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚îÄ‚îÄ while ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$i</span> = <span class="num">1</span>;
<span class="kw">while</span> (<span class="var">$i</span> <= <span class="num">5</span>) {
    <span class="fn">echo</span> <span class="var">$i</span> . <span class="str">" "</span>;
    <span class="var">$i</span>++;
}
<span class="cmt">// 1 2 3 4 5</span>

<span class="cmt">// ‚îÄ‚îÄ do...while ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$n</span> = <span class="num">10</span>;
<span class="kw">do</span> {
    <span class="fn">echo</span> <span class="var">$n</span>;             <span class="cmt">// runs at least once even if false</span>
    <span class="var">$n</span>++;
} <span class="kw">while</span> (<span class="var">$n</span> < <span class="num">5</span>);

<span class="cmt">// ‚îÄ‚îÄ for ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">for</span> (<span class="var">$i</span> = <span class="num">0</span>; <span class="var">$i</span> < <span class="num">5</span>; <span class="var">$i</span>++) {
    <span class="fn">echo</span> <span class="var">$i</span> * <span class="var">$i</span> . <span class="str">" "</span>; <span class="cmt">// 0 1 4 9 16</span>
}

<span class="cmt">// ‚îÄ‚îÄ foreach ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$fruits</span> = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];
<span class="kw">foreach</span> (<span class="var">$fruits</span> <span class="kw">as</span> <span class="var">$fruit</span>) {
    <span class="fn">echo</span> <span class="var">$fruit</span> . <span class="str">"\n"</span>;
}

<span class="cmt">// With key => value</span>
<span class="var">$person</span> = [<span class="str">"name"</span> =&gt; <span class="str">"Alice"</span>, <span class="str">"age"</span> =&gt; <span class="num">30</span>];
<span class="kw">foreach</span> (<span class="var">$person</span> <span class="kw">as</span> <span class="var">$key</span> =&gt; <span class="var">$value</span>) {
    <span class="fn">echo</span> <span class="str">"$key: $value\n"</span>;
}

<span class="cmt">// ‚îÄ‚îÄ break &amp; continue ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">for</span> (<span class="var">$i</span> = <span class="num">0</span>; <span class="var">$i</span> < <span class="num">10</span>; <span class="var">$i</span>++) {
    <span class="kw">if</span> (<span class="var">$i</span> === <span class="num">3</span>) <span class="kw">continue</span>; <span class="cmt">// skip 3</span>
    <span class="kw">if</span> (<span class="var">$i</span> === <span class="num">7</span>) <span class="kw">break</span>;    <span class="cmt">// stop at 7</span>
    <span class="fn">echo</span> <span class="var">$i</span> . <span class="str">" "</span>;           <span class="cmt">// 0 1 2 4 5 6</span>
}</pre>
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Exercise 3</div>
        <ol>
          <li>Write a <code>for</code> loop that prints the multiplication table (1‚Äì10) for the number 7.</li>
          <li>Use <code>foreach</code> to display all keys and values from an associative array of country capitals.</li>
          <li>Rewrite the grade example using PHP 8's <code>match</code> expression.</li>
        </ol>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 6 ¬∑ FUNCTIONS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch6">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 06</span>
        <h2>Functions</h2>
      </div>

      <h3>Defining &amp; Calling Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Basic function definition</span>
<span class="kw">function</span> <span class="fn">sayHello</span>() {
    <span class="fn">echo</span> <span class="str">"Hello!"</span>;
}
<span class="fn">sayHello</span>();   <span class="cmt">// Call it</span>

<span class="cmt">// With parameters</span>
<span class="kw">function</span> <span class="fn">greet</span>(<span class="var">$name</span>, <span class="var">$greeting</span> = <span class="str">"Hello"</span>) {
    <span class="fn">echo</span> <span class="str">"$greeting, $name!"</span>;
}
<span class="fn">greet</span>(<span class="str">"Alice"</span>);           <span class="cmt">// "Hello, Alice!"</span>
<span class="fn">greet</span>(<span class="str">"Bob"</span>, <span class="str">"Hi"</span>);      <span class="cmt">// "Hi, Bob!"</span>

<span class="cmt">// Return values</span>
<span class="kw">function</span> <span class="fn">add</span>(<span class="var">$a</span>, <span class="var">$b</span>) {
    <span class="kw">return</span> <span class="var">$a</span> + <span class="var">$b</span>;
}
<span class="var">$sum</span> = <span class="fn">add</span>(<span class="num">3</span>, <span class="num">4</span>);  <span class="cmt">// 7</span></pre>
      </div>

      <h3>Type Declarations</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);  <span class="cmt">// Enable strict mode at top of file</span>

<span class="cmt">// Type hints in signature</span>
<span class="kw">function</span> <span class="fn">multiply</span>(<span class="typ">float</span> <span class="var">$a</span>, <span class="typ">float</span> <span class="var">$b</span>): <span class="typ">float</span> {
    <span class="kw">return</span> <span class="var">$a</span> * <span class="var">$b</span>;
}

<span class="cmt">// Nullable types</span>
<span class="kw">function</span> <span class="fn">findUser</span>(<span class="typ">int</span> <span class="var">$id</span>): ?<span class="typ">string</span> {
    <span class="kw">return</span> <span class="var">$id</span> === <span class="num">1</span> ? <span class="str">"Alice"</span> : <span class="kw">null</span>;
}

<span class="cmt">// Union types (PHP 8.0+)</span>
<span class="kw">function</span> <span class="fn">process</span>(<span class="typ">int</span>|<span class="typ">string</span> <span class="var">$input</span>): <span class="typ">int</span>|<span class="typ">string</span> {
    <span class="kw">return</span> <span class="fn">is_string</span>(<span class="var">$input</span>) ? <span class="fn">strtoupper</span>(<span class="var">$input</span>) : <span class="var">$input</span> * <span class="num">2</span>;
}

<span class="cmt">// void return type</span>
<span class="kw">function</span> <span class="fn">logMessage</span>(<span class="typ">string</span> <span class="var">$msg</span>): <span class="typ">void</span> {
    <span class="fn">file_put_contents</span>(<span class="str">'log.txt'</span>, <span class="var">$msg</span>, <span class="op">FILE_APPEND</span>);
    <span class="cmt">// no return needed</span>
}</pre>
      </div>

      <h3>Variable Scope</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$globalVar</span> = <span class="str">"I'm global"</span>;

<span class="kw">function</span> <span class="fn">testScope</span>() {
    <span class="cmt">// Cannot access $globalVar here ‚Äî different scope!</span>
    <span class="fn">echo</span> <span class="var">$globalVar</span> ?? <span class="str">"undefined"</span>;  <span class="cmt">// "undefined"</span>

    <span class="cmt">// Use global keyword to access</span>
    <span class="kw">global</span> <span class="var">$globalVar</span>;
    <span class="fn">echo</span> <span class="var">$globalVar</span>;  <span class="cmt">// "I'm global"</span>
}

<span class="cmt">// Static variables ‚Äî persist between calls</span>
<span class="kw">function</span> <span class="fn">counter</span>() {
    <span class="kw">static</span> <span class="var">$count</span> = <span class="num">0</span>;
    <span class="var">$count</span>++;
    <span class="fn">echo</span> <span class="var">$count</span>;
}
<span class="fn">counter</span>(); <span class="cmt">// 1</span>
<span class="fn">counter</span>(); <span class="cmt">// 2</span>
<span class="fn">counter</span>(); <span class="cmt">// 3</span></pre>
      </div>

      <h3>Pass by Reference</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Pass by value (default) ‚Äî function gets a copy</span>
<span class="kw">function</span> <span class="fn">double</span>(<span class="var">$n</span>) { <span class="var">$n</span> *= <span class="num">2</span>; }
<span class="var">$x</span> = <span class="num">5</span>;
<span class="fn">double</span>(<span class="var">$x</span>);
<span class="fn">echo</span> <span class="var">$x</span>;  <span class="cmt">// 5 ‚Äî unchanged</span>

<span class="cmt">// Pass by reference ‚Äî modifies the original</span>
<span class="kw">function</span> <span class="fn">doubleRef</span>(&amp;<span class="var">$n</span>) { <span class="var">$n</span> *= <span class="num">2</span>; }
<span class="var">$x</span> = <span class="num">5</span>;
<span class="fn">doubleRef</span>(<span class="var">$x</span>);
<span class="fn">echo</span> <span class="var">$x</span>;  <span class="cmt">// 10 ‚Äî changed!</span></pre>
      </div>

      <h3>Variadic Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ... (splat) collects remaining args into array</span>
<span class="kw">function</span> <span class="fn">sum</span>(<span class="typ">int</span> ...<span class="var">$numbers</span>): <span class="typ">int</span> {
    <span class="kw">return</span> <span class="fn">array_sum</span>(<span class="var">$numbers</span>);
}
<span class="fn">echo</span> <span class="fn">sum</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>);  <span class="cmt">// 10</span>

<span class="cmt">// Named arguments (PHP 8.0+)</span>
<span class="kw">function</span> <span class="fn">createUser</span>(<span class="typ">string</span> <span class="var">$name</span>, <span class="typ">int</span> <span class="var">$age</span> = <span class="num">18</span>, <span class="typ">bool</span> <span class="var">$admin</span> = <span class="kw">false</span>) {
    <span class="kw">return</span> <span class="fn">compact</span>(<span class="str">'name'</span>, <span class="str">'age'</span>, <span class="str">'admin'</span>);
}
<span class="fn">createUser</span>(name: <span class="str">"Alice"</span>, admin: <span class="kw">true</span>);  <span class="cmt">// Skip $age, name args by name</span></pre>
      </div>

      <h3>Anonymous Functions &amp; Arrow Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Closure (anonymous function)</span>
<span class="var">$greet</span> = <span class="kw">function</span>(<span class="var">$name</span>) {
    <span class="kw">return</span> <span class="str">"Hello, $name!"</span>;
};
<span class="fn">echo</span> <span class="var">$greet</span>(<span class="str">"World"</span>);

<span class="cmt">// Capture outer variables with use</span>
<span class="var">$prefix</span> = <span class="str">"Mr."</span>;
<span class="var">$formal</span> = <span class="kw">function</span>(<span class="var">$name</span>) <span class="kw">use</span> (<span class="var">$prefix</span>) {
    <span class="kw">return</span> <span class="str">"$prefix $name"</span>;
};

<span class="cmt">// Arrow function (PHP 7.4+) ‚Äî auto-captures outer scope</span>
<span class="var">$double</span> = <span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> * <span class="num">2</span>;
<span class="fn">echo</span> <span class="var">$double</span>(<span class="num">5</span>);  <span class="cmt">// 10</span>

<span class="cmt">// Used with array functions</span>
<span class="var">$nums</span>    = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];
<span class="var">$evens</span>   = <span class="fn">array_filter</span>(<span class="var">$nums</span>, <span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> % <span class="num">2</span> === <span class="num">0</span>);
<span class="var">$doubled</span> = <span class="fn">array_map</span>(<span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> * <span class="num">2</span>, <span class="var">$nums</span>);</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 7 ¬∑ ARRAYS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch7">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 07</span>
        <h2>Arrays</h2>
      </div>

      <h3>Array Types</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Indexed array</span>
<span class="var">$fruits</span> = [<span class="str">"apple"</span>, <span class="str">"banana"</span>, <span class="str">"cherry"</span>];
<span class="fn">echo</span> <span class="var">$fruits</span>[<span class="num">0</span>];   <span class="cmt">// "apple"</span>
<span class="fn">echo</span> <span class="var">$fruits</span>[<span class="num">2</span>];   <span class="cmt">// "cherry"</span>

<span class="cmt">// Associative array (key => value)</span>
<span class="var">$person</span> = [
    <span class="str">"name"</span>  =&gt; <span class="str">"Alice"</span>,
    <span class="str">"age"</span>   =&gt; <span class="num">30</span>,
    <span class="str">"email"</span> =&gt; <span class="str">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8dece1e4eee8cde8f5ece0fde1e8a3eee2e0">[email&#160;protected]</a>"</span>,
];
<span class="fn">echo</span> <span class="var">$person</span>[<span class="str">"name"</span>];  <span class="cmt">// "Alice"</span>

<span class="cmt">// Multidimensional array</span>
<span class="var">$matrix</span> = [
    [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>],
    [<span class="num">4</span>, <span class="num">5</span>, <span class="num">6</span>],
    [<span class="num">7</span>, <span class="num">8</span>, <span class="num">9</span>],
];
<span class="fn">echo</span> <span class="var">$matrix</span>[<span class="num">1</span>][<span class="num">2</span>];  <span class="cmt">// 6</span>

<span class="cmt">// Array of objects/arrays (common in real apps)</span>
<span class="var">$users</span> = [
    [<span class="str">"id"</span> =&gt; <span class="num">1</span>, <span class="str">"name"</span> =&gt; <span class="str">"Alice"</span>],
    [<span class="str">"id"</span> =&gt; <span class="num">2</span>, <span class="str">"name"</span> =&gt; <span class="str">"Bob"</span>],
];
<span class="fn">echo</span> <span class="var">$users</span>[<span class="num">0</span>][<span class="str">"name"</span>];  <span class="cmt">// "Alice"</span></pre>
      </div>

      <h3>Modifying Arrays</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$arr</span> = [<span class="str">"a"</span>, <span class="str">"b"</span>, <span class="str">"c"</span>];

<span class="cmt">// Add elements</span>
<span class="var">$arr</span>[] = <span class="str">"d"</span>;             <span class="cmt">// Append: ["a","b","c","d"]</span>
<span class="fn">array_push</span>(<span class="var">$arr</span>, <span class="str">"e"</span>);    <span class="cmt">// Same as []</span>
<span class="fn">array_unshift</span>(<span class="var">$arr</span>, <span class="str">"z"</span>); <span class="cmt">// Prepend</span>

<span class="cmt">// Remove elements</span>
<span class="fn">array_pop</span>(<span class="var">$arr</span>);          <span class="cmt">// Remove last</span>
<span class="fn">array_shift</span>(<span class="var">$arr</span>);        <span class="cmt">// Remove first</span>
<span class="kw">unset</span>(<span class="var">$arr</span>[<span class="num">1</span>]);           <span class="cmt">// Remove by index (leaves gap)</span>

<span class="cmt">// Reindex after unset</span>
<span class="var">$arr</span> = <span class="fn">array_values</span>(<span class="var">$arr</span>); <span class="cmt">// Re-index from 0</span>

<span class="cmt">// Slicing</span>
<span class="var">$slice</span> = <span class="fn">array_slice</span>(<span class="var">$arr</span>, <span class="num">1</span>, <span class="num">3</span>);  <span class="cmt">// offset=1, length=3</span>

<span class="cmt">// Splicing (remove and insert)</span>
<span class="fn">array_splice</span>(<span class="var">$arr</span>, <span class="num">1</span>, <span class="num">2</span>, [<span class="str">"x"</span>, <span class="str">"y"</span>]);</pre>
      </div>

      <h3>Searching &amp; Sorting</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$nums</span> = [<span class="num">3</span>, <span class="num">1</span>, <span class="num">4</span>, <span class="num">1</span>, <span class="num">5</span>, <span class="num">9</span>, <span class="num">2</span>, <span class="num">6</span>];

<span class="cmt">// Searching</span>
<span class="fn">in_array</span>(<span class="num">5</span>, <span class="var">$nums</span>);           <span class="cmt">// true ‚Äî exists?</span>
<span class="fn">array_search</span>(<span class="num">5</span>, <span class="var">$nums</span>);       <span class="cmt">// 4 ‚Äî returns index</span>
<span class="fn">array_key_exists</span>(<span class="str">"name"</span>, <span class="var">$arr</span>); <span class="cmt">// for associative</span>

<span class="cmt">// Sorting</span>
<span class="fn">sort</span>(<span class="var">$nums</span>);              <span class="cmt">// [1,1,2,3,4,5,6,9] ascending</span>
<span class="fn">rsort</span>(<span class="var">$nums</span>);             <span class="cmt">// descending</span>
<span class="fn">asort</span>(<span class="var">$arr</span>);              <span class="cmt">// sort by value, maintain keys</span>
<span class="fn">ksort</span>(<span class="var">$arr</span>);              <span class="cmt">// sort by key</span>

<span class="cmt">// Custom sort</span>
<span class="fn">usort</span>(<span class="var">$users</span>, <span class="fn">fn</span>(<span class="var">$a</span>, <span class="var">$b</span>) =&gt; <span class="var">$a</span>[<span class="str">"age"</span>] &lt;=&gt; <span class="var">$b</span>[<span class="str">"age"</span>]);</pre>
      </div>

      <h3>Functional Array Operations</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$numbers</span> = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];

<span class="cmt">// array_map ‚Äî transform each element</span>
<span class="var">$squared</span> = <span class="fn">array_map</span>(<span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> ** <span class="num">2</span>, <span class="var">$numbers</span>);
<span class="cmt">// [1, 4, 9, 16, 25]</span>

<span class="cmt">// array_filter ‚Äî keep elements where callback returns true</span>
<span class="var">$odds</span> = <span class="fn">array_filter</span>(<span class="var">$numbers</span>, <span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> % <span class="num">2</span> !== <span class="num">0</span>);
<span class="cmt">// [1, 3, 5]</span>

<span class="cmt">// array_reduce ‚Äî fold to single value</span>
<span class="var">$sum</span> = <span class="fn">array_reduce</span>(<span class="var">$numbers</span>, <span class="fn">fn</span>(<span class="var">$carry</span>, <span class="var">$n</span>) =&gt; <span class="var">$carry</span> + <span class="var">$n</span>, <span class="num">0</span>);
<span class="cmt">// 15</span>

<span class="cmt">// array_combine ‚Äî create from two arrays</span>
<span class="var">$keys</span>   = [<span class="str">"a"</span>, <span class="str">"b"</span>, <span class="str">"c"</span>];
<span class="var">$values</span> = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>];
<span class="var">$map</span>    = <span class="fn">array_combine</span>(<span class="var">$keys</span>, <span class="var">$values</span>);
<span class="cmt">// ["a"=>1, "b"=>2, "c"=>3]</span>

<span class="cmt">// array_unique, array_flip, array_merge</span>
<span class="var">$unique</span> = <span class="fn">array_unique</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">2</span>, <span class="num">3</span>]);     <span class="cmt">// [1,2,3]</span>
<span class="var">$merged</span> = <span class="fn">array_merge</span>([<span class="num">1</span>, <span class="num">2</span>], [<span class="num">3</span>, <span class="num">4</span>]);   <span class="cmt">// [1,2,3,4]</span>
<span class="var">$count</span>  = <span class="fn">count</span>(<span class="var">$numbers</span>);               <span class="cmt">// 5</span></pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 8 ¬∑ STRINGS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch8">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 08</span>
        <h2>Strings</h2>
      </div>

      <h3>Essential String Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$s</span> = <span class="str">"  Hello, World!  "</span>;

<span class="cmt">// Length and case</span>
<span class="fn">strlen</span>(<span class="var">$s</span>);            <span class="cmt">// 18 (including spaces)</span>
<span class="fn">strtolower</span>(<span class="var">$s</span>);        <span class="cmt">// "  hello, world!  "</span>
<span class="fn">strtoupper</span>(<span class="var">$s</span>);        <span class="cmt">// "  HELLO, WORLD!  "</span>
<span class="fn">ucfirst</span>(<span class="str">"hello"</span>);     <span class="cmt">// "Hello"</span>
<span class="fn">ucwords</span>(<span class="str">"hello world"</span>);<span class="cmt">// "Hello World"</span>

<span class="cmt">// Trimming</span>
<span class="fn">trim</span>(<span class="var">$s</span>);              <span class="cmt">// "Hello, World!"</span>
<span class="fn">ltrim</span>(<span class="var">$s</span>);             <span class="cmt">// left only</span>
<span class="fn">rtrim</span>(<span class="var">$s</span>);             <span class="cmt">// right only</span>

<span class="cmt">// Searching</span>
<span class="fn">strpos</span>(<span class="var">$s</span>, <span class="str">"World"</span>);   <span class="cmt">// 9 ‚Äî first occurrence</span>
<span class="fn">strrpos</span>(<span class="var">$s</span>, <span class="str">"l"</span>);     <span class="cmt">// 12 ‚Äî last occurrence</span>
<span class="fn">str_contains</span>(<span class="var">$s</span>, <span class="str">"Hello"</span>);   <span class="cmt">// true (PHP 8+)</span>
<span class="fn">str_starts_with</span>(<span class="var">$s</span>, <span class="str">"  H"</span>);  <span class="cmt">// true (PHP 8+)</span>
<span class="fn">str_ends_with</span>(<span class="var">$s</span>, <span class="str">"!  "</span>);   <span class="cmt">// true (PHP 8+)</span>

<span class="cmt">// Substrings</span>
<span class="fn">substr</span>(<span class="var">$s</span>, <span class="num">2</span>, <span class="num">5</span>);      <span class="cmt">// "Hello" (offset=2, length=5)</span>
<span class="fn">substr</span>(<span class="var">$s</span>, -<span class="num">5</span>);        <span class="cmt">// last 5 chars</span>

<span class="cmt">// Replace</span>
<span class="fn">str_replace</span>(<span class="str">"World"</span>, <span class="str">"PHP"</span>, <span class="var">$s</span>);  <span class="cmt">// "  Hello, PHP!  "</span>
<span class="fn">str_ireplace</span>(...);  <span class="cmt">// case-insensitive</span>

<span class="cmt">// Split and join</span>
<span class="var">$parts</span> = <span class="fn">explode</span>(<span class="str">","</span>, <span class="str">"a,b,c"</span>);    <span class="cmt">// ["a", "b", "c"]</span>
<span class="var">$joined</span>= <span class="fn">implode</span>(<span class="str">" | "</span>, <span class="var">$parts</span>);   <span class="cmt">// "a | b | c"</span>

<span class="cmt">// Padding and repetition</span>
<span class="fn">str_pad</span>(<span class="str">"5"</span>, <span class="num">3</span>, <span class="str">"0"</span>, <span class="op">STR_PAD_LEFT</span>); <span class="cmt">// "005"</span>
<span class="fn">str_repeat</span>(<span class="str">"ab"</span>, <span class="num">3</span>);               <span class="cmt">// "ababab"</span>

<span class="cmt">// Formatting</span>
<span class="fn">sprintf</span>(<span class="str">"%.2f"</span>, <span class="num">3.14159</span>);          <span class="cmt">// "3.14"</span>
<span class="fn">number_format</span>(<span class="num">1234567.89</span>, <span class="num">2</span>, <span class="str">'.'</span>, <span class="str">','</span>); <span class="cmt">// "1,234,567.89"</span></pre>
      </div>

      <h3>Regular Expressions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Test if pattern matches</span>
<span class="fn">preg_match</span>(<span class="str">'/^\d{4}-\d{2}-\d{2}$/'</span>, <span class="str">'2026-01-15'</span>); <span class="cmt">// 1 (match)</span>

<span class="cmt">// Get all matches</span>
<span class="fn">preg_match_all</span>(<span class="str">'/\b\w{5}\b/'</span>, <span class="str">"hello world today"</span>, <span class="var">$m</span>);
<span class="fn">print_r</span>(<span class="var">$m</span>[<span class="num">0</span>]);  <span class="cmt">// ["hello", "world", "today"]</span>

<span class="cmt">// Replace using regex</span>
<span class="fn">preg_replace</span>(<span class="str">'/\s+/'</span>, <span class="str">'-'</span>, <span class="str">"hello world"</span>);  <span class="cmt">// "hello-world"</span>

<span class="cmt">// Split</span>
<span class="fn">preg_split</span>(<span class="str">'/[\s,]+/'</span>, <span class="str">"one two,three"</span>);
<span class="cmt">// ["one", "two", "three"]</span>

<span class="cmt">// Email validation example</span>
<span class="kw">function</span> <span class="fn">isValidEmail</span>(<span class="var">$email</span>): <span class="typ">bool</span> {
    <span class="kw">return</span> <span class="fn">filter_var</span>(<span class="var">$email</span>, <span class="op">FILTER_VALIDATE_EMAIL</span>) !== <span class="kw">false</span>;
}</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 9 ¬∑ FORMS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch9">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 09</span>
        <h2>Forms &amp; User Input</h2>
      </div>

      <h3>HTML Form ‚Üí PHP</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>form.html</div>
        <pre>&lt;form action=<span class="str">"process.php"</span> method=<span class="str">"POST"</span>&gt;
    &lt;label&gt;Name:   &lt;input type=<span class="str">"text"</span>  name=<span class="str">"name"</span>&gt;&lt;/label&gt;
    &lt;label&gt;Email:  &lt;input type=<span class="str">"email"</span> name=<span class="str">"email"</span>&gt;&lt;/label&gt;
    &lt;label&gt;Age:    &lt;input type=<span class="str">"number"</span> name=<span class="str">"age"</span>&gt;&lt;/label&gt;
    &lt;label&gt;
        &lt;select name=<span class="str">"role"</span>&gt;
            &lt;option value=<span class="str">"user"</span>&gt;User&lt;/option&gt;
            &lt;option value=<span class="str">"admin"</span>&gt;Admin&lt;/option&gt;
        &lt;/select&gt;
    &lt;/label&gt;
    &lt;button type=<span class="str">"submit"</span>&gt;Submit&lt;/button&gt;
&lt;/form&gt;</pre>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>process.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// $_GET  ‚Äî URL query params: ?name=Alice
// $_POST ‚Äî Form data (safer for sensitive info)
// $_REQUEST ‚Äî combines GET, POST, COOKIE (avoid in production)</span>

<span class="kw">if</span> (<span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>] === <span class="str">'POST'</span>) {

    <span class="cmt">// Always sanitize input first!</span>
    <span class="var">$name</span>  = <span class="fn">htmlspecialchars</span>(<span class="fn">trim</span>(<span class="var">$_POST</span>[<span class="str">'name'</span>] ?? <span class="str">''</span>));
    <span class="var">$email</span> = <span class="fn">filter_input</span>(<span class="op">INPUT_POST</span>, <span class="str">'email'</span>, <span class="op">FILTER_SANITIZE_EMAIL</span>);
    <span class="var">$age</span>   = <span class="fn">filter_input</span>(<span class="op">INPUT_POST</span>, <span class="str">'age'</span>,   <span class="op">FILTER_VALIDATE_INT</span>);

    <span class="cmt">// Validate</span>
    <span class="var">$errors</span> = [];

    <span class="kw">if</span> (<span class="fn">empty</span>(<span class="var">$name</span>)) {
        <span class="var">$errors</span>[] = <span class="str">"Name is required."</span>;
    }
    <span class="kw">if</span> (!<span class="fn">filter_var</span>(<span class="var">$email</span>, <span class="op">FILTER_VALIDATE_EMAIL</span>)) {
        <span class="var">$errors</span>[] = <span class="str">"Invalid email address."</span>;
    }
    <span class="kw">if</span> (<span class="var">$age</span> === <span class="kw">false</span> || <span class="var">$age</span> < <span class="num">1</span> || <span class="var">$age</span> > <span class="num">120</span>) {
        <span class="var">$errors</span>[] = <span class="str">"Age must be between 1 and 120."</span>;
    }

    <span class="kw">if</span> (<span class="fn">empty</span>(<span class="var">$errors</span>)) {
        <span class="fn">echo</span> <span class="str">"Welcome, $name! We'll email: $email"</span>;
    } <span class="kw">else</span> {
        <span class="kw">foreach</span> (<span class="var">$errors</span> <span class="kw">as</span> <span class="var">$err</span>) {
            <span class="fn">echo</span> <span class="str">"&lt;p style='color:red'&gt;$err&lt;/p&gt;"</span>;
        }
    }
}</pre>
      </div>

      <h3>Filter Functions</h3>
      <table>
        <tr><th>Filter</th><th>Purpose</th></tr>
        <tr><td><code>FILTER_VALIDATE_EMAIL</code></td><td>Validate email address</td></tr>
        <tr><td><code>FILTER_VALIDATE_URL</code></td><td>Validate URL</td></tr>
        <tr><td><code>FILTER_VALIDATE_INT</code></td><td>Validate integer</td></tr>
        <tr><td><code>FILTER_VALIDATE_FLOAT</code></td><td>Validate float</td></tr>
        <tr><td><code>FILTER_VALIDATE_IP</code></td><td>Validate IP address</td></tr>
        <tr><td><code>FILTER_SANITIZE_STRING</code></td><td>Remove tags</td></tr>
        <tr><td><code>FILTER_SANITIZE_EMAIL</code></td><td>Remove illegal chars from email</td></tr>
        <tr><td><code>FILTER_SANITIZE_URL</code></td><td>Remove illegal chars from URL</td></tr>
      </table>

      <h3>File Uploads</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// HTML form must have enctype="multipart/form-data"</span>
<span class="cmt">// &lt;input type="file" name="photo"&gt;</span>

<span class="kw">if</span> (<span class="fn">isset</span>(<span class="var">$_FILES</span>[<span class="str">'photo'</span>])) {
    <span class="var">$file</span>      = <span class="var">$_FILES</span>[<span class="str">'photo'</span>];
    <span class="var">$allowed</span>   = [<span class="str">'image/jpeg'</span>, <span class="str">'image/png'</span>, <span class="str">'image/gif'</span>];
    <span class="var">$maxSize</span>   = <span class="num">2</span> * <span class="num">1024</span> * <span class="num">1024</span>; <span class="cmt">// 2MB</span>

    <span class="kw">if</span> (<span class="var">$file</span>[<span class="str">'error'</span>] === <span class="op">UPLOAD_ERR_OK</span>
        &amp;&amp; <span class="fn">in_array</span>(<span class="var">$file</span>[<span class="str">'type'</span>], <span class="var">$allowed</span>)
        &amp;&amp; <span class="var">$file</span>[<span class="str">'size'</span>] <= <span class="var">$maxSize</span>
    ) {
        <span class="var">$destination</span> = <span class="str">'uploads/'</span> . <span class="fn">basename</span>(<span class="var">$file</span>[<span class="str">'name'</span>]);
        <span class="fn">move_uploaded_file</span>(<span class="var">$file</span>[<span class="str">'tmp_name'</span>], <span class="var">$destination</span>);
        <span class="fn">echo</span> <span class="str">"Upload successful!"</span>;
    }
}</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 10 ¬∑ FILE HANDLING
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch10">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 10</span>
        <h2>File Handling</h2>
      </div>

      <h3>Reading &amp; Writing Files</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Simple read/write</span>
<span class="fn">file_put_contents</span>(<span class="str">'data.txt'</span>, <span class="str">"Hello File!"</span>);
<span class="fn">file_put_contents</span>(<span class="str">'data.txt'</span>, <span class="str">"\nMore data"</span>, <span class="op">FILE_APPEND</span>);
<span class="var">$content</span> = <span class="fn">file_get_contents</span>(<span class="str">'data.txt'</span>);

<span class="cmt">// Read as lines array</span>
<span class="var">$lines</span> = <span class="fn">file</span>(<span class="str">'data.txt'</span>, <span class="op">FILE_IGNORE_NEW_LINES</span>);

<span class="cmt">// Low-level file operations</span>
<span class="var">$handle</span> = <span class="fn">fopen</span>(<span class="str">'data.txt'</span>, <span class="str">'r'</span>);   <span class="cmt">// r, w, a, r+, w+</span>
<span class="kw">while</span> (!<span class="fn">feof</span>(<span class="var">$handle</span>)) {
    <span class="var">$line</span> = <span class="fn">fgets</span>(<span class="var">$handle</span>);
    <span class="fn">echo</span> <span class="var">$line</span>;
}
<span class="fn">fclose</span>(<span class="var">$handle</span>);

<span class="cmt">// CSV handling</span>
<span class="var">$fp</span>  = <span class="fn">fopen</span>(<span class="str">'users.csv'</span>, <span class="str">'w'</span>);
<span class="fn">fputcsv</span>(<span class="var">$fp</span>, [<span class="str">'Name'</span>, <span class="str">'Email'</span>, <span class="str">'Age'</span>]);
<span class="fn">fputcsv</span>(<span class="var">$fp</span>, [<span class="str">'Alice'</span>, <span class="str">'<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3a5b5653595f7a5f4214595557">[email&#160;protected]</a>'</span>, <span class="num">30</span>]);
<span class="fn">fclose</span>(<span class="var">$fp</span>);

<span class="cmt">// File info</span>
<span class="fn">file_exists</span>(<span class="str">'data.txt'</span>);    <span class="cmt">// bool</span>
<span class="fn">is_file</span>(<span class="str">'data.txt'</span>);        <span class="cmt">// bool</span>
<span class="fn">is_dir</span>(<span class="str">'uploads/'</span>);         <span class="cmt">// bool</span>
<span class="fn">filesize</span>(<span class="str">'data.txt'</span>);       <span class="cmt">// bytes</span>
<span class="fn">filemtime</span>(<span class="str">'data.txt'</span>);      <span class="cmt">// last modified timestamp</span>

<span class="cmt">// Directory operations</span>
<span class="fn">mkdir</span>(<span class="str">'new_dir'</span>, <span class="num">0755</span>, <span class="kw">true</span>);    <span class="cmt">// recursive</span>
<span class="fn">rmdir</span>(<span class="str">'empty_dir'</span>);
<span class="fn">scandir</span>(<span class="str">'.'</span>);                    <span class="cmt">// list files in dir</span>
<span class="fn">rename</span>(<span class="str">'old.txt'</span>, <span class="str">'new.txt'</span>);
<span class="fn">copy</span>(<span class="str">'source.txt'</span>, <span class="str">'dest.txt'</span>);
<span class="fn">unlink</span>(<span class="str">'file.txt'</span>);              <span class="cmt">// delete file</span></pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 11 ¬∑ MYSQL
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch11">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 11</span>
        <h2>MySQL &amp; Databases</h2>
      </div>

      <div class="box box-warn">
        <div class="box-title">‚ö†Ô∏è Use PDO or MySQLi ‚Äî Never mysql_*</div>
        The old <code>mysql_*</code> functions were removed in PHP 7. Always use <strong>PDO</strong> (recommended) or <strong>MySQLi</strong>.
      </div>

      <h3>PDO Connection</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>db.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">function</span> <span class="fn">getConnection</span>(): <span class="typ">PDO</span> {
    <span class="var">$host</span>  = <span class="str">'localhost'</span>;
    <span class="var">$db</span>    = <span class="str">'myapp'</span>;
    <span class="var">$user</span>  = <span class="str">'root'</span>;
    <span class="var">$pass</span>  = <span class="str">'secret'</span>;
    <span class="var">$dsn</span>   = <span class="str">"mysql:host=$host;dbname=$db;charset=utf8mb4"</span>;

    <span class="var">$options</span> = [
        <span class="typ">PDO</span>::<span class="op">ATTR_ERRMODE</span>            =&gt; <span class="typ">PDO</span>::<span class="op">ERRMODE_EXCEPTION</span>,
        <span class="typ">PDO</span>::<span class="op">ATTR_DEFAULT_FETCH_MODE</span> =&gt; <span class="typ">PDO</span>::<span class="op">FETCH_ASSOC</span>,
        <span class="typ">PDO</span>::<span class="op">ATTR_EMULATE_PREPARES</span>   =&gt; <span class="kw">false</span>,
    ];

    <span class="kw">return</span> <span class="kw">new</span> <span class="typ">PDO</span>(<span class="var">$dsn</span>, <span class="var">$user</span>, <span class="var">$pass</span>, <span class="var">$options</span>);
}

<span class="var">$pdo</span> = <span class="fn">getConnection</span>();</pre>
      </div>

      <h3>CRUD Operations</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî CRUD with PDO</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚îÄ‚îÄ CREATE TABLE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$pdo</span>-&gt;<span class="fn">exec</span>(<span class="str">"
    CREATE TABLE IF NOT EXISTS users (
        id       INT AUTO_INCREMENT PRIMARY KEY,
        name     VARCHAR(100) NOT NULL,
        email    VARCHAR(150) UNIQUE NOT NULL,
        age      INT,
        created  TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
"</span>);

<span class="cmt">// ‚îÄ‚îÄ INSERT (with prepared statement) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">
    "INSERT INTO users (name, email, age) VALUES (:name, :email, :age)"</span>);

<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([
    <span class="str">':name'</span>  =&gt; <span class="str">'Alice'</span>,
    <span class="str">':email'</span> =&gt; <span class="str">'<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="17767b7e747257726f767a677b723974787a">[email&#160;protected]</a>'</span>,
    <span class="str">':age'</span>   =&gt; <span class="num">30</span>,
]);
<span class="var">$newId</span> = <span class="var">$pdo</span>-&gt;<span class="fn">lastInsertId</span>();

<span class="cmt">// ‚îÄ‚îÄ SELECT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">query</span>(<span class="str">"SELECT * FROM users"</span>);
<span class="var">$users</span> = <span class="var">$stmt</span>-&gt;<span class="fn">fetchAll</span>();  <span class="cmt">// all rows as array</span>

<span class="cmt">// SELECT with WHERE (always use prepared statements!)</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE id = :id"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="str">':id'</span> =&gt; <span class="num">1</span>]);
<span class="var">$user</span> = <span class="var">$stmt</span>-&gt;<span class="fn">fetch</span>();       <span class="cmt">// single row</span>

<span class="cmt">// ‚îÄ‚îÄ UPDATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">
    "UPDATE users SET age = :age WHERE id = :id"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="str">':age'</span> =&gt; <span class="num">31</span>, <span class="str">':id'</span> =&gt; <span class="num">1</span>]);
<span class="fn">echo</span> <span class="var">$stmt</span>-&gt;<span class="fn">rowCount</span>() . <span class="str">" row(s) affected"</span>;

<span class="cmt">// ‚îÄ‚îÄ DELETE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"DELETE FROM users WHERE id = :id"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="str">':id'</span> =&gt; <span class="num">2</span>]);

<span class="cmt">// ‚îÄ‚îÄ TRANSACTIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
<span class="kw">try</span> {
    <span class="var">$pdo</span>-&gt;<span class="fn">beginTransaction</span>();
    <span class="cmt">// Multiple queries...</span>
    <span class="var">$pdo</span>-&gt;<span class="fn">commit</span>();
} <span class="kw">catch</span> (<span class="typ">Exception</span> <span class="var">$e</span>) {
    <span class="var">$pdo</span>-&gt;<span class="fn">rollBack</span>();
    <span class="kw">throw</span> <span class="var">$e</span>;
}</pre>
      </div>

      <h3>Displaying Data</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP + HTML</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$users</span> = <span class="var">$pdo</span>-&gt;<span class="fn">query</span>(<span class="str">"SELECT * FROM users ORDER BY name"</span>)-&gt;<span class="fn">fetchAll</span>();
<span class="tag">?&gt;</span>
&lt;table&gt;
    &lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Email&lt;/th&gt;&lt;/tr&gt;
    <span class="tag">&lt;?php</span> <span class="kw">foreach</span> (<span class="var">$users</span> <span class="kw">as</span> <span class="var">$user</span>): <span class="tag">?&gt;</span>
    &lt;tr&gt;
        &lt;td&gt;<span class="tag">&lt;?=</span> <span class="fn">htmlspecialchars</span>(<span class="var">$user</span>[<span class="str">'id'</span>]) <span class="tag">?&gt;</span>&lt;/td&gt;
        &lt;td&gt;<span class="tag">&lt;?=</span> <span class="fn">htmlspecialchars</span>(<span class="var">$user</span>[<span class="str">'name'</span>]) <span class="tag">?&gt;</span>&lt;/td&gt;
        &lt;td&gt;<span class="tag">&lt;?=</span> <span class="fn">htmlspecialchars</span>(<span class="var">$user</span>[<span class="str">'email'</span>]) <span class="tag">?&gt;</span>&lt;/td&gt;
    &lt;/tr&gt;
    <span class="tag">&lt;?php</span> <span class="kw">endforeach</span>; <span class="tag">?&gt;</span>
&lt;/table&gt;</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 12 ¬∑ SESSIONS & COOKIES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch12">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 12</span>
        <h2>Sessions &amp; Cookies</h2>
      </div>

      <h3>Sessions</h3>
      <p>Sessions store data on the <strong>server</strong> and give the client a session ID cookie. Perfect for login state.</p>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">session_start</span>();  <span class="cmt">// Must be called before any output!</span>

<span class="cmt">// Store data</span>
<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>]   = <span class="num">42</span>;
<span class="var">$_SESSION</span>[<span class="str">'username'</span>]  = <span class="str">'alice'</span>;
<span class="var">$_SESSION</span>[<span class="str">'is_admin'</span>]  = <span class="kw">true</span>;

<span class="cmt">// Read data</span>
<span class="kw">if</span> (<span class="fn">isset</span>(<span class="var">$_SESSION</span>[<span class="str">'user_id'</span>])) {
    <span class="fn">echo</span> <span class="str">"Welcome, "</span> . <span class="var">$_SESSION</span>[<span class="str">'username'</span>];
}

<span class="cmt">// Destroy session (logout)</span>
<span class="fn">session_start</span>();
<span class="var">$_SESSION</span> = [];             <span class="cmt">// Clear all data</span>
<span class="fn">session_destroy</span>();           <span class="cmt">// Destroy session file</span>

<span class="cmt">// Regenerate ID to prevent session fixation</span>
<span class="fn">session_regenerate_id</span>(<span class="kw">true</span>); <span class="cmt">// Call after login!</span></pre>
      </div>

      <h3>Cookies</h3>
      <p>Cookies are stored on the <strong>client</strong> browser. Smaller, less secure ‚Äî good for preferences.</p>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Set cookie (before any output)</span>
<span class="fn">setcookie</span>(
    <span class="str">'theme'</span>,                    <span class="cmt">// name</span>
    <span class="str">'dark'</span>,                     <span class="cmt">// value</span>
    <span class="fn">time</span>() + (<span class="num">86400</span> * <span class="num">30</span>),      <span class="cmt">// expire: 30 days</span>
    <span class="str">'/'</span>,                        <span class="cmt">// path</span>
    <span class="str">''</span>,                         <span class="cmt">// domain</span>
    <span class="kw">true</span>,                       <span class="cmt">// secure (HTTPS only)</span>
    <span class="kw">true</span>                        <span class="cmt">// httponly (no JS access)</span>
);

<span class="cmt">// Read cookie</span>
<span class="var">$theme</span> = <span class="var">$_COOKIE</span>[<span class="str">'theme'</span>] ?? <span class="str">'light'</span>;

<span class="cmt">// Delete cookie (set expiry in the past)</span>
<span class="fn">setcookie</span>(<span class="str">'theme'</span>, <span class="str">''</span>, <span class="fn">time</span>() - <span class="num">3600</span>);</pre>
      </div>

      <h3>Simple Login System</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>login.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">session_start</span>();

<span class="kw">function</span> <span class="fn">authenticate</span>(<span class="typ">string</span> <span class="var">$username</span>, <span class="typ">string</span> <span class="var">$password</span>): <span class="typ">bool</span>
{
    <span class="cmt">// In real app: query DB and use password_verify()</span>
    <span class="var">$pdo</span>  = <span class="fn">getConnection</span>();
    <span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE email = ?"</span>);
    <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$username</span> ]);
    <span class="var">$user</span> = <span class="var">$stmt</span>-&gt;<span class="fn">fetch</span>();

    <span class="kw">if</span> (<span class="var">$user</span> &amp;&amp; <span class="fn">password_verify</span>(<span class="var">$password</span>, <span class="var">$user</span>[<span class="str">'password_hash'</span>])) {
        <span class="fn">session_regenerate_id</span>(<span class="kw">true</span>);
        <span class="var">$_SESSION</span>[<span class="str">'user_id'</span>]   = <span class="var">$user</span>[<span class="str">'id'</span>];
        <span class="var">$_SESSION</span>[<span class="str">'username'</span>]  = <span class="var">$user</span>[<span class="str">'name'</span>];
        <span class="kw">return</span> <span class="kw">true</span>;
    }
    <span class="kw">return</span> <span class="kw">false</span>;
}

<span class="cmt">// Store hashed password (never store plaintext!)</span>
<span class="var">$hash</span> = <span class="fn">password_hash</span>(<span class="str">"user_password"</span>, <span class="op">PASSWORD_BCRYPT</span>);</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 13 ¬∑ OOP BASICS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch13">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 13</span>
        <h2>OOP Basics</h2>
      </div>

      <p>Object-Oriented Programming (OOP) organizes code into <strong>classes</strong> ‚Äî blueprints for objects that combine data (properties) and behavior (methods).</p>

      <h3>Classes &amp; Objects</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">Animal</span>
{
    <span class="cmt">// Properties (visibility: public, protected, private)</span>
    <span class="kw">public</span>    <span class="typ">string</span>  <span class="var">$name</span>;
    <span class="kw">protected</span> <span class="typ">string</span>  <span class="var">$sound</span>  = <span class="str">'...'</span>;
    <span class="kw">private</span>   <span class="typ">int</span>     <span class="var">$age</span>;

    <span class="cmt">// Constructor</span>
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="typ">string</span> <span class="var">$name</span>, <span class="typ">int</span> <span class="var">$age</span>)
    {
        <span class="var">$this</span>-&gt;name = <span class="var">$name</span>;
        <span class="var">$this</span>-&gt;age  = <span class="var">$age</span>;
    }

    <span class="cmt">// Method</span>
    <span class="kw">public function</span> <span class="fn">speak</span>(): <span class="typ">string</span>
    {
        <span class="kw">return</span> <span class="str">"{$this->name} says: {$this->sound}"</span>;
    }

    <span class="cmt">// Getter</span>
    <span class="kw">public function</span> <span class="fn">getAge</span>(): <span class="typ">int</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;age; }

    <span class="cmt">// Static method (called on class, not instance)</span>
    <span class="kw">public static function</span> <span class="fn">create</span>(<span class="typ">string</span> <span class="var">$name</span>): <span class="kw">static</span>
    {
        <span class="kw">return</span> <span class="kw">new</span> <span class="kw">static</span>(<span class="var">$name</span>, <span class="num">0</span>);
    }
}

<span class="cmt">// Instantiate</span>
<span class="var">$animal</span> = <span class="kw">new</span> <span class="typ">Animal</span>(<span class="str">"Rex"</span>, <span class="num">3</span>);
<span class="fn">echo</span> <span class="var">$animal</span>-&gt;<span class="fn">speak</span>();     <span class="cmt">// "Rex says: ..."</span>
<span class="fn">echo</span> <span class="var">$animal</span>-&gt;name;        <span class="cmt">// "Rex" (public)</span>
<span class="fn">echo</span> <span class="var">$animal</span>-&gt;<span class="fn">getAge</span>();   <span class="cmt">// 3</span></pre>
      </div>

      <h3>Constructor Property Promotion <span class="badge badge-php8">PHP 8.0+</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Old way:</span>
<span class="kw">class</span> <span class="typ">User</span> {
    <span class="kw">public</span> <span class="typ">string</span> <span class="var">$name</span>;
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="typ">string</span> <span class="var">$name</span>) { <span class="var">$this</span>-&gt;name = <span class="var">$name</span>; }
}

<span class="cmt">// New way (PHP 8.0+) ‚Äî declare + assign in one line!</span>
<span class="kw">class</span> <span class="typ">User</span> {
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public readonly</span> <span class="typ">string</span> <span class="var">$name</span>,   <span class="cmt">// readonly = PHP 8.1</span>
        <span class="kw">public</span>          <span class="typ">int</span>    <span class="var">$age</span>  = <span class="num">0</span>,
        <span class="kw">private</span>         <span class="typ">string</span> <span class="var">$role</span> = <span class="str">'user'</span>,
    ) {}
}
<span class="var">$u</span> = <span class="kw">new</span> <span class="typ">User</span>(<span class="str">"Alice"</span>, <span class="num">30</span>);
<span class="fn">echo</span> <span class="var">$u</span>-&gt;name; <span class="cmt">// "Alice"</span></pre>
      </div>

      <h3>Inheritance</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">Dog</span> <span class="kw">extends</span> <span class="typ">Animal</span>
{
    <span class="kw">protected</span> <span class="typ">string</span> <span class="var">$sound</span> = <span class="str">'Woof!'</span>;
    <span class="kw">public</span>    <span class="typ">string</span> <span class="var">$breed</span>;

    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="typ">string</span> <span class="var">$name</span>, <span class="typ">int</span> <span class="var">$age</span>, <span class="typ">string</span> <span class="var">$breed</span>)
    {
        <span class="kw">parent</span>::<span class="fn">__construct</span>(<span class="var">$name</span>, <span class="var">$age</span>); <span class="cmt">// Call parent constructor</span>
        <span class="var">$this</span>-&gt;breed = <span class="var">$breed</span>;
    }

    <span class="cmt">// Override parent method</span>
    <span class="kw">public function</span> <span class="fn">speak</span>(): <span class="typ">string</span>
    {
        <span class="kw">return</span> <span class="kw">parent</span>::<span class="fn">speak</span>() . <span class="str">" ({$this->breed})"</span>;
    }
}

<span class="var">$dog</span> = <span class="kw">new</span> <span class="typ">Dog</span>(<span class="str">"Buddy"</span>, <span class="num">2</span>, <span class="str">"Labrador"</span>);
<span class="fn">echo</span> <span class="var">$dog</span>-&gt;<span class="fn">speak</span>(); <span class="cmt">// "Buddy says: Woof! (Labrador)"</span>
<span class="fn">echo</span> (<span class="var">$dog</span> <span class="kw">instanceof</span> <span class="typ">Animal</span>) ? <span class="str">"yes"</span> : <span class="str">"no"</span>; <span class="cmt">// "yes"</span></pre>
      </div>

      <h3>Magic Methods</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">MagicDemo</span>
{
    <span class="kw">private</span> <span class="var">$data</span> = [];

    <span class="kw">public function</span> <span class="fn">__set</span>(<span class="var">$key</span>, <span class="var">$val</span>)  { <span class="var">$this</span>-&gt;data[<span class="var">$key</span>] = <span class="var">$val</span>; }
    <span class="kw">public function</span> <span class="fn">__get</span>(<span class="var">$key</span>)        { <span class="kw">return</span> <span class="var">$this</span>-&gt;data[<span class="var">$key</span>] ?? <span class="kw">null</span>; }
    <span class="kw">public function</span> <span class="fn">__isset</span>(<span class="var">$key</span>)      { <span class="kw">return</span> <span class="fn">isset</span>(<span class="var">$this</span>-&gt;data[<span class="var">$key</span>]); }
    <span class="kw">public function</span> <span class="fn">__unset</span>(<span class="var">$key</span>)      { <span class="kw">unset</span>(<span class="var">$this</span>-&gt;data[<span class="var">$key</span>]); }
    <span class="kw">public function</span> <span class="fn">__toString</span>(): <span class="typ">string</span>{ <span class="kw">return</span> <span class="fn">json_encode</span>(<span class="var">$this</span>-&gt;data); }
    <span class="kw">public function</span> <span class="fn">__invoke</span>(<span class="var">$x</span>)       { <span class="fn">echo</span> <span class="str">"Called as function: $x"</span>; }

    <span class="kw">public function</span> <span class="fn">__clone</span>()          { <span class="cmt">/* deep clone logic */</span> }

    <span class="kw">public static function</span> <span class="fn">__callStatic</span>(<span class="var">$name</span>, <span class="var">$args</span>) {
        <span class="fn">echo</span> <span class="str">"Static: $name"</span>;
    }
}</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 14 ¬∑ OOP ADVANCED
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch14">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 14</span>
        <h2>OOP Advanced</h2>
      </div>

      <h3>Interfaces</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">interface</span> <span class="typ">Drawable</span>
{
    <span class="kw">public function</span> <span class="fn">draw</span>(): <span class="typ">string</span>;
    <span class="kw">public function</span> <span class="fn">area</span>(): <span class="typ">float</span>;
}

<span class="kw">interface</span> <span class="typ">Colorable</span>
{
    <span class="kw">public function</span> <span class="fn">setColor</span>(<span class="typ">string</span> <span class="var">$color</span>): <span class="kw">void</span>;
}

<span class="cmt">// A class can implement multiple interfaces</span>
<span class="kw">class</span> <span class="typ">Circle</span> <span class="kw">implements</span> <span class="typ">Drawable</span>, <span class="typ">Colorable</span>
{
    <span class="kw">private</span> <span class="typ">string</span> <span class="var">$color</span> = <span class="str">'black'</span>;

    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private</span> <span class="typ">float</span> <span class="var">$radius</span>) {}

    <span class="kw">public function</span> <span class="fn">draw</span>(): <span class="typ">string</span> { <span class="kw">return</span> <span class="str">"Drawing circle r={$this->radius}"</span>; }
    <span class="kw">public function</span> <span class="fn">area</span>(): <span class="typ">float</span>  { <span class="kw">return</span> <span class="op">M_PI</span> * <span class="var">$this</span>-&gt;radius ** <span class="num">2</span>; }
    <span class="kw">public function</span> <span class="fn">setColor</span>(<span class="typ">string</span> <span class="var">$color</span>): <span class="typ">void</span> { <span class="var">$this</span>-&gt;color = <span class="var">$color</span>; }
}</pre>
      </div>

      <h3>Abstract Classes</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">abstract class</span> <span class="typ">Shape</span>
{
    <span class="cmt">// Abstract method ‚Äî subclasses MUST implement</span>
    <span class="kw">abstract public function</span> <span class="fn">area</span>(): <span class="typ">float</span>;

    <span class="cmt">// Concrete method ‚Äî shared by all subclasses</span>
    <span class="kw">public function</span> <span class="fn">describe</span>(): <span class="typ">string</span>
    {
        <span class="kw">return</span> <span class="fn">get_class</span>(<span class="var">$this</span>) . <span class="str">" has area: "</span> . <span class="fn">round</span>(<span class="var">$this</span>-&gt;<span class="fn">area</span>(), <span class="num">2</span>);
    }
}

<span class="kw">class</span> <span class="typ">Rectangle</span> <span class="kw">extends</span> <span class="typ">Shape</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private</span> <span class="typ">float</span> <span class="var">$w</span>, <span class="kw">private</span> <span class="typ">float</span> <span class="var">$h</span>) {}
    <span class="kw">public function</span> <span class="fn">area</span>(): <span class="typ">float</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;w * <span class="var">$this</span>-&gt;h; }
}</pre>
      </div>

      <h3>Traits</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Traits ‚Äî reusable code blocks, mix into any class</span>
<span class="kw">trait</span> <span class="typ">Timestampable</span>
{
    <span class="kw">private</span> ?\<span class="typ">DateTime</span> <span class="var">$createdAt</span> = <span class="kw">null</span>;
    <span class="kw">private</span> ?\<span class="typ">DateTime</span> <span class="var">$updatedAt</span> = <span class="kw">null</span>;

    <span class="kw">public function</span> <span class="fn">setCreated</span>(): <span class="kw">void</span> { <span class="var">$this</span>-&gt;createdAt = <span class="kw">new</span> \<span class="typ">DateTime</span>(); }
    <span class="kw">public function</span> <span class="fn">getCreated</span>(): ?\<span class="typ">DateTime</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;createdAt; }
}

<span class="kw">trait</span> <span class="typ">SoftDeletable</span>
{
    <span class="kw">private</span> ?<span class="typ">string</span> <span class="var">$deletedAt</span> = <span class="kw">null</span>;
    <span class="kw">public function</span> <span class="fn">softDelete</span>(): <span class="kw">void</span> { <span class="var">$this</span>-&gt;deletedAt = <span class="fn">date</span>(<span class="str">'Y-m-d H:i:s'</span>); }
    <span class="kw">public function</span> <span class="fn">isDeleted</span>(): <span class="typ">bool</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;deletedAt !== <span class="kw">null</span>; }
}

<span class="kw">class</span> <span class="typ">Post</span>
{
    <span class="kw">use</span> <span class="typ">Timestampable</span>, <span class="typ">SoftDeletable</span>; <span class="cmt">// Use multiple traits</span>

    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">public</span> <span class="typ">string</span> <span class="var">$title</span>) {}
}</pre>
      </div>

      <h3>Enums <span class="badge badge-php8">PHP 8.1+</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Pure enum</span>
<span class="kw">enum</span> <span class="typ">Status</span>
{
    <span class="kw">case</span> Pending;
    <span class="kw">case</span> Active;
    <span class="kw">case</span> Inactive;
}

<span class="cmt">// Backed enum (with string/int values)</span>
<span class="kw">enum</span> <span class="typ">Color</span>: <span class="typ">string</span>
{
    <span class="kw">case</span> Red   = <span class="str">'red'</span>;
    <span class="kw">case</span> Green = <span class="str">'green'</span>;
    <span class="kw">case</span> Blue  = <span class="str">'blue'</span>;

    <span class="kw">public function</span> <span class="fn">label</span>(): <span class="typ">string</span>
    {
        <span class="kw">return</span> <span class="fn">ucfirst</span>(<span class="var">$this</span>-&gt;value);
    }
}

<span class="var">$c</span> = <span class="typ">Color</span>::Red;
<span class="fn">echo</span> <span class="var">$c</span>-&gt;value;          <span class="cmt">// "red"</span>
<span class="fn">echo</span> <span class="var">$c</span>-&gt;<span class="fn">label</span>();        <span class="cmt">// "Red"</span>

<span class="var">$fromString</span> = <span class="typ">Color</span>::<span class="fn">from</span>(<span class="str">'green'</span>); <span class="cmt">// Color::Green</span>
<span class="var">$safe</span>       = <span class="typ">Color</span>::<span class="fn">tryFrom</span>(<span class="str">'??'</span>);  <span class="cmt">// null (no exception)</span></pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 15 ¬∑ ERROR HANDLING
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch15">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 15</span>
        <h2>Error Handling</h2>
      </div>

      <h3>Error Types</h3>
      <table>
        <tr><th>Type</th><th>Description</th><th>Fatal?</th></tr>
        <tr><td><code>E_ERROR</code></td><td>Fatal runtime errors</td><td>Yes</td></tr>
        <tr><td><code>E_WARNING</code></td><td>Non-fatal warnings</td><td>No</td></tr>
        <tr><td><code>E_NOTICE</code></td><td>Minor notices (undefined vars)</td><td>No</td></tr>
        <tr><td><code>E_PARSE</code></td><td>Syntax errors</td><td>Yes</td></tr>
        <tr><td><code>E_DEPRECATED</code></td><td>Deprecated feature usage</td><td>No</td></tr>
        <tr><td><code>E_STRICT</code></td><td>Coding standards suggestions</td><td>No</td></tr>
      </table>

      <h3>try / catch / finally</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">try</span> {
    <span class="cmt">// Risky code</span>
    <span class="var">$result</span> = <span class="fn">divide</span>(<span class="num">10</span>, <span class="num">0</span>);
    <span class="fn">echo</span> <span class="var">$result</span>;

} <span class="kw">catch</span> (<span class="typ">InvalidArgumentException</span> <span class="var">$e</span>) {
    <span class="cmt">// Specific exception type first</span>
    <span class="fn">echo</span> <span class="str">"Invalid arg: "</span> . <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>();

} <span class="kw">catch</span> (<span class="typ">RuntimeException</span> | <span class="typ">LogicException</span> <span class="var">$e</span>) {
    <span class="cmt">// Multiple types (PHP 8.0+)</span>
    <span class="fn">echo</span> <span class="str">"Runtime/Logic: "</span> . <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>();

} <span class="kw">catch</span> (<span class="typ">Exception</span> <span class="var">$e</span>) {
    <span class="cmt">// Catch-all</span>
    <span class="fn">echo</span> <span class="str">"Error: "</span> . <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>();
    <span class="fn">echo</span> <span class="str">"File: "</span>  . <span class="var">$e</span>-&gt;<span class="fn">getFile</span>();
    <span class="fn">echo</span> <span class="str">"Line: "</span>  . <span class="var">$e</span>-&gt;<span class="fn">getLine</span>();
    <span class="fn">echo</span> <span class="var">$e</span>-&gt;<span class="fn">getTraceAsString</span>();

} <span class="kw">finally</span> {
    <span class="cmt">// Always runs (cleanup, close connections)</span>
    <span class="fn">echo</span> <span class="str">"Done ‚Äî this always executes."</span>;
}

<span class="cmt">// Throw with context</span>
<span class="kw">function</span> <span class="fn">divide</span>(<span class="typ">float</span> <span class="var">$a</span>, <span class="typ">float</span> <span class="var">$b</span>): <span class="typ">float</span>
{
    <span class="kw">if</span> (<span class="var">$b</span> === <span class="num">0.0</span>) {
        <span class="kw">throw new</span> <span class="typ">InvalidArgumentException</span>(<span class="str">"Division by zero"</span>);
    }
    <span class="kw">return</span> <span class="var">$a</span> / <span class="var">$b</span>;
}</pre>
      </div>

      <h3>Custom Exceptions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">DatabaseException</span> <span class="kw">extends</span> <span class="typ">RuntimeException</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="typ">string</span> <span class="var">$message</span>,
        <span class="kw">private readonly</span> <span class="typ">string</span> <span class="var">$query</span> = <span class="str">''</span>,
        <span class="typ">int</span>    <span class="var">$code</span>    = <span class="num">0</span>,
        ?\<span class="typ">Throwable</span> <span class="var">$previous</span> = <span class="kw">null</span>
    ) {
        <span class="kw">parent</span>::<span class="fn">__construct</span>(<span class="var">$message</span>, <span class="var">$code</span>, <span class="var">$previous</span>);
    }

    <span class="kw">public function</span> <span class="fn">getQuery</span>(): <span class="typ">string</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;query; }
}

<span class="cmt">// Usage</span>
<span class="kw">try</span> {
    <span class="kw">throw new</span> <span class="typ">DatabaseException</span>(<span class="str">"Query failed"</span>, <span class="str">"SELECT * FROM foo"</span>);
} <span class="kw">catch</span> (<span class="typ">DatabaseException</span> <span class="var">$e</span>) {
    <span class="fn">echo</span> <span class="var">$e</span>-&gt;<span class="fn">getMessage</span>() . <span class="str">": "</span> . <span class="var">$e</span>-&gt;<span class="fn">getQuery</span>();
}</pre>
      </div>

      <h3>Error Reporting Configuration</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP / php.ini</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Development ‚Äî show all errors</span>
<span class="fn">error_reporting</span>(<span class="op">E_ALL</span>);
<span class="fn">ini_set</span>(<span class="str">'display_errors'</span>, <span class="str">'1'</span>);

<span class="cmt">// Production ‚Äî log errors, don't display</span>
<span class="fn">error_reporting</span>(<span class="op">E_ALL</span>);
<span class="fn">ini_set</span>(<span class="str">'display_errors'</span>, <span class="str">'0'</span>);
<span class="fn">ini_set</span>(<span class="str">'log_errors'</span>,     <span class="str">'1'</span>);
<span class="fn">ini_set</span>(<span class="str">'error_log'</span>,      <span class="str">'/var/log/php_errors.log'</span>);

<span class="cmt">// Custom error handler</span>
<span class="fn">set_error_handler</span>(<span class="kw">function</span>(<span class="var">$errno</span>, <span class="var">$errstr</span>, <span class="var">$errfile</span>, <span class="var">$errline</span>) {
    <span class="fn">error_log</span>(<span class="str">"[$errno] $errstr in $errfile:$errline"</span>);
    <span class="kw">return</span> <span class="kw">true</span>;
});</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 16 ¬∑ SECURITY
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch16">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 16</span>
        <h2>Security</h2>
      </div>

      <div class="box box-danger">
        <div class="box-title">üî¥ Critical ‚Äî Never Skip This Chapter</div>
        Web security must be built in from the start, not added later. The vulnerabilities here are the most commonly exploited in real-world PHP applications.
      </div>

      <h3>SQL Injection Prevention</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå NEVER do this ‚Äî SQL injection vulnerability!</span>
<span class="var">$id</span>  = <span class="var">$_GET</span>[<span class="str">'id'</span>];
<span class="var">$sql</span> = <span class="str">"SELECT * FROM users WHERE id = $id"</span>; <span class="cmt">// DANGEROUS</span>
<span class="cmt">// Attacker can send: ?id=1 OR 1=1 to dump all users</span>

<span class="cmt">// ‚úÖ Always use prepared statements</span>
<span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE id = :id"</span>);
<span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([<span class="str">':id'</span> =&gt; (int)<span class="var">$_GET</span>[<span class="str">'id'</span>]]);
<span class="cmt">// The :id placeholder is never executed as SQL</span></pre>
      </div>

      <h3>XSS Prevention</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå Dangerous ‚Äî outputs raw user input</span>
<span class="fn">echo</span> <span class="var">$_POST</span>[<span class="str">'comment'</span>];
<span class="cmt">// Attacker sends: &lt;script&gt;document.cookie...&lt;/script&gt;</span>

<span class="cmt">// ‚úÖ Always escape output</span>
<span class="fn">echo</span> <span class="fn">htmlspecialchars</span>(<span class="var">$_POST</span>[<span class="str">'comment'</span>], <span class="op">ENT_QUOTES</span>, <span class="str">'UTF-8'</span>);
<span class="cmt">// Converts &lt; &gt; &amp; " ' to safe HTML entities

// Helper function</span>
<span class="kw">function</span> <span class="fn">e</span>(<span class="typ">string</span> <span class="var">$s</span>): <span class="typ">string</span> {
    <span class="kw">return</span> <span class="fn">htmlspecialchars</span>(<span class="var">$s</span>, <span class="op">ENT_QUOTES</span> | <span class="op">ENT_HTML5</span>, <span class="str">'UTF-8'</span>);
}
<span class="fn">echo</span> <span class="fn">e</span>(<span class="var">$userInput</span>);</pre>
      </div>

      <h3>Password Hashing</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå Never store plain passwords or use MD5/SHA1</span>

<span class="cmt">// ‚úÖ Use PHP's built-in password functions</span>
<span class="var">$password</span>     = <span class="str">"user_secret_123"</span>;
<span class="var">$hash</span>         = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="op">PASSWORD_BCRYPT</span>);
<span class="cmt">// Or use PASSWORD_ARGON2ID (PHP 7.3+) ‚Äî stronger</span>
<span class="var">$argon</span>        = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="op">PASSWORD_ARGON2ID</span>);

<span class="cmt">// Verify password (comparing hashes)</span>
<span class="kw">if</span> (<span class="fn">password_verify</span>(<span class="var">$inputPassword</span>, <span class="var">$storedHash</span>)) {
    <span class="fn">echo</span> <span class="str">"Login successful!"</span>;
}

<span class="cmt">// Check if hash needs rehashing (e.g., cost factor changed)</span>
<span class="kw">if</span> (<span class="fn">password_needs_rehash</span>(<span class="var">$storedHash</span>, <span class="op">PASSWORD_BCRYPT</span>)) {
    <span class="var">$newHash</span> = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="op">PASSWORD_BCRYPT</span>);
    <span class="cmt">// Update DB</span>
}</pre>
      </div>

      <h3>CSRF Protection</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">session_start</span>();

<span class="cmt">// Generate CSRF token</span>
<span class="kw">function</span> <span class="fn">generateCsrfToken</span>(): <span class="typ">string</span>
{
    <span class="kw">if</span> (<span class="fn">empty</span>(<span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>])) {
        <span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>] = <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">32</span>));
    }
    <span class="kw">return</span> <span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>];
}

<span class="cmt">// Include in forms</span>
<span class="cmt">// &lt;input type="hidden" name="csrf" value="&lt;?= generateCsrfToken() ?&gt;"&gt;</span>

<span class="cmt">// Validate on submission</span>
<span class="kw">function</span> <span class="fn">validateCsrf</span>(): <span class="kw">void</span>
{
    <span class="kw">if</span> (!<span class="fn">hash_equals</span>(<span class="var">$_SESSION</span>[<span class="str">'csrf_token'</span>], <span class="var">$_POST</span>[<span class="str">'csrf'</span>] ?? <span class="str">''</span>)) {
        <span class="kw">throw new</span> <span class="typ">RuntimeException</span>(<span class="str">"CSRF token mismatch!"</span>);
    }
}</pre>
      </div>

      <h3>Security Checklist</h3>
      <div class="box box-danger">
        <div class="box-title">üîí Security Checklist</div>
        <ul style="margin:0; list-style: none; padding: 0;">
          <li>‚úÖ Always use prepared statements for database queries</li>
          <li>‚úÖ Escape all output with <code>htmlspecialchars()</code></li>
          <li>‚úÖ Hash passwords with <code>password_hash()</code> (bcrypt/argon2)</li>
          <li>‚úÖ Implement CSRF tokens on all state-changing forms</li>
          <li>‚úÖ Validate and sanitize all user input</li>
          <li>‚úÖ Use HTTPS and set secure cookie flags</li>
          <li>‚úÖ Set <code>httponly</code> and <code>samesite</code> on session cookies</li>
          <li>‚úÖ Never expose sensitive errors in production</li>
          <li>‚úÖ Keep PHP and dependencies updated</li>
          <li>‚úÖ Implement rate limiting on login endpoints</li>
        </ul>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 17 ¬∑ PHP 8.x FEATURES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch17">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 17</span>
        <h2>Modern PHP 8.x Features</h2>
      </div>

      <h3>Named Arguments <span class="badge badge-php8">PHP 8.0</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Skip optional args, name the ones you need</span>
<span class="fn">array_slice</span>(array: [<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>], offset: <span class="num">1</span>, preserve_keys: <span class="kw">true</span>);

<span class="kw">function</span> <span class="fn">createTag</span>(<span class="typ">string</span> <span class="var">$tag</span>, <span class="typ">string</span> <span class="var">$content</span>, <span class="typ">string</span> <span class="var">$class</span> = <span class="str">''</span>): <span class="typ">string</span> {
    <span class="var">$c</span> = <span class="var">$class</span> ? <span class="str">" class=\"$class\""</span> : <span class="str">''</span>;
    <span class="kw">return</span> <span class="str">"&lt;$tag$c&gt;$content&lt;/$tag&gt;"</span>;
}
<span class="fn">echo</span> <span class="fn">createTag</span>(content: <span class="str">"Hello!"</span>, tag: <span class="str">"h1"</span>);</pre>
      </div>

      <h3>Match Expression <span class="badge badge-php8">PHP 8.0</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$status</span> = <span class="num">404</span>;
<span class="var">$text</span> = <span class="kw">match</span>(<span class="var">$status</span>) {
    <span class="num">200</span>, <span class="num">201</span> =&gt; <span class="str">'Success'</span>,
    <span class="num">301</span>, <span class="num">302</span> =&gt; <span class="str">'Redirect'</span>,
    <span class="num">404</span>      =&gt; <span class="str">'Not Found'</span>,
    <span class="num">500</span>      =&gt; <span class="str">'Server Error'</span>,
    <span class="kw">default</span>  =&gt; <span class="str">'Unknown'</span>,
};
<span class="fn">echo</span> <span class="var">$text</span>; <span class="cmt">// "Not Found"</span>

<span class="cmt">// match throws UnhandledMatchError if no arm matches and no default</span></pre>
      </div>

      <h3>Nullsafe Operator <span class="badge badge-php8">PHP 8.0</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Old way ‚Äî verbose null checking</span>
<span class="var">$city</span> = <span class="kw">null</span>;
<span class="kw">if</span> (<span class="var">$user</span> !== <span class="kw">null</span> &amp;&amp; <span class="var">$user</span>-&gt;<span class="fn">getAddress</span>() !== <span class="kw">null</span>) {
    <span class="var">$city</span> = <span class="var">$user</span>-&gt;<span class="fn">getAddress</span>()-&gt;<span class="fn">getCity</span>();
}

<span class="cmt">// New way ‚Äî ?-> short-circuits on null</span>
<span class="var">$city</span> = <span class="var">$user</span>?-&gt;<span class="fn">getAddress</span>()?-&gt;<span class="fn">getCity</span>();
<span class="cmt">// Returns null at any null point ‚Äî no error</span></pre>
      </div>

      <h3>Fibers <span class="badge badge-php8">PHP 8.1</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Fibers ‚Äî lightweight coroutines for cooperative multitasking</span>
<span class="var">$fiber</span> = <span class="kw">new</span> <span class="typ">Fiber</span>(<span class="kw">function</span>(): <span class="kw">void</span> {
    <span class="var">$value</span> = <span class="typ">Fiber</span>::<span class="fn">suspend</span>(<span class="str">"first"</span>);  <span class="cmt">// Pause and yield</span>
    <span class="fn">echo</span> <span class="str">"Got: $value\n"</span>;
    <span class="var">$value</span> = <span class="typ">Fiber</span>::<span class="fn">suspend</span>(<span class="str">"second"</span>);
    <span class="fn">echo</span> <span class="str">"Got: $value\n"</span>;
});

<span class="var">$v1</span> = <span class="var">$fiber</span>-&gt;<span class="fn">start</span>();          <span class="cmt">// "first"</span>
<span class="var">$v2</span> = <span class="var">$fiber</span>-&gt;<span class="fn">resume</span>(<span class="str">"hello"</span>); <span class="cmt">// Got: hello, returns "second"</span>
<span class="var">$fiber</span>-&gt;<span class="fn">resume</span>(<span class="str">"world"</span>);         <span class="cmt">// Got: world</span></pre>
      </div>

      <h3>Readonly Properties <span class="badge badge-php8">PHP 8.1</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">Point</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public readonly</span> <span class="typ">float</span> <span class="var">$x</span>,
        <span class="kw">public readonly</span> <span class="typ">float</span> <span class="var">$y</span>,
    ) {}
}

<span class="var">$p</span>    = <span class="kw">new</span> <span class="typ">Point</span>(<span class="num">1.5</span>, <span class="num">2.7</span>);
<span class="fn">echo</span> <span class="var">$p</span>-&gt;x;       <span class="cmt">// 1.5</span>
<span class="var">$p</span>-&gt;x = <span class="num">3.0</span>;      <span class="cmt">// ‚ùå Error: Cannot modify readonly property</span>

<span class="cmt">// Readonly classes (PHP 8.2) ‚Äî all properties readonly</span>
<span class="kw">readonly class</span> <span class="typ">ImmutablePoint</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public</span> <span class="typ">float</span> <span class="var">$x</span>,
        <span class="kw">public</span> <span class="typ">float</span> <span class="var">$y</span>,
    ) {}
}</pre>
      </div>

      <h3>Intersection Types <span class="badge badge-php8">PHP 8.1</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Intersection ‚Äî value must satisfy ALL types (not union OR)</span>
<span class="kw">function</span> <span class="fn">processEntity</span>(<span class="typ">Countable</span>&amp;<span class="typ">Iterator</span> <span class="var">$entity</span>): <span class="kw">void</span> {
    <span class="fn">echo</span> <span class="fn">count</span>(<span class="var">$entity</span>);
}

<span class="cmt">// Never type ‚Äî function that never returns (PHP 8.1)</span>
<span class="kw">function</span> <span class="fn">redirect</span>(<span class="typ">string</span> <span class="var">$url</span>): <span class="kw">never</span> {
    <span class="fn">header</span>(<span class="str">"Location: $url"</span>);
    <span class="kw">exit</span>();
}</pre>
      </div>

      <h3>Array Unpacking &amp; First-Class Callables <span class="badge badge-php8">PHP 8.1</span></h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// First-class callables (PHP 8.1) ‚Äî turn functions into closures</span>
<span class="var">$strlen</span>   = <span class="fn">strlen</span>(...);
<span class="var">$array_map</span> = <span class="fn">array_map</span>(...);
<span class="fn">echo</span> <span class="var">$strlen</span>(<span class="str">"hello"</span>);  <span class="cmt">// 5</span>

<span class="cmt">// Array unpacking with string keys (PHP 8.1)</span>
<span class="var">$a</span> = [<span class="str">"x"</span> =&gt; <span class="num">1</span>];
<span class="var">$b</span> = [<span class="str">"y"</span> =&gt; <span class="num">2</span>];
<span class="var">$c</span> = [...<span class="var">$a</span>, ...<span class="var">$b</span>];  <span class="cmt">// ["x"=>1, "y"=>2]</span>

<span class="cmt">// Disjunctive Normal Form types (PHP 8.2)</span>
<span class="kw">function</span> <span class="fn">process</span>((<span class="typ">A</span>&amp;<span class="typ">B</span>)|<span class="typ">C</span> <span class="var">$input</span>): <span class="kw">void</span> {}

<span class="cmt">// PHP 8.3 ‚Äî Typed class constants</span>
<span class="kw">class</span> <span class="typ">Config</span> {
    <span class="kw">const</span> <span class="typ">string</span> VERSION = <span class="str">'1.0'</span>;
    <span class="kw">const</span> <span class="typ">int</span>    MAX     = <span class="num">100</span>;
}

<span class="cmt">// PHP 8.4 ‚Äî Property hooks (getter/setter syntax)</span>
<span class="kw">class</span> <span class="typ">User</span> {
    <span class="kw">public</span> <span class="typ">string</span> <span class="var">$fullName</span> {
        <span class="kw">get</span> =&gt; <span class="str">"{$this->firstName} {$this->lastName}"</span>;
        <span class="kw">set</span> (<span class="typ">string</span> <span class="var">$value</span>) {
            [<span class="var">$this</span>-&gt;firstName, <span class="var">$this</span>-&gt;lastName] = <span class="fn">explode</span>(<span class="str">' '</span>, <span class="var">$value</span>, <span class="num">2</span>);
        }
    }
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">public</span> <span class="typ">string</span> <span class="var">$firstName</span>, <span class="kw">public</span> <span class="typ">string</span> <span class="var">$lastName</span>) {}
}</pre>
      </div>

      <table>
        <tr><th>Version</th><th>Key Features</th></tr>
        <tr><td><strong>PHP 8.0</strong></td><td>Named args, match, nullsafe ?->, union types, JIT compiler</td></tr>
        <tr><td><strong>PHP 8.1</strong></td><td>Enums, fibers, readonly, intersection types, first-class callables, never</td></tr>
        <tr><td><strong>PHP 8.2</strong></td><td>Readonly classes, DNF types, <code>true/false/null</code> types, <code>mysqli_execute_query</code></td></tr>
        <tr><td><strong>PHP 8.3</strong></td><td>Typed class constants, <code>json_validate()</code>, randomizer additions, override attribute</td></tr>
        <tr><td><strong>PHP 8.4</strong></td><td>Property hooks, asymmetric visibility, <code>array_find()</code>, <code>#[\Deprecated]</code> attribute</td></tr>
      </table>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 18 ¬∑ BEST PRACTICES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch18">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 18</span>
        <h2>Best Practices &amp; Next Steps</h2>
      </div>

      <h3>Code Organization</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// 1. Always declare strict types</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);

<span class="cmt">// 2. Use namespaces</span>
<span class="kw">namespace</span> <span class="typ">App\Services</span>;

<span class="kw">use</span> <span class="typ">App\Models\User</span>;
<span class="kw">use</span> <span class="typ">App\Repositories\UserRepository</span>;
<span class="kw">use</span> <span class="typ">InvalidArgumentException</span>;

<span class="cmt">// 3. Follow PSR standards:
// PSR-1: Basic coding standard (class names, method names)
// PSR-4: Autoloading (namespaces ‚Üí directories)
// PSR-12: Code style (indentation, braces, etc.)

// 4. Use Composer for dependencies</span></pre>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>composer.json</div>
        <pre>{
    <span class="str">"require"</span>: {
        <span class="str">"php"</span>: <span class="str">"^8.2"</span>,
        <span class="str">"ext-pdo"</span>: <span class="str">"*"</span>
    },
    <span class="str">"require-dev"</span>: {
        <span class="str">"phpunit/phpunit"</span>: <span class="str">"^11"</span>,
        <span class="str">"squizlabs/php_codesniffer"</span>: <span class="str">"^3"</span>
    },
    <span class="str">"autoload"</span>: {
        <span class="str">"psr-4"</span>: { <span class="str">"App\\"</span>: <span class="str">"src/"</span> }
    }
}</pre>
      </div>

      <h3>Design Patterns</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Repository Pattern</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">interface</span> <span class="typ">UserRepositoryInterface</span>
{
    <span class="kw">public function</span> <span class="fn">find</span>(<span class="typ">int</span> <span class="var">$id</span>): ?<span class="typ">User</span>;
    <span class="kw">public function</span> <span class="fn">save</span>(<span class="typ">User</span> <span class="var">$user</span>): <span class="kw">void</span>;
    <span class="kw">public function</span> <span class="fn">delete</span>(<span class="typ">int</span> <span class="var">$id</span>): <span class="kw">void</span>;
}

<span class="kw">class</span> <span class="typ">PdoUserRepository</span> <span class="kw">implements</span> <span class="typ">UserRepositoryInterface</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private readonly</span> <span class="typ">PDO</span> <span class="var">$pdo</span>) {}

    <span class="kw">public function</span> <span class="fn">find</span>(<span class="typ">int</span> <span class="var">$id</span>): ?<span class="typ">User</span>
    {
        <span class="var">$stmt</span> = <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT * FROM users WHERE id = ?"</span>);
        <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$id</span> ]);
        <span class="var">$row</span>  = <span class="var">$stmt</span>-&gt;<span class="fn">fetch</span>();
        <span class="kw">return</span> <span class="var">$row</span> ? <span class="typ">User</span>::<span class="fn">fromArray</span>(<span class="var">$row</span>) : <span class="kw">null</span>;
    }
    <span class="cmt">// ... save, delete</span>
}</pre>
      </div>

      <h3>Testing with PHPUnit</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî PHPUnit Test</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">use</span> <span class="typ">PHPUnit\Framework\TestCase</span>;

<span class="kw">class</span> <span class="typ">CalculatorTest</span> <span class="kw">extends</span> <span class="typ">TestCase</span>
{
    <span class="kw">private</span> <span class="typ">Calculator</span> <span class="var">$calc</span>;

    <span class="kw">protected function</span> <span class="fn">setUp</span>(): <span class="kw">void</span>
    {
        <span class="var">$this</span>-&gt;calc = <span class="kw">new</span> <span class="typ">Calculator</span>();
    }

    <span class="kw">public function</span> <span class="fn">testAdd</span>(): <span class="kw">void</span>
    {
        <span class="var">$this</span>-&gt;<span class="fn">assertSame</span>(<span class="num">5</span>, <span class="var">$this</span>-&gt;calc-&gt;<span class="fn">add</span>(<span class="num">2</span>, <span class="num">3</span>));
        <span class="var">$this</span>-&gt;<span class="fn">assertSame</span>(<span class="num">0</span>, <span class="var">$this</span>-&gt;calc-&gt;<span class="fn">add</span>(-<span class="num">1</span>, <span class="num">1</span>));
    }

    <span class="kw">public function</span> <span class="fn">testDivideByZeroThrows</span>(): <span class="kw">void</span>
    {
        <span class="var">$this</span>-&gt;<span class="fn">expectException</span>(<span class="typ">InvalidArgumentException</span>::class);
        <span class="var">$this</span>-&gt;calc-&gt;<span class="fn">divide</span>(<span class="num">10</span>, <span class="num">0</span>);
    }
}

<span class="cmt">// Run: vendor/bin/phpunit tests/</span></pre>
      </div>

      <h3>Recommended PHP Ecosystem</h3>
      <div class="cards">
        <div class="card">
          <div class="card-icon">üèóÔ∏è</div>
          <div class="card-title">Laravel</div>
          <p>Full-stack framework. Eloquent ORM, Blade templates, artisan CLI.</p>
        </div>
        <div class="card">
          <div class="card-icon">‚ö°</div>
          <div class="card-title">Symfony</div>
          <p>Component-based. Powers many frameworks. Great for APIs.</p>
        </div>
        <div class="card">
          <div class="card-icon">üì¶</div>
          <div class="card-title">Composer</div>
          <p>Package manager. <code>composer.json</code> for dependencies.</p>
        </div>
        <div class="card">
          <div class="card-icon">üß™</div>
          <div class="card-title">PHPUnit</div>
          <p>Testing framework. Unit, integration, and browser tests.</p>
        </div>
        <div class="card">
          <div class="card-icon">üîç</div>
          <div class="card-title">PHPStan / Psalm</div>
          <p>Static analysis tools. Catch bugs before runtime.</p>
        </div>
        <div class="card">
          <div class="card-icon">‚ú®</div>
          <div class="card-title">PHP-CS-Fixer</div>
          <p>Auto-format code to PSR-12 standard.</p>
        </div>
      </div>

      <h3>Project Folder Structure</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>File Structure</div>
        <pre>my-project/
‚îú‚îÄ‚îÄ public/              <span class="cmt"># Web root (only this is public)</span>
‚îÇ   ‚îú‚îÄ‚îÄ index.php        <span class="cmt"># Entry point</span>
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îú‚îÄ‚îÄ src/                 <span class="cmt"># Application code</span>
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ Repositories/
‚îÇ   ‚îî‚îÄ‚îÄ Views/
‚îú‚îÄ‚îÄ tests/               <span class="cmt"># PHPUnit tests</span>
‚îú‚îÄ‚îÄ config/              <span class="cmt"># Configuration files</span>
‚îú‚îÄ‚îÄ vendor/              <span class="cmt"># Composer dependencies</span>
‚îú‚îÄ‚îÄ storage/             <span class="cmt"># Logs, uploads, cache</span>
‚îú‚îÄ‚îÄ composer.json
‚îî‚îÄ‚îÄ .env                 <span class="cmt"># Environment variables (never commit!)</span></pre>
      </div>

      <h3>Environment Variables</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>.env</div>
        <pre>APP_ENV=development
APP_DEBUG=true
DB_HOST=localhost
DB_DATABASE=myapp
DB_USERNAME=root
DB_PASSWORD=secret
APP_SECRET=your-secret-key-here</pre>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Reading .env</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Use vlucas/phpdotenv package</span>
<span class="kw">use</span> <span class="typ">Dotenv\Dotenv</span>;

<span class="var">$dotenv</span> = <span class="typ">Dotenv</span>::<span class="fn">createImmutable</span>(<span class="fn">__DIR__</span>);
<span class="var">$dotenv</span>-&gt;<span class="fn">load</span>();

<span class="var">$dbHost</span> = <span class="var">$_ENV</span>[<span class="str">'DB_HOST'</span>];  <span class="cmt">// 'localhost'</span>
<span class="var">$debug</span>  = <span class="var">$_ENV</span>[<span class="str">'APP_DEBUG'</span>]; <span class="cmt">// 'true'</span></pre>
      </div>

      <div class="divider"></div>

      <div class="box box-tip">
        <div class="box-title">üéì What to Learn Next</div>
        <strong>1. Laravel</strong> ‚Äî The most popular PHP framework. Start with the official docs at laravel.com.<br><br>
        <strong>2. Composer</strong> ‚Äî Learn to manage packages and autoloading.<br><br>
        <strong>3. REST APIs</strong> ‚Äî Build JSON APIs with PHP, return proper HTTP status codes.<br><br>
        <strong>4. Testing</strong> ‚Äî Write PHPUnit tests for all your functions and classes.<br><br>
        <strong>5. Docker</strong> ‚Äî Containerize your PHP apps for consistent environments.<br><br>
        <strong>6. Git</strong> ‚Äî Version control is essential for every developer.
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Final Project: Build a Simple Blog</div>
        <p>Apply everything you've learned:</p>
        <ol>
          <li>Create a MySQL database with <code>posts</code> and <code>users</code> tables.</li>
          <li>Build a registration and login system with sessions.</li>
          <li>Allow logged-in users to create, edit, and delete blog posts.</li>
          <li>Display all posts on the homepage with pagination.</li>
          <li>Add input validation, XSS prevention, CSRF tokens, and prepared statements.</li>
          <li>Use OOP with a <code>Post</code> model and <code>PostRepository</code>.</li>
          <li>Organize code using namespaces and Composer autoloading.</li>
        </ol>
      </div>

    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 19 ¬∑ SUPERGLOBALS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch19">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 19</span>
        <h2>Superglobals</h2>
      </div>

      <p>Superglobals are built-in variables that are always accessible in any scope ‚Äî inside functions, classes, or global code ‚Äî without using the <code>global</code> keyword.</p>

      <table>
        <tr><th>Superglobal</th><th>Purpose</th></tr>
        <tr><td><code>$_GET</code></td><td>URL query string parameters</td></tr>
        <tr><td><code>$_POST</code></td><td>HTTP POST form data</td></tr>
        <tr><td><code>$_REQUEST</code></td><td>Combines GET + POST + COOKIE (avoid in prod)</td></tr>
        <tr><td><code>$_FILES</code></td><td>Uploaded file data</td></tr>
        <tr><td><code>$_SESSION</code></td><td>Server-side session data</td></tr>
        <tr><td><code>$_COOKIE</code></td><td>Client-side cookies</td></tr>
        <tr><td><code>$_SERVER</code></td><td>Server &amp; execution environment info</td></tr>
        <tr><td><code>$_ENV</code></td><td>Environment variables</td></tr>
        <tr><td><code>$GLOBALS</code></td><td>All global variables</td></tr>
      </table>

      <h3>$_SERVER</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Common $_SERVER keys</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'PHP_SELF'</span>];         <span class="cmt">// /index.php</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>];   <span class="cmt">// GET or POST</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'HTTP_HOST'</span>];        <span class="cmt">// localhost or domain.com</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'REMOTE_ADDR'</span>];      <span class="cmt">// Visitor's IP address</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'HTTP_USER_AGENT'</span>];  <span class="cmt">// Browser/client info</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'QUERY_STRING'</span>];     <span class="cmt">// ?key=value part of URL</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'SERVER_NAME'</span>];      <span class="cmt">// Server hostname</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'SCRIPT_FILENAME'</span>];  <span class="cmt">// Absolute path to script</span>
<span class="fn">echo</span> <span class="var">$_SERVER</span>[<span class="str">'HTTPS'</span>] ?? <span class="str">''</span>;      <span class="cmt">// 'on' if HTTPS</span>

<span class="cmt">// Build current URL safely</span>
<span class="var">$protocol</span> = (!<span class="fn">empty</span>(<span class="var">$_SERVER</span>[<span class="str">'HTTPS'</span>]) &amp;&amp; <span class="var">$_SERVER</span>[<span class="str">'HTTPS'</span>] !== <span class="str">'off'</span>)
    ? <span class="str">'https'</span> : <span class="str">'http'</span>;
<span class="var">$currentUrl</span> = <span class="var">$protocol</span> . <span class="str">'://'</span> . <span class="var">$_SERVER</span>[<span class="str">'HTTP_HOST'</span>] . <span class="var">$_SERVER</span>[<span class="str">'REQUEST_URI'</span>];</pre>
      </div>

      <h3>$_GET and $_POST</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// URL: /search?q=php&page=2</span>
<span class="var">$query</span> = <span class="fn">htmlspecialchars</span>(<span class="var">$_GET</span>[<span class="str">'q'</span>]    ?? <span class="str">''</span>);
<span class="var">$page</span>  = <span class="fn">max</span>(<span class="num">1</span>, (int)(<span class="var">$_GET</span>[<span class="str">'page'</span>]  ?? <span class="num">1</span>));

<span class="cmt">// POST ‚Äî from a form submission</span>
<span class="kw">if</span> (<span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>] === <span class="str">'POST'</span>) {
    <span class="var">$username</span> = <span class="fn">trim</span>(<span class="var">$_POST</span>[<span class="str">'username'</span>] ?? <span class="str">''</span>);
    <span class="var">$password</span> = <span class="var">$_POST</span>[<span class="str">'password'</span>] ?? <span class="str">''</span>;

    <span class="cmt">// Never echo raw POST data ‚Äî always sanitize first!</span>
    <span class="fn">echo</span> <span class="fn">htmlspecialchars</span>(<span class="var">$username</span>);
}

<span class="cmt">// Check if key exists safely</span>
<span class="kw">if</span> (<span class="fn">isset</span>(<span class="var">$_POST</span>[<span class="str">'submit'</span>])) { <span class="cmt">/* form was submitted */</span> }
<span class="kw">if</span> (<span class="fn">array_key_exists</span>(<span class="str">'email'</span>, <span class="var">$_POST</span>)) { <span class="cmt">/* email field exists */</span> }</pre>
      </div>

      <h3>$_FILES</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// $_FILES structure for &lt;input type="file" name="avatar"&gt;</span>
<span class="fn">print_r</span>(<span class="var">$_FILES</span>[<span class="str">'avatar'</span>]);
<span class="cmt">/*
Array (
    [name]     => photo.jpg        // Original filename
    [type]     => image/jpeg       // MIME type (user-supplied, verify separately)
    [tmp_name] => /tmp/phpXYZ123   // Temp server path
    [error]    => 0                // 0 = UPLOAD_ERR_OK
    [size]     => 204800           // Bytes
)
*/</span>

<span class="cmt">// Error codes</span>
<span class="kw">$errors</span> = [
    <span class="op">UPLOAD_ERR_OK</span>        =&gt; <span class="str">'No error'</span>,
    <span class="op">UPLOAD_ERR_INI_SIZE</span>  =&gt; <span class="str">'File exceeds upload_max_filesize'</span>,
    <span class="op">UPLOAD_ERR_FORM_SIZE</span> =&gt; <span class="str">'File exceeds MAX_FILE_SIZE'</span>,
    <span class="op">UPLOAD_ERR_PARTIAL</span>   =&gt; <span class="str">'Partial upload'</span>,
    <span class="op">UPLOAD_ERR_NO_FILE</span>   =&gt; <span class="str">'No file uploaded'</span>,
];

<span class="cmt">// Always verify MIME type via finfo, not $_FILES['type']</span>
<span class="var">$finfo</span>    = <span class="kw">new</span> <span class="typ">finfo</span>(<span class="op">FILEINFO_MIME_TYPE</span>);
<span class="var">$mimeType</span> = <span class="var">$finfo</span>-&gt;<span class="fn">file</span>(<span class="var">$_FILES</span>[<span class="str">'avatar'</span>][<span class="str">'tmp_name'</span>]);</pre>
      </div>

      <h3>$GLOBALS</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$appName</span> = <span class="str">"MyApp"</span>;
<span class="var">$version</span> = <span class="str">"2.0"</span>;

<span class="kw">function</span> <span class="fn">getAppInfo</span>(): <span class="typ">string</span> {
    <span class="cmt">// $GLOBALS holds a reference to ALL global variables</span>
    <span class="kw">return</span> <span class="var">$GLOBALS</span>[<span class="str">'appName'</span>] . <span class="str">' v'</span> . <span class="var">$GLOBALS</span>[<span class="str">'version'</span>];
}
<span class="fn">echo</span> <span class="fn">getAppInfo</span>(); <span class="cmt">// "MyApp v2.0"</span>
<span class="cmt">// Prefer dependency injection over $GLOBALS in modern code</span></pre>
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Exercise 4</div>
        <ol>
          <li>Create a page that displays the visitor's IP, browser, and current URL using <code>$_SERVER</code>.</li>
          <li>Build a search form that reads <code>$_GET['q']</code> and displays sanitized results.</li>
          <li>Use <code>$_SERVER['REQUEST_METHOD']</code> to detect if a form was submitted.</li>
        </ol>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 20 ¬∑ NAMESPACES & AUTOLOADING
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch20">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 20</span>
        <h2>Namespaces &amp; Autoloading</h2>
      </div>

      <p>Namespaces prevent name collisions between your code and third-party libraries. Autoloading automatically loads class files so you don't need hundreds of <code>require</code> statements.</p>

      <h3>Declaring Namespaces</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>src/Models/User.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Namespace must be the VERY first statement</span>
<span class="kw">namespace</span> <span class="typ">App\Models</span>;

<span class="kw">class</span> <span class="typ">User</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public readonly</span> <span class="typ">string</span> <span class="var">$name</span>,
        <span class="kw">public readonly</span> <span class="typ">string</span> <span class="var">$email</span>,
    ) {}
}

<span class="cmt">// Sub-namespacing</span>
<span class="kw">namespace</span> <span class="typ">App\Models\Admin</span>;
<span class="kw">class</span> <span class="typ">AdminUser</span> {}  <span class="cmt">// App\Models\Admin\AdminUser</span></pre>
      </div>

      <h3>Using Namespaces</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>src/Controllers/UserController.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">namespace</span> <span class="typ">App\Controllers</span>;

<span class="cmt">// Import specific class</span>
<span class="kw">use</span> <span class="typ">App\Models\User</span>;
<span class="kw">use</span> <span class="typ">App\Services\UserService</span>;
<span class="kw">use</span> <span class="typ">App\Repositories\UserRepository</span> <span class="kw">as</span> <span class="typ">UserRepo</span>;   <span class="cmt">// alias</span>
<span class="kw">use</span> <span class="typ">InvalidArgumentException</span>;                       <span class="cmt">// global class</span>

<span class="cmt">// Import multiple from same namespace</span>
<span class="kw">use</span> <span class="typ">App\Models</span>\{<span class="typ">User</span>, <span class="typ">Post</span>, <span class="typ">Comment</span>};

<span class="kw">class</span> <span class="typ">UserController</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private readonly</span> <span class="typ">UserService</span> <span class="var">$service</span>) {}

    <span class="kw">public function</span> <span class="fn">show</span>(<span class="typ">int</span> <span class="var">$id</span>): <span class="typ">User</span>
    {
        <span class="var">$user</span> = <span class="var">$this</span>-&gt;service-&gt;<span class="fn">find</span>(<span class="var">$id</span>);
        <span class="kw">if</span> (!<span class="var">$user</span>) {
            <span class="kw">throw new</span> <span class="typ">InvalidArgumentException</span>(<span class="str">"User $id not found"</span>);
        }
        <span class="kw">return</span> <span class="var">$user</span>;
    }
}

<span class="cmt">// Fully-qualified name (no use statement needed)</span>
<span class="var">$dt</span> = <span class="kw">new</span> \<span class="typ">DateTime</span>();  <span class="cmt">// leading \ = global namespace</span></pre>
      </div>

      <h3>PSR-4 Autoloading</h3>
      <p>PSR-4 maps namespace prefixes to directory paths. With Composer, just declare the mapping and classes load automatically.</p>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>composer.json</div>
        <pre>{
    <span class="str">"autoload"</span>: {
        <span class="str">"psr-4"</span>: {
            <span class="str">"App\\"</span>: <span class="str">"src/"</span>
        }
    },
    <span class="str">"autoload-dev"</span>: {
        <span class="str">"psr-4"</span>: {
            <span class="str">"Tests\\"</span>: <span class="str">"tests/"</span>
        }
    }
}</pre>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>File structure mapping</div>
        <pre>Namespace                    ‚Üí  File Path
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
App\Models\User              ‚Üí  src/Models/User.php
App\Controllers\UserCtrl     ‚Üí  src/Controllers/UserCtrl.php
App\Services\Auth\JwtService ‚Üí  src/Services/Auth/JwtService.php</pre>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>public/index.php</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Include Composer's autoloader ‚Äî one line does it all!</span>
<span class="kw">require_once</span> <span class="fn">__DIR__</span> . <span class="str">'/../vendor/autoload.php'</span>;

<span class="cmt">// Now any class is available automatically</span>
<span class="var">$user</span> = <span class="kw">new</span> <span class="typ">App\Models\User</span>(<span class="str">"Alice"</span>, <span class="str">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="77161b1e141237120f5914181a">[email&#160;protected]</a>"</span>);
<span class="cmt">// PHP auto-loads src/Models/User.php on first use</span></pre>
      </div>

      <h3>Manual spl_autoload_register</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Custom Autoloader</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Without Composer ‚Äî roll your own PSR-4 autoloader</span>
<span class="fn">spl_autoload_register</span>(<span class="kw">function</span> (<span class="typ">string</span> <span class="var">$class</span>): <span class="kw">void</span> {
    <span class="var">$prefix</span> = <span class="str">'App\\'</span>;
    <span class="var">$base</span>   = <span class="fn">__DIR__</span> . <span class="str">'/src/'</span>;

    <span class="kw">if</span> (!<span class="fn">str_starts_with</span>(<span class="var">$class</span>, <span class="var">$prefix</span>)) {
        <span class="kw">return</span>; <span class="cmt">// Not our namespace</span>
    }

    <span class="var">$relative</span> = <span class="fn">substr</span>(<span class="var">$class</span>, <span class="fn">strlen</span>(<span class="var">$prefix</span>));
    <span class="var">$file</span>     = <span class="var">$base</span> . <span class="fn">str_replace</span>(<span class="str">'\\'</span>, <span class="str">'/'</span>, <span class="var">$relative</span>) . <span class="str">'.php'</span>;

    <span class="kw">if</span> (<span class="fn">file_exists</span>(<span class="var">$file</span>)) {
        <span class="kw">require</span> <span class="var">$file</span>;
    }
});</pre>
      </div>

      <div class="box box-tip">
        <div class="box-title">üí° Tip</div>
        Always use <strong>Composer</strong> for autoloading in real projects. Manual autoloaders are only useful for learning or zero-dependency scripts. Run <code>composer dump-autoload</code> after adding new classes.
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 21 ¬∑ COMPOSER
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch21">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 21</span>
        <h2>Composer</h2>
      </div>

      <p>Composer is PHP's dependency manager. It handles downloading, updating, and autoloading third-party packages from <strong>Packagist.org</strong>.</p>

      <h3>Installation &amp; Basic Commands</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Terminal</div>
        <pre><span class="cmt"># Install Composer globally (see getcomposer.org)</span>
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
php composer-setup.php --install-dir=/usr/local/bin --filename=composer

<span class="cmt"># Initialize a new project</span>
composer init

<span class="cmt"># Add a dependency</span>
composer require vlucas/phpdotenv     <span class="cmt"># production dependency</span>
composer require --dev phpunit/phpunit <span class="cmt"># dev-only dependency</span>

<span class="cmt"># Install all dependencies from composer.json</span>
composer install

<span class="cmt"># Update all packages to latest allowed versions</span>
composer update

<span class="cmt"># Update a single package</span>
composer update guzzlehttp/guzzle

<span class="cmt"># Remove a package</span>
composer remove vlucas/phpdotenv

<span class="cmt"># Regenerate autoloader</span>
composer dump-autoload
composer dump-autoload --optimize  <span class="cmt"># faster classmap for production

# Show installed packages</span>
composer show
composer show guzzlehttp/guzzle     <span class="cmt"># show single package info</span></pre>
      </div>

      <h3>composer.json Anatomy</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>composer.json</div>
        <pre>{
    <span class="str">"name"</span>: <span class="str">"yourname/myapp"</span>,
    <span class="str">"description"</span>: <span class="str">"My PHP application"</span>,
    <span class="str">"type"</span>: <span class="str">"project"</span>,
    <span class="str">"license"</span>: <span class="str">"MIT"</span>,
    <span class="str">"require"</span>: {
        <span class="str">"php"</span>: <span class="str">"^8.2"</span>,
        <span class="str">"ext-pdo"</span>: <span class="str">"*"</span>,
        <span class="str">"vlucas/phpdotenv"</span>: <span class="str">"^5.0"</span>,
        <span class="str">"guzzlehttp/guzzle"</span>: <span class="str">"^7.0"</span>,
        <span class="str">"ramsey/uuid"</span>: <span class="str">"^4.0"</span>
    },
    <span class="str">"require-dev"</span>: {
        <span class="str">"phpunit/phpunit"</span>: <span class="str">"^11.0"</span>,
        <span class="str">"squizlabs/php_codesniffer"</span>: <span class="str">"^3.0"</span>,
        <span class="str">"phpstan/phpstan"</span>: <span class="str">"^1.0"</span>
    },
    <span class="str">"autoload"</span>: {
        <span class="str">"psr-4"</span>: { <span class="str">"App\\"</span>: <span class="str">"src/"</span> }
    },
    <span class="str">"autoload-dev"</span>: {
        <span class="str">"psr-4"</span>: { <span class="str">"Tests\\"</span>: <span class="str">"tests/"</span> }
    },
    <span class="str">"scripts"</span>: {
        <span class="str">"test"</span>: <span class="str">"phpunit"</span>,
        <span class="str">"lint"</span>: <span class="str">"phpcs --standard=PSR12 src/"</span>,
        <span class="str">"analyse"</span>: <span class="str">"phpstan analyse src --level=8"</span>
    },
    <span class="str">"config"</span>: {
        <span class="str">"preferred-install"</span>: <span class="str">"dist"</span>,
        <span class="str">"optimize-autoloader"</span>: <span class="kw">true</span>
    }
}</pre>
      </div>

      <h3>Version Constraints</h3>
      <table>
        <tr><th>Constraint</th><th>Meaning</th><th>Example</th></tr>
        <tr><td><code>^1.2.3</code></td><td>Compatible (‚â•1.2.3 &lt;2.0)</td><td><code>"^8.0"</code></td></tr>
        <tr><td><code>~1.2.3</code></td><td>Approximately (‚â•1.2.3 &lt;1.3)</td><td><code>"~7.4"</code></td></tr>
        <tr><td><code>&gt;=1.0</code></td><td>Any version ‚â• 1.0</td><td><code>"&gt;=5.0"</code></td></tr>
        <tr><td><code>1.0.*</code></td><td>Wildcard ‚Äî any patch</td><td><code>"1.0.*"</code></td></tr>
        <tr><td><code>*</code></td><td>Any version</td><td><code>"ext-pdo": "*"</code></td></tr>
      </table>

      <h3>Using Installed Packages</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Using Guzzle HTTP Client</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">require_once</span> <span class="str">'vendor/autoload.php'</span>;

<span class="kw">use</span> <span class="typ">GuzzleHttp\Client</span>;

<span class="var">$client</span>   = <span class="kw">new</span> <span class="typ">Client</span>([<span class="str">'base_uri'</span> =&gt; <span class="str">'https://api.example.com'</span>]);
<span class="var">$response</span> = <span class="var">$client</span>-&gt;<span class="fn">get</span>(<span class="str">'/users'</span>);
<span class="var">$data</span>     = <span class="fn">json_decode</span>(<span class="var">$response</span>-&gt;<span class="fn">getBody</span>(), <span class="kw">true</span>);

<span class="kw">foreach</span> (<span class="var">$data</span>[<span class="str">'users'</span>] <span class="kw">as</span> <span class="var">$user</span>) {
    <span class="fn">echo</span> <span class="var">$user</span>[<span class="str">'name'</span>] . <span class="str">"\n"</span>;
}</pre>
      </div>

      <div class="box box-warn">
        <div class="box-title">‚ö†Ô∏è Git Rule</div>
        Always <strong>commit</strong> <code>composer.json</code> and <code>composer.lock</code>, but <strong>never commit</strong> the <code>vendor/</code> directory. Add <code>vendor/</code> to <code>.gitignore</code>.
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 22 ¬∑ PHP ATTRIBUTES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch22">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 22</span>
        <h2>PHP Attributes <span class="badge badge-php8">PHP 8.0+</span></h2>
      </div>

      <p>Attributes (also called <em>annotations</em> in other languages) are structured metadata you can add to classes, methods, properties, and parameters. They replace docblock annotations and are readable via <strong>Reflection API</strong> at runtime.</p>

      <h3>Built-in Attributes</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// #[Attribute] marks a class as usable as an attribute
// #[Override] ‚Äî PHP 8.3 ‚Äî warns if method doesn't override parent
// #[\Deprecated] ‚Äî PHP 8.4 ‚Äî marks something as deprecated</span>

<span class="kw">class</span> <span class="typ">Base</span> {
    <span class="kw">public function</span> <span class="fn">hello</span>(): <span class="typ">void</span> {}
}
<span class="kw">class</span> <span class="typ">Child</span> <span class="kw">extends</span> <span class="typ">Base</span> {
    <span class="op">#[\Override]</span>         <span class="cmt">// PHP 8.3 ‚Äî Error if 'hello' doesn't exist in Base</span>
    <span class="kw">public function</span> <span class="fn">hello</span>(): <span class="typ">void</span> { <span class="fn">echo</span> <span class="str">"Hi!"</span>; }
}

<span class="cmt">// #[SensitiveParameter] ‚Äî PHP 8.2 ‚Äî hides param in stack traces</span>
<span class="kw">function</span> <span class="fn">login</span>(<span class="typ">string</span> <span class="var">$user</span>, <span class="op">#[\SensitiveParameter]</span> <span class="typ">string</span> <span class="var">$pass</span>): <span class="kw">void</span> {
    <span class="cmt">// $pass won't appear in error logs</span>
}

<span class="cmt">// #[\Deprecated] ‚Äî PHP 8.4</span>
<span class="op">#[\Deprecated(<span class="str">'Use newMethod() instead'</span>, since: <span class="str">'2.0'</span>)]</span>
<span class="kw">function</span> <span class="fn">oldMethod</span>(): <span class="kw">void</span> {}</pre>
      </div>

      <h3>Creating Custom Attributes</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Custom Attribute</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// 1. Define the attribute class</span>
<span class="op">#[Attribute(Attribute::TARGET_METHOD)]</span>
<span class="kw">class</span> <span class="typ">Route</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(
        <span class="kw">public readonly</span> <span class="typ">string</span> <span class="var">$path</span>,
        <span class="kw">public readonly</span> <span class="typ">string</span> <span class="var">$method</span> = <span class="str">'GET'</span>,
    ) {}
}

<span class="cmt">// 2. Use the attribute</span>
<span class="kw">class</span> <span class="typ">UserController</span>
{
    <span class="op">#[Route(<span class="str">'/users'</span>, <span class="str">'GET'</span>)]</span>
    <span class="kw">public function</span> <span class="fn">index</span>(): <span class="typ">void</span> {}

    <span class="op">#[Route(<span class="str">'/users/{id}'</span>, <span class="str">'POST'</span>)]</span>
    <span class="kw">public function</span> <span class="fn">store</span>(): <span class="typ">void</span> {}
}

<span class="cmt">// 3. Read attributes via Reflection</span>
<span class="var">$reflection</span> = <span class="kw">new</span> <span class="typ">ReflectionClass</span>(<span class="typ">UserController</span>::class);

<span class="kw">foreach</span> (<span class="var">$reflection</span>-&gt;<span class="fn">getMethods</span>() <span class="kw">as</span> <span class="var">$method</span>) {
    <span class="var">$attrs</span> = <span class="var">$method</span>-&gt;<span class="fn">getAttributes</span>(<span class="typ">Route</span>::class);
    <span class="kw">foreach</span> (<span class="var">$attrs</span> <span class="kw">as</span> <span class="var">$attr</span>) {
        <span class="var">$route</span> = <span class="var">$attr</span>-&gt;<span class="fn">newInstance</span>();
        <span class="fn">echo</span> <span class="str">"{$route->method} {$route->path} ‚Üí {$method->name}()\n"</span>;
    }
}
<span class="cmt">// GET /users ‚Üí index()
// POST /users/{id} ‚Üí store()</span></pre>
      </div>

      <h3>Attribute Targets</h3>
      <table>
        <tr><th>Constant</th><th>Target</th></tr>
        <tr><td><code>Attribute::TARGET_CLASS</code></td><td>Classes, interfaces, traits, enums</td></tr>
        <tr><td><code>Attribute::TARGET_FUNCTION</code></td><td>Functions</td></tr>
        <tr><td><code>Attribute::TARGET_METHOD</code></td><td>Class methods</td></tr>
        <tr><td><code>Attribute::TARGET_PROPERTY</code></td><td>Properties</td></tr>
        <tr><td><code>Attribute::TARGET_CLASS_CONSTANT</code></td><td>Class constants</td></tr>
        <tr><td><code>Attribute::TARGET_PARAMETER</code></td><td>Function/method parameters</td></tr>
        <tr><td><code>Attribute::TARGET_ALL</code></td><td>All of the above</td></tr>
        <tr><td><code>Attribute::IS_REPEATABLE</code></td><td>Allow multiple on same target</td></tr>
      </table>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 23 ¬∑ COMMON PITFALLS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch23">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 23</span>
        <h2>Common Pitfalls &amp; How to Avoid Them</h2>
      </div>

      <p>These are the most frequent mistakes PHP beginners (and sometimes experienced developers!) make. Learn them now to save hours of debugging later.</p>

      <h3>1. Loose Comparison Surprises</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå PHP 7 loose comparison edge cases</span>
<span class="kw">var_dump</span>(<span class="num">0</span> == <span class="str">"foo"</span>);    <span class="cmt">// PHP 7: true  | PHP 8: false</span>
<span class="kw">var_dump</span>(<span class="num">0</span> == <span class="str">""</span>);      <span class="cmt">// PHP 7: true  | PHP 8: false</span>
<span class="kw">var_dump</span>(<span class="num">0</span> == <span class="str">"0"</span>);     <span class="cmt">// Both: true</span>
<span class="kw">var_dump</span>(<span class="str">"1"</span> == <span class="str">"01"</span>); <span class="cmt">// true (numeric comparison)</span>
<span class="kw">var_dump</span>(<span class="kw">false</span> == <span class="kw">null</span>);<span class="cmt">// true</span>
<span class="kw">var_dump</span>(<span class="str">""</span> == <span class="kw">null</span>);   <span class="cmt">// true</span>

<span class="cmt">// ‚úÖ Always use strict === comparison</span>
<span class="kw">var_dump</span>(<span class="num">0</span> === <span class="str">"foo"</span>);  <span class="cmt">// false</span>
<span class="kw">var_dump</span>(<span class="num">0</span> === <span class="num">0</span>);      <span class="cmt">// true</span></pre>
      </div>

      <h3>2. Modifying Arrays During foreach</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå Modifying original via $item doesn't work (copy)</span>
<span class="var">$nums</span> = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>];
<span class="kw">foreach</span> (<span class="var">$nums</span> <span class="kw">as</span> <span class="var">$item</span>) {
    <span class="var">$item</span> *= <span class="num">2</span>;  <span class="cmt">// modifies copy, not original!</span>
}
<span class="fn">print_r</span>(<span class="var">$nums</span>); <span class="cmt">// [1, 2, 3] ‚Äî unchanged!</span>

<span class="cmt">// ‚úÖ Use reference &$item or array_map</span>
<span class="kw">foreach</span> (<span class="var">$nums</span> <span class="kw">as</span> &<span class="var">$item</span>) {
    <span class="var">$item</span> *= <span class="num">2</span>;
}
<span class="kw">unset</span>(<span class="var">$item</span>); <span class="cmt">// ‚ö†Ô∏è Always unset reference after loop!</span>
<span class="fn">print_r</span>(<span class="var">$nums</span>); <span class="cmt">// [2, 4, 6]</span>

<span class="cmt">// Or use array_map (cleanest)</span>
<span class="var">$doubled</span> = <span class="fn">array_map</span>(<span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> * <span class="num">2</span>, <span class="var">$nums</span>);</pre>
      </div>

      <h3>3. Output Before Headers</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">echo</span> <span class="str">"Some output"</span>;  <span class="cmt">// ‚ùå Output already sent!</span>
<span class="fn">session_start</span>();    <span class="cmt">// ‚ùå "Cannot send session cache" warning</span>
<span class="fn">header</span>(<span class="str">"Location: /login"</span>); <span class="cmt">// ‚ùå "headers already sent" error</span>

<span class="cmt">// ‚úÖ session_start() and header() MUST come before any output
// Use output buffering to catch accidental whitespace</span>
<span class="fn">ob_start</span>();
<span class="cmt">// ... all your code ...</span>
<span class="fn">ob_end_flush</span>();

<span class="cmt">// ‚úÖ Or use the "declare strict" + no whitespace before &lt;?php
// Check for BOM in files with a hex editor if this persists</span></pre>
      </div>

      <h3>4. Integer Division Gotcha</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// PHP division always returns float if not evenly divisible</span>
<span class="kw">var_dump</span>(<span class="num">7</span> / <span class="num">2</span>);      <span class="cmt">// float(3.5)  ‚Äî not 3!</span>
<span class="kw">var_dump</span>(<span class="num">10</span> / <span class="num">2</span>);     <span class="cmt">// int(5)  ‚Äî only when evenly divisible</span>

<span class="cmt">// ‚úÖ Force integer division</span>
<span class="kw">var_dump</span>((int)(<span class="num">7</span> / <span class="num">2</span>));  <span class="cmt">// int(3)</span>
<span class="kw">var_dump</span>(<span class="fn">intdiv</span>(<span class="num">7</span>, <span class="num">2</span>));  <span class="cmt">// int(3) ‚Äî cleaner (PHP 7+)</span>
<span class="kw">var_dump</span>(<span class="fn">floor</span>(<span class="num">7</span> / <span class="num">2</span>));  <span class="cmt">// float(3) ‚Äî floor division</span></pre>
      </div>

      <h3>5. Floating Point Precision</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå Never compare floats directly</span>
<span class="kw">var_dump</span>(<span class="num">0.1</span> + <span class="num">0.2</span> === <span class="num">0.3</span>);  <span class="cmt">// false! (IEEE 754)</span>
<span class="fn">echo</span> <span class="num">0.1</span> + <span class="num">0.2</span>;                <span class="cmt">// 0.3 (but internally not exactly 0.3)</span>

<span class="cmt">// ‚úÖ Use epsilon comparison or round()</span>
<span class="kw">function</span> <span class="fn">floatsEqual</span>(<span class="typ">float</span> <span class="var">$a</span>, <span class="typ">float</span> <span class="var">$b</span>, <span class="typ">float</span> <span class="var">$eps</span> = <span class="num">1e-9</span>): <span class="typ">bool</span> {
    <span class="kw">return</span> <span class="fn">abs</span>(<span class="var">$a</span> - <span class="var">$b</span>) < <span class="var">$eps</span>;
}
<span class="kw">var_dump</span>(<span class="fn">floatsEqual</span>(<span class="num">0.1</span> + <span class="num">0.2</span>, <span class="num">0.3</span>)); <span class="cmt">// true</span>

<span class="cmt">// ‚úÖ For money: use integers (cents) or BCMath extension</span>
<span class="fn">echo</span> <span class="fn">bcadd</span>(<span class="str">'0.1'</span>, <span class="str">'0.2'</span>, <span class="num">10</span>); <span class="cmt">// "0.3000000000" ‚Äî exact</span></pre>
      </div>

      <h3>6. Forgetting htmlspecialchars on Output</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå XSS vulnerability</span>
<span class="fn">echo</span> <span class="var">$_GET</span>[<span class="str">'name'</span>]; <span class="cmt">// attacker sends: &lt;script&gt;alert(1)&lt;/script&gt;</span>

<span class="cmt">// ‚úÖ Always escape</span>
<span class="fn">echo</span> <span class="fn">htmlspecialchars</span>(<span class="var">$_GET</span>[<span class="str">'name'</span>] ?? <span class="str">''</span>, <span class="op">ENT_QUOTES</span>, <span class="str">'UTF-8'</span>);

<span class="cmt">// ‚úÖ Create a shorthand helper at the top of your project</span>
<span class="kw">function</span> <span class="fn">h</span>(<span class="typ">mixed</span> <span class="var">$val</span>): <span class="typ">string</span> {
    <span class="kw">return</span> <span class="fn">htmlspecialchars</span>((<span class="typ">string</span>)<span class="var">$val</span>, <span class="op">ENT_QUOTES</span> | <span class="op">ENT_HTML5</span>, <span class="str">'UTF-8'</span>);
}
<span class="fn">echo</span> <span class="fn">h</span>(<span class="var">$_GET</span>[<span class="str">'name'</span>] ?? <span class="str">''</span>);</pre>
      </div>

      <h3>7. array_keys Lost After array_filter</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$arr</span>      = [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>];
<span class="var">$filtered</span> = <span class="fn">array_filter</span>(<span class="var">$arr</span>, <span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> > <span class="num">2</span>);

<span class="fn">print_r</span>(<span class="var">$filtered</span>);
<span class="cmt">// Array ( [2] => 3 [3] => 4 [4] => 5 )   ‚Üê Keys preserved!</span>
<span class="cmt">// ‚ùå $filtered[0] is undefined!</span>

<span class="cmt">// ‚úÖ Re-index with array_values()</span>
<span class="var">$filtered</span> = <span class="fn">array_values</span>(<span class="fn">array_filter</span>(<span class="var">$arr</span>, <span class="fn">fn</span>(<span class="var">$n</span>) =&gt; <span class="var">$n</span> > <span class="num">2</span>));
<span class="fn">echo</span> <span class="var">$filtered</span>[<span class="num">0</span>]; <span class="cmt">// 3</span></pre>
      </div>

      <h3>8. Wrong String Interpolation</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$user</span> = [<span class="str">'name'</span> =&gt; <span class="str">'Alice'</span>];

<span class="cmt">// ‚ùå Simple interpolation doesn't work for array access</span>
<span class="fn">echo</span> <span class="str">"Hello $user['name']"</span>;   <span class="cmt">// Parse error!</span>
<span class="fn">echo</span> <span class="str">"Hello $user[name]"</span>;    <span class="cmt">// Works but deprecated syntax</span>

<span class="cmt">// ‚úÖ Wrap in curly braces</span>
<span class="fn">echo</span> <span class="str">"Hello {$user['name']}"</span>; <span class="cmt">// Alice ‚Äî correct</span>
<span class="fn">echo</span> <span class="str">"Hello "</span> . <span class="var">$user</span>[<span class="str">'name'</span>]; <span class="cmt">// also fine</span>

<span class="cmt">// ‚úÖ Same applies to object properties in strings</span>
<span class="var">$obj</span> = <span class="kw">new</span> <span class="typ">stdClass</span>; <span class="var">$obj</span>-&gt;name = <span class="str">"Bob"</span>;
<span class="fn">echo</span> <span class="str">"Hi {$obj->name}"</span>; <span class="cmt">// Hi Bob</span></pre>
      </div>

      <h3>9. Unintended Variable Overwrite in Foreach</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="var">$users</span> = [<span class="str">'Alice'</span>, <span class="str">'Bob'</span>, <span class="str">'Charlie'</span>];
<span class="kw">foreach</span> (<span class="var">$users</span> <span class="kw">as</span> &<span class="var">$user</span>) {
    <span class="var">$user</span> = <span class="fn">strtoupper</span>(<span class="var">$user</span>);
}
<span class="cmt">// ‚ö†Ô∏è FORGOT to unset($user)!</span>
<span class="cmt">// Now $user still points to $users[2]</span>

<span class="kw">foreach</span> (<span class="var">$users</span> <span class="kw">as</span> <span class="var">$user</span>) {  <span class="cmt">// $user overwrites $users[2]!</span>
    <span class="fn">echo</span> <span class="var">$user</span>;              <span class="cmt">// ALICE BOB CHARLIE ‚Üí ALICE BOB BOB</span>
}

<span class="cmt">// ‚úÖ Always unset after reference foreach</span>
<span class="kw">foreach</span> (<span class="var">$users</span> <span class="kw">as</span> &<span class="var">$user</span>) { <span class="var">$user</span> = <span class="fn">strtoupper</span>(<span class="var">$user</span>); }
<span class="kw">unset</span>(<span class="var">$user</span>); <span class="cmt">// ‚Üê critical!</span></pre>
      </div>

      <h3>10. Not Checking Return Values</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP ‚Äî Pitfall</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// ‚ùå fopen returns false on failure ‚Äî never checked</span>
<span class="var">$fp</span> = <span class="fn">fopen</span>(<span class="str">'/nonexistent/file.txt'</span>, <span class="str">'r'</span>);
<span class="fn">fread</span>(<span class="var">$fp</span>, <span class="num">100</span>); <span class="cmt">// Warning: fread(): supplied argument is not a valid stream</span>

<span class="cmt">// ‚úÖ Always check</span>
<span class="var">$fp</span> = <span class="fn">fopen</span>(<span class="str">'/path/to/file.txt'</span>, <span class="str">'r'</span>);
<span class="kw">if</span> (<span class="var">$fp</span> === <span class="kw">false</span>) {
    <span class="kw">throw new</span> <span class="typ">RuntimeException</span>(<span class="str">"Cannot open file"</span>);
}

<span class="cmt">// ‚úÖ With PDO ‚Äî set ERRMODE_EXCEPTION in connection (Ch. 11)
// ‚úÖ With modern APIs ‚Äî check for null/false/empty</span></pre>
      </div>

      <div class="box box-warn">
        <div class="box-title">‚ö†Ô∏è Quick Pitfall Checklist</div>
        <ul style="margin:0; list-style:none; padding:0;">
          <li>‚òë Use <code>===</code> not <code>==</code></li>
          <li>‚òë <code>unset()</code> reference variables after <code>foreach</code></li>
          <li>‚òë <code>session_start()</code> before any output</li>
          <li>‚òë <code>array_values()</code> after <code>array_filter()</code></li>
          <li>‚òë <code>htmlspecialchars()</code> on all echoed user data</li>
          <li>‚òë Check return values of file/network operations</li>
          <li>‚òë Use <code>intdiv()</code> for integer math</li>
          <li>‚òë Use <code>{$arr['key']}</code> not <code>$arr['key']</code> in strings</li>
          <li>‚òë Never compare floats with <code>===</code></li>
          <li>‚òë Use <code>PDO::ERRMODE_EXCEPTION</code> for DB errors</li>
        </ul>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 24 ¬∑ EXERCISES & SOLUTIONS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch24">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 24</span>
        <h2>Mini-Exercises with Solutions</h2>
      </div>

      <p>Hands-on practice is the fastest way to learn. Try each exercise before reading the solution.</p>

      <h3>Exercise A ‚Äî FizzBuzz</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Print numbers 1‚Äì100. For multiples of 3 print "Fizz", for multiples of 5 print "Buzz", for multiples of both print "FizzBuzz".</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution A</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">for</span> (<span class="var">$i</span> = <span class="num">1</span>; <span class="var">$i</span> <= <span class="num">100</span>; <span class="var">$i</span>++) {
    <span class="fn">echo</span> <span class="kw">match</span>(<span class="num">0</span>) {
        <span class="var">$i</span> % <span class="num">15</span> =&gt; <span class="str">'FizzBuzz'</span>,
        <span class="var">$i</span> % <span class="num">3</span>  =&gt; <span class="str">'Fizz'</span>,
        <span class="var">$i</span> % <span class="num">5</span>  =&gt; <span class="str">'Buzz'</span>,
        <span class="kw">default</span> =&gt; <span class="var">$i</span>,
    };
    <span class="fn">echo</span> <span class="str">"\n"</span>;
}</pre>
      </div>

      <h3>Exercise B ‚Äî Palindrome Checker</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Write a function <code>isPalindrome(string $s): bool</code> that returns <code>true</code> if the string reads the same forwards and backwards. Ignore case and spaces.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution B</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">function</span> <span class="fn">isPalindrome</span>(<span class="typ">string</span> <span class="var">$s</span>): <span class="typ">bool</span>
{
    <span class="var">$clean</span> = <span class="fn">strtolower</span>(<span class="fn">preg_replace</span>(<span class="str">'/[^a-zA-Z0-9]/'</span>, <span class="str">''</span>, <span class="var">$s</span>));
    <span class="kw">return</span> <span class="var">$clean</span> === <span class="fn">strrev</span>(<span class="var">$clean</span>);
}

<span class="kw">var_dump</span>(<span class="fn">isPalindrome</span>(<span class="str">"racecar"</span>));          <span class="cmt">// true</span>
<span class="kw">var_dump</span>(<span class="fn">isPalindrome</span>(<span class="str">"A man a plan a canal Panama"</span>)); <span class="cmt">// true</span>
<span class="kw">var_dump</span>(<span class="fn">isPalindrome</span>(<span class="str">"hello"</span>));             <span class="cmt">// false</span></pre>
      </div>

      <h3>Exercise C ‚Äî Fibonacci Generator</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Write a generator function that yields Fibonacci numbers up to a given limit.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution C ‚Äî PHP Generator</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">function</span> <span class="fn">fibonacci</span>(<span class="typ">int</span> <span class="var">$limit</span>): \<span class="typ">Generator</span>
{
    [<span class="var">$a</span>, <span class="var">$b</span>] = [<span class="num">0</span>, <span class="num">1</span>];
    <span class="kw">while</span> (<span class="var">$a</span> <= <span class="var">$limit</span>) {
        <span class="kw">yield</span> <span class="var">$a</span>;
        [<span class="var">$a</span>, <span class="var">$b</span>] = [<span class="var">$b</span>, <span class="var">$a</span> + <span class="var">$b</span>];
    }
}

<span class="kw">foreach</span> (<span class="fn">fibonacci</span>(<span class="num">100</span>) <span class="kw">as</span> <span class="var">$n</span>) {
    <span class="fn">echo</span> <span class="var">$n</span> . <span class="str">" "</span>;  <span class="cmt">// 0 1 1 2 3 5 8 13 21 34 55 89</span>
}</pre>
      </div>

      <h3>Exercise D ‚Äî Simple OOP Calculator</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Create a <code>Calculator</code> class with chainable methods: <code>add()</code>, <code>subtract()</code>, <code>multiply()</code>, <code>divide()</code>, and <code>result()</code>.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution D ‚Äî Fluent Interface</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">class</span> <span class="typ">Calculator</span>
{
    <span class="kw">private</span> <span class="typ">float</span> <span class="var">$value</span> = <span class="num">0</span>;

    <span class="kw">public function</span> <span class="fn">set</span>(<span class="typ">float</span> <span class="var">$n</span>): <span class="kw">static</span> { <span class="var">$this</span>-&gt;value = <span class="var">$n</span>; <span class="kw">return</span> <span class="var">$this</span>; }
    <span class="kw">public function</span> <span class="fn">add</span>(<span class="typ">float</span> <span class="var">$n</span>): <span class="kw">static</span> { <span class="var">$this</span>-&gt;value += <span class="var">$n</span>; <span class="kw">return</span> <span class="var">$this</span>; }
    <span class="kw">public function</span> <span class="fn">sub</span>(<span class="typ">float</span> <span class="var">$n</span>): <span class="kw">static</span> { <span class="var">$this</span>-&gt;value -= <span class="var">$n</span>; <span class="kw">return</span> <span class="var">$this</span>; }
    <span class="kw">public function</span> <span class="fn">mul</span>(<span class="typ">float</span> <span class="var">$n</span>): <span class="kw">static</span> { <span class="var">$this</span>-&gt;value *= <span class="var">$n</span>; <span class="kw">return</span> <span class="var">$this</span>; }

    <span class="kw">public function</span> <span class="fn">div</span>(<span class="typ">float</span> <span class="var">$n</span>): <span class="kw">static</span>
    {
        <span class="kw">if</span> (<span class="var">$n</span> == <span class="num">0</span>) <span class="kw">throw new</span> <span class="typ">\DivisionByZeroError</span>(<span class="str">"Cannot divide by zero"</span>);
        <span class="var">$this</span>-&gt;value /= <span class="var">$n</span>;
        <span class="kw">return</span> <span class="var">$this</span>;
    }

    <span class="kw">public function</span> <span class="fn">result</span>(): <span class="typ">float</span> { <span class="kw">return</span> <span class="var">$this</span>-&gt;value; }
}

<span class="var">$calc</span> = <span class="kw">new</span> <span class="typ">Calculator</span>();
<span class="fn">echo</span> <span class="var">$calc</span>-&gt;<span class="fn">set</span>(<span class="num">10</span>)-&gt;<span class="fn">add</span>(<span class="num">5</span>)-&gt;<span class="fn">mul</span>(<span class="num">2</span>)-&gt;<span class="fn">sub</span>(<span class="num">3</span>)-&gt;<span class="fn">result</span>(); <span class="cmt">// 27</span></pre>
      </div>

      <h3>Exercise E ‚Äî PDO User Registration</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Write a <code>registerUser(PDO $pdo, string $email, string $password): bool</code> function that safely inserts a new user into the <code>users</code> table with a bcrypt-hashed password. Return <code>false</code> if email already exists.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution E</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);

<span class="kw">function</span> <span class="fn">registerUser</span>(<span class="typ">PDO</span> <span class="var">$pdo</span>, <span class="typ">string</span> <span class="var">$email</span>, <span class="typ">string</span> <span class="var">$password</span>): <span class="typ">bool</span>
{
    <span class="cmt">// Validate email</span>
    <span class="kw">if</span> (!<span class="fn">filter_var</span>(<span class="var">$email</span>, <span class="op">FILTER_VALIDATE_EMAIL</span>)) {
        <span class="kw">throw new</span> <span class="typ">\InvalidArgumentException</span>(<span class="str">"Invalid email"</span>);
    }
    <span class="kw">if</span> (<span class="fn">strlen</span>(<span class="var">$password</span>) < <span class="num">8</span>) {
        <span class="kw">throw new</span> <span class="typ">\InvalidArgumentException</span>(<span class="str">"Password too short"</span>);
    }

    <span class="cmt">// Check if email already exists</span>
    <span class="var">$check</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"SELECT id FROM users WHERE email = ?"</span>);
    <span class="var">$check</span>-&gt;<span class="fn">execute</span>([ <span class="var">$email</span> ]);
    <span class="kw">if</span> (<span class="var">$check</span>-&gt;<span class="fn">fetch</span>()) {
        <span class="kw">return</span> <span class="kw">false</span>; <span class="cmt">// Email taken</span>
    }

    <span class="cmt">// Hash &amp; insert</span>
    <span class="var">$hash</span> = <span class="fn">password_hash</span>(<span class="var">$password</span>, <span class="op">PASSWORD_ARGON2ID</span>);
    <span class="var">$stmt</span> = <span class="var">$pdo</span>-&gt;<span class="fn">prepare</span>(<span class="str">"INSERT INTO users (email, password_hash) VALUES (?, ?)"</span>);
    <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$email</span>, <span class="var">$hash</span> ]);
    <span class="kw">return</span> <span class="kw">true</span>;
}</pre>
      </div>

      <h3>Exercise F ‚Äî Enum + Match</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Create an <code>OrderStatus</code> backed enum with values Pending, Processing, Shipped, Delivered, Cancelled. Add a method <code>label(): string</code> and <code>canCancel(): bool</code>. Use <code>match</code> for logic.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution F</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">enum</span> <span class="typ">OrderStatus</span>: <span class="typ">string</span>
{
    <span class="kw">case</span> Pending    = <span class="str">'pending'</span>;
    <span class="kw">case</span> Processing = <span class="str">'processing'</span>;
    <span class="kw">case</span> Shipped    = <span class="str">'shipped'</span>;
    <span class="kw">case</span> Delivered  = <span class="str">'delivered'</span>;
    <span class="kw">case</span> Cancelled  = <span class="str">'cancelled'</span>;

    <span class="kw">public function</span> <span class="fn">label</span>(): <span class="typ">string</span>
    {
        <span class="kw">return</span> <span class="kw">match</span>(<span class="var">$this</span>) {
            <span class="typ">self</span>::Pending    =&gt; <span class="str">'‚è≥ Pending'</span>,
            <span class="typ">self</span>::Processing =&gt; <span class="str">'‚öôÔ∏è Processing'</span>,
            <span class="typ">self</span>::Shipped    =&gt; <span class="str">'üöö Shipped'</span>,
            <span class="typ">self</span>::Delivered  =&gt; <span class="str">'‚úÖ Delivered'</span>,
            <span class="typ">self</span>::Cancelled  =&gt; <span class="str">'‚ùå Cancelled'</span>,
        };
    }

    <span class="kw">public function</span> <span class="fn">canCancel</span>(): <span class="typ">bool</span>
    {
        <span class="kw">return</span> <span class="kw">match</span>(<span class="var">$this</span>) {
            <span class="typ">self</span>::Pending, <span class="typ">self</span>::Processing =&gt; <span class="kw">true</span>,
            <span class="kw">default</span>                           =&gt; <span class="kw">false</span>,
        };
    }
}

<span class="var">$order</span> = <span class="typ">OrderStatus</span>::Shipped;
<span class="fn">echo</span> <span class="var">$order</span>-&gt;<span class="fn">label</span>();       <span class="cmt">// üöö Shipped</span>
<span class="fn">echo</span> <span class="var">$order</span>-&gt;<span class="fn">canCancel</span>() ? <span class="str">'Yes'</span> : <span class="str">'No'</span>; <span class="cmt">// No</span></pre>
      </div>

      <h3>Exercise G ‚Äî REST API JSON Response</h3>
      <div class="exercise">
        <div class="exercise-title">üìã Problem</div>
        <p>Write a reusable <code>jsonResponse()</code> function that outputs a JSON API response with proper headers and HTTP status code, then use it to build a simple /api/users endpoint.</p>
      </div>

      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>Solution G</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);

<span class="kw">function</span> <span class="fn">jsonResponse</span>(<span class="typ">mixed</span> <span class="var">$data</span>, <span class="typ">int</span> <span class="var">$status</span> = <span class="num">200</span>): <span class="kw">never</span>
{
    <span class="fn">http_response_code</span>(<span class="var">$status</span>);
    <span class="fn">header</span>(<span class="str">'Content-Type: application/json; charset=utf-8'</span>);
    <span class="fn">header</span>(<span class="str">'X-Content-Type-Options: nosniff'</span>);
    <span class="fn">echo</span> <span class="fn">json_encode</span>(<span class="var">$data</span>, <span class="op">JSON_PRETTY_PRINT</span> | <span class="op">JSON_UNESCAPED_UNICODE</span>);
    <span class="kw">exit</span>();
}

<span class="cmt">// Router</span>
<span class="var">$method</span> = <span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>];
<span class="var">$path</span>   = <span class="fn">parse_url</span>(<span class="var">$_SERVER</span>[<span class="str">'REQUEST_URI'</span>], <span class="op">PHP_URL_PATH</span>);

<span class="kw">match</span>(<span class="kw">true</span>) {
    <span class="var">$method</span> === <span class="str">'GET'</span>  &amp;&amp; <span class="var">$path</span> === <span class="str">'/api/users'</span> =&gt; <span class="fn">jsonResponse</span>([
        <span class="str">'users'</span> =&gt; [
            [<span class="str">'id'</span> =&gt; <span class="num">1</span>, <span class="str">'name'</span> =&gt; <span class="str">'Alice'</span>],
            [<span class="str">'id'</span> =&gt; <span class="num">2</span>, <span class="str">'name'</span> =&gt; <span class="str">'Bob'</span>],
        ],
        <span class="str">'total'</span> =&gt; <span class="num">2</span>,
    ]),
    <span class="var">$method</span> === <span class="str">'POST'</span> &amp;&amp; <span class="var">$path</span> === <span class="str">'/api/users'</span> =&gt; <span class="fn">jsonResponse</span>(
        [<span class="str">'message'</span> =&gt; <span class="str">'User created'</span>, <span class="str">'id'</span> =&gt; <span class="num">3</span>], <span class="num">201</span>
    ),
    <span class="kw">default</span> =&gt; <span class="fn">jsonResponse</span>([<span class="str">'error'</span> =&gt; <span class="str">'Not Found'</span>], <span class="num">404</span>),
};</pre>
      </div>
    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 25 ¬∑ QUICK REFERENCE
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch25">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 25</span>
        <h2>Quick Reference Cheat Sheet</h2>
      </div>

      <p>A condensed reference for the most commonly needed PHP syntax and functions.</p>

      <h3>Type Juggling Reference</h3>
      <table>
        <tr><th>Value</th><th>(bool)</th><th>(int)</th><th>(string)</th></tr>
        <tr><td><code>0</code></td><td><code>false</code></td><td><code>0</code></td><td><code>"0"</code></td></tr>
        <tr><td><code>""</code></td><td><code>false</code></td><td><code>0</code></td><td><code>""</code></td></tr>
        <tr><td><code>"0"</code></td><td><code>false</code></td><td><code>0</code></td><td><code>"0"</code></td></tr>
        <tr><td><code>[]</code></td><td><code>false</code></td><td>‚Äî</td><td>Error</td></tr>
        <tr><td><code>null</code></td><td><code>false</code></td><td><code>0</code></td><td><code>""</code></td></tr>
        <tr><td><code>1</code></td><td><code>true</code></td><td><code>1</code></td><td><code>"1"</code></td></tr>
        <tr><td><code>"hello"</code></td><td><code>true</code></td><td><code>0</code></td><td><code>"hello"</code></td></tr>
      </table>

      <h3>Most-Used String Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP Quick Ref ‚Äî Strings</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">strlen</span>(<span class="var">$s</span>)              <span class="cmt">// Length in bytes (use mb_strlen for unicode)</span>
<span class="fn">mb_strlen</span>(<span class="var">$s</span>)           <span class="cmt">// Unicode-safe length</span>
<span class="fn">strtolower</span> / <span class="fn">strtoupper</span> <span class="cmt">// Case conversion</span>
<span class="fn">trim</span> / <span class="fn">ltrim</span> / <span class="fn">rtrim</span>    <span class="cmt">// Whitespace removal</span>
<span class="fn">substr</span>(<span class="var">$s</span>, <span class="var">$start</span>, <span class="var">$len</span>)<span class="cmt">// Extract substring</span>
<span class="fn">strpos</span>(<span class="var">$s</span>, <span class="var">$needle</span>)     <span class="cmt">// Find first occurrence (int|false)</span>
<span class="fn">str_replace</span>(<span class="var">$f</span>,<span class="var">$r</span>,<span class="var">$s</span>)  <span class="cmt">// Search/replace</span>
<span class="fn">str_contains</span>(<span class="var">$s</span>,<span class="var">$n</span>)    <span class="cmt">// PHP 8+ bool</span>
<span class="fn">str_starts_with</span>(<span class="var">$s</span>,<span class="var">$n</span>) <span class="cmt">// PHP 8+ bool</span>
<span class="fn">str_ends_with</span>(<span class="var">$s</span>,<span class="var">$n</span>)   <span class="cmt">// PHP 8+ bool</span>
<span class="fn">explode</span>(<span class="var">$sep</span>,<span class="var">$s</span>)       <span class="cmt">// Split to array</span>
<span class="fn">implode</span>(<span class="var">$glue</span>,<span class="var">$arr</span>)    <span class="cmt">// Join array</span>
<span class="fn">sprintf</span>(<span class="var">$fmt</span>, ...)      <span class="cmt">// Formatted string</span>
<span class="fn">number_format</span>(<span class="var">$n</span>,<span class="num">2</span>)    <span class="cmt">// e.g. "1,234.56"</span>
<span class="fn">preg_match</span>(<span class="var">$pat</span>,<span class="var">$s</span>)    <span class="cmt">// Regex test</span>
<span class="fn">preg_replace</span>(<span class="var">$p</span>,<span class="var">$r</span>,<span class="var">$s</span>) <span class="cmt">// Regex replace</span>
<span class="fn">htmlspecialchars</span>(<span class="var">$s</span>)   <span class="cmt">// XSS prevention</span>
<span class="fn">json_encode</span>/<span class="fn">decode</span>      <span class="cmt">// JSON serialization</span></pre>
      </div>

      <h3>Most-Used Array Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP Quick Ref ‚Äî Arrays</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">count</span>(<span class="var">$arr</span>)              <span class="cmt">// Number of elements</span>
<span class="fn">array_push</span>/<span class="fn">pop</span>           <span class="cmt">// Add/remove from end</span>
<span class="fn">array_shift</span>/<span class="fn">unshift</span>     <span class="cmt">// Remove/add from start</span>
<span class="fn">array_merge</span>(<span class="var">$a</span>,<span class="var">$b</span>)      <span class="cmt">// Merge (renumbers numeric keys)</span>
<span class="fn">array_splice</span>(<span class="var">$a</span>,<span class="var">$i</span>,<span class="var">$n</span>) <span class="cmt">// Remove &amp; insert</span>
<span class="fn">array_slice</span>(<span class="var">$a</span>,<span class="var">$i</span>,<span class="var">$n</span>)  <span class="cmt">// Extract portion</span>
<span class="fn">in_array</span>(<span class="var">$v</span>,<span class="var">$arr</span>)       <span class="cmt">// Search value (loose)</span>
<span class="fn">array_search</span>(<span class="var">$v</span>,<span class="var">$arr</span>)  <span class="cmt">// Returns key|false</span>
<span class="fn">array_key_exists</span>(<span class="var">$k</span>,<span class="var">$a</span>)<span class="cmt">// Check key</span>
<span class="fn">array_keys</span>/<span class="fn">values</span>       <span class="cmt">// Extract keys or values</span>
<span class="fn">array_flip</span>(<span class="var">$arr</span>)        <span class="cmt">// Swap keys &amp; values</span>
<span class="fn">array_unique</span>(<span class="var">$arr</span>)      <span class="cmt">// Remove duplicates</span>
<span class="fn">array_map</span>(<span class="var">$fn</span>,<span class="var">$arr</span>)    <span class="cmt">// Transform each element</span>
<span class="fn">array_filter</span>(<span class="var">$arr</span>,<span class="var">$fn</span>) <span class="cmt">// Filter elements</span>
<span class="fn">array_reduce</span>(<span class="var">$arr</span>,<span class="var">$fn</span>) <span class="cmt">// Fold to single value</span>
<span class="fn">sort</span>/<span class="fn">rsort</span>/<span class="fn">usort</span>        <span class="cmt">// Sorting variants</span>
<span class="fn">array_combine</span>(<span class="var">$k</span>,<span class="var">$v</span>)  <span class="cmt">// Keys + values ‚Üí assoc</span>
<span class="fn">compact</span>(<span class="str">'a'</span>,<span class="str">'b'</span>)       <span class="cmt">// vars ‚Üí assoc array</span>
<span class="fn">extract</span>(<span class="var">$arr</span>)           <span class="cmt">// assoc ‚Üí vars (use carefully)</span>
<span class="fn">array_column</span>(<span class="var">$a</span>,<span class="str">'key'</span>) <span class="cmt">// Extract column from 2D array</span>
<span class="fn">array_find</span>(<span class="var">$arr</span>,<span class="var">$fn</span>)  <span class="cmt">// PHP 8.4 ‚Äî find first match</span></pre>
      </div>

      <h3>Date &amp; Time</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP Quick Ref ‚Äî Dates</div>
        <pre><span class="tag">&lt;?php</span>
<span class="cmt">// Current timestamp</span>
<span class="fn">time</span>();                             <span class="cmt">// Unix timestamp (int)</span>
<span class="fn">date</span>(<span class="str">'Y-m-d H:i:s'</span>);              <span class="cmt">// "2026-01-15 14:30:00"</span>
<span class="fn">date</span>(<span class="str">'D, d M Y'</span>);                 <span class="cmt">// "Wed, 15 Jan 2026"</span>

<span class="cmt">// DateTime class (preferred)</span>
<span class="var">$dt</span>  = <span class="kw">new</span> <span class="typ">DateTime</span>(<span class="str">'now'</span>);
<span class="var">$dt</span>  = <span class="kw">new</span> <span class="typ">DateTime</span>(<span class="str">'2026-01-15'</span>);
<span class="var">$dt</span>  = <span class="typ">DateTime</span>::<span class="fn">createFromFormat</span>(<span class="str">'d/m/Y'</span>, <span class="str">'15/01/2026'</span>);

<span class="fn">echo</span> <span class="var">$dt</span>-&gt;<span class="fn">format</span>(<span class="str">'Y-m-d'</span>);         <span class="cmt">// "2026-01-15"</span>
<span class="fn">echo</span> <span class="var">$dt</span>-&gt;<span class="fn">getTimestamp</span>();           <span class="cmt">// Unix timestamp</span>

<span class="cmt">// Modify dates</span>
<span class="var">$dt</span>-&gt;<span class="fn">modify</span>(<span class="str">'+7 days'</span>);
<span class="var">$dt</span>-&gt;<span class="fn">modify</span>(<span class="str">'first day of next month'</span>);

<span class="cmt">// DateTimeImmutable (PHP 8 preferred ‚Äî won't mutate)</span>
<span class="var">$immutable</span> = <span class="kw">new</span> <span class="typ">DateTimeImmutable</span>(<span class="str">'now'</span>);
<span class="var">$nextWeek</span>  = <span class="var">$immutable</span>-&gt;<span class="fn">modify</span>(<span class="str">'+1 week'</span>); <span class="cmt">// returns NEW object</span>

<span class="cmt">// Diff between dates</span>
<span class="var">$d1</span>   = <span class="kw">new</span> <span class="typ">DateTime</span>(<span class="str">'2026-01-01'</span>);
<span class="var">$d2</span>   = <span class="kw">new</span> <span class="typ">DateTime</span>(<span class="str">'2026-12-31'</span>);
<span class="var">$diff</span> = <span class="var">$d1</span>-&gt;<span class="fn">diff</span>(<span class="var">$d2</span>);
<span class="fn">echo</span> <span class="var">$diff</span>-&gt;days; <span class="cmt">// 364</span>

<span class="cmt">// Common format tokens</span>
<span class="cmt">// Y=2026  y=26  m=01  d=15  H=14  i=30  s=00
// D=Wed  l=Wednesday  N=3(Mon=1) w=3(Sun=0)
// U=timestamp  A=AM/PM  g=12h</span></pre>
      </div>

      <h3>Math Functions</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP Quick Ref ‚Äî Math</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">abs</span>(-<span class="num">5</span>)         <span class="cmt">// 5</span>
<span class="fn">ceil</span>(<span class="num">4.1</span>)       <span class="cmt">// 5.0</span>
<span class="fn">floor</span>(<span class="num">4.9</span>)      <span class="cmt">// 4.0</span>
<span class="fn">round</span>(<span class="num">4.567</span>,<span class="num">2</span>) <span class="cmt">// 4.57</span>
<span class="fn">max</span>(<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>)     <span class="cmt">// 3</span>
<span class="fn">min</span>(<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>)     <span class="cmt">// 1</span>
<span class="fn">pow</span>(<span class="num">2</span>,<span class="num">10</span>)       <span class="cmt">// 1024</span>
<span class="fn">sqrt</span>(<span class="num">16</span>)        <span class="cmt">// 4.0</span>
<span class="fn">intdiv</span>(<span class="num">7</span>,<span class="num">2</span>)     <span class="cmt">// 3</span>
<span class="fn">fmod</span>(<span class="num">7.5</span>,<span class="num">2.5</span>)  <span class="cmt">// 0.0</span>
<span class="fn">pi</span>()            <span class="cmt">// 3.14159...  (or M_PI constant)</span>
<span class="fn">rand</span>(<span class="num">1</span>,<span class="num">100</span>)    <span class="cmt">// random int ‚Äî NOT cryptographically secure</span>
<span class="fn">random_int</span>(<span class="num">1</span>,<span class="num">100</span>) <span class="cmt">// cryptographically secure random int</span>
<span class="fn">random_bytes</span>(<span class="num">16</span>)  <span class="cmt">// 16 cryptographically secure random bytes</span></pre>
      </div>

      <h3>PHP.ini Key Settings</h3>
      <table>
        <tr><th>Setting</th><th>Development</th><th>Production</th></tr>
        <tr><td><code>display_errors</code></td><td><code>On</code></td><td><code>Off</code></td></tr>
        <tr><td><code>error_reporting</code></td><td><code>E_ALL</code></td><td><code>E_ALL</code></td></tr>
        <tr><td><code>log_errors</code></td><td><code>On</code></td><td><code>On</code></td></tr>
        <tr><td><code>upload_max_filesize</code></td><td><code>64M</code></td><td>As needed</td></tr>
        <tr><td><code>post_max_size</code></td><td><code>64M</code></td><td>As needed</td></tr>
        <tr><td><code>max_execution_time</code></td><td><code>30</code></td><td><code>30</code></td></tr>
        <tr><td><code>memory_limit</code></td><td><code>256M</code></td><td><code>128M</code></td></tr>
        <tr><td><code>session.cookie_httponly</code></td><td><code>1</code></td><td><code>1</code></td></tr>
        <tr><td><code>session.cookie_secure</code></td><td><code>0</code></td><td><code>1</code></td></tr>
        <tr><td><code>session.use_strict_mode</code></td><td><code>1</code></td><td><code>1</code></td></tr>
      </table>

      <h3>HTTP Status Codes in PHP</h3>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>PHP</div>
        <pre><span class="tag">&lt;?php</span>
<span class="fn">http_response_code</span>(<span class="num">200</span>); <span class="cmt">// OK</span>
<span class="fn">http_response_code</span>(<span class="num">201</span>); <span class="cmt">// Created</span>
<span class="fn">http_response_code</span>(<span class="num">204</span>); <span class="cmt">// No Content</span>
<span class="fn">http_response_code</span>(<span class="num">301</span>); <span class="cmt">// Moved Permanently</span>
<span class="fn">http_response_code</span>(<span class="num">302</span>); <span class="cmt">// Found (Redirect)</span>
<span class="fn">http_response_code</span>(<span class="num">400</span>); <span class="cmt">// Bad Request</span>
<span class="fn">http_response_code</span>(<span class="num">401</span>); <span class="cmt">// Unauthorized</span>
<span class="fn">http_response_code</span>(<span class="num">403</span>); <span class="cmt">// Forbidden</span>
<span class="fn">http_response_code</span>(<span class="num">404</span>); <span class="cmt">// Not Found</span>
<span class="fn">http_response_code</span>(<span class="num">422</span>); <span class="cmt">// Unprocessable Entity</span>
<span class="fn">http_response_code</span>(<span class="num">429</span>); <span class="cmt">// Too Many Requests</span>
<span class="fn">http_response_code</span>(<span class="num">500</span>); <span class="cmt">// Internal Server Error</span>
<span class="fn">http_response_code</span>(<span class="num">503</span>); <span class="cmt">// Service Unavailable</span>

<span class="cmt">// Redirect</span>
<span class="fn">header</span>(<span class="str">'Location: /dashboard'</span>);
<span class="kw">exit</span>();

<span class="cmt">// Force download</span>
<span class="fn">header</span>(<span class="str">'Content-Disposition: attachment; filename="report.pdf"'</span>);
<span class="fn">header</span>(<span class="str">'Content-Type: application/pdf'</span>);</pre>
      </div>

      <div class="box box-tip">
        <div class="box-title">üöÄ You've Completed the Guide!</div>
        You now have a solid foundation in PHP from beginner to modern PHP 8.4. The next steps:
        <br><br>
        <strong>1.</strong> Build the final blog project from Chapter 18.<br>
        <strong>2.</strong> Learn <strong>Laravel</strong> ‚Äî it uses everything you just learned at scale.<br>
        <strong>3.</strong> Study <strong>design patterns</strong> (Repository, Service Layer, Factory).<br>
        <strong>4.</strong> Add <strong>PHPStan</strong> static analysis to your projects.<br>
        <strong>5.</strong> Write <strong>PHPUnit</strong> tests for all your classes and functions.<br>
        <strong>6.</strong> Practice on <strong>LeetCode</strong>, <strong>Exercism.io</strong>, or <strong>HackerRank</strong> in PHP.
      </div>

    </article>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         CH 26 ¬∑ MINI-APP DEMOS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <article class="chapter" id="ch26">
      <div class="chapter-header">
        <span class="chapter-num">Chapter 26</span>
        <h2>Mini-App Demos &amp; Real Projects</h2>
      </div>

      <p>These interactive demos simulate what PHP code does on the server. Click buttons to see output ‚Äî great for understanding the flow before running real PHP.</p>

      <!-- ‚îÄ‚îÄ‚îÄ DEMO 1: LOGIN SYSTEM ‚îÄ‚îÄ‚îÄ -->
      <h3>Demo 1 ‚Äî Login System Simulation</h3>
      <p>A simplified login flow showing password hashing, verification, and session management.</p>
      <div class="demo-app">
        <div class="demo-app-title">üîê Login System Demo</div>
        <input class="demo-input" id="login-email" placeholder="Email: alice@example.com" type="email" value="alice@example.com">
        <input class="demo-input" id="login-pass" placeholder="Password: secret123" type="password" value="secret123">
        <button class="demo-btn" onclick="demoLogin()">Login</button>
        <button class="demo-btn danger" onclick="demoLogout()">Logout</button>
        <button class="demo-btn success" onclick="demoRegister()">Register New User</button>
        <div class="demo-output" id="login-output"><span class="info">// Ready ‚Äî try login or register</span></div>
      </div>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>login_system.php ‚Äî PHP 8.3</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);
<span class="fn">session_start</span>();

<span class="cmt">// In a real app these come from PDO + DB</span>
<span class="var">$users</span> = [
    <span class="str">'alice@example.com'</span> =&gt; [
        <span class="str">'name'</span>          =&gt; <span class="str">'Alice'</span>,
        <span class="str">'password_hash'</span> =&gt; <span class="fn">password_hash</span>(<span class="str">'secret123'</span>, <span class="op">PASSWORD_ARGON2ID</span>),
        <span class="str">'role'</span>          =&gt; <span class="str">'admin'</span>,
    ],
];

<span class="kw">function</span> <span class="fn">login</span>(<span class="typ">string</span> <span class="var">$email</span>, <span class="typ">string</span> <span class="var">$password</span>): <span class="typ">bool</span>
{
    <span class="kw">global</span> <span class="var">$users</span>;
    <span class="var">$user</span> = <span class="var">$users</span>[<span class="fn">strtolower</span>(<span class="var">$email</span>)] ?? <span class="kw">null</span>;
    <span class="kw">if</span> (!<span class="var">$user</span> || !<span class="fn">password_verify</span>(<span class="var">$password</span>, <span class="var">$user</span>[<span class="str">'password_hash'</span>])) {
        <span class="kw">return</span> <span class="kw">false</span>;
    }
    <span class="fn">session_regenerate_id</span>(<span class="kw">true</span>); <span class="cmt">// Prevent session fixation</span>
    <span class="var">$_SESSION</span>[<span class="str">'user'</span>] = [
        <span class="str">'email'</span> =&gt; <span class="var">$email</span>,
        <span class="str">'name'</span>  =&gt; <span class="var">$user</span>[<span class="str">'name'</span>],
        <span class="str">'role'</span>  =&gt; <span class="var">$user</span>[<span class="str">'role'</span>],
        <span class="str">'csrf'</span>  =&gt; <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">32</span>)),
    ];
    <span class="kw">return</span> <span class="kw">true</span>;
}

<span class="kw">function</span> <span class="fn">logout</span>(): <span class="kw">void</span>
{
    <span class="var">$_SESSION</span> = [];
    <span class="fn">session_destroy</span>();
    <span class="fn">setcookie</span>(<span class="fn">session_name</span>(), <span class="str">''</span>, <span class="num">0</span>, <span class="str">'/'</span>);
}

<span class="kw">function</span> <span class="fn">requireAuth</span>(): <span class="kw">void</span>
{
    <span class="kw">if</span> (empty(<span class="var">$_SESSION</span>[<span class="str">'user'</span>])) {
        <span class="fn">http_response_code</span>(<span class="num">401</span>);
        <span class="fn">header</span>(<span class="str">'Location: /login'</span>);
        <span class="kw">exit</span>();
    }
}

<span class="cmt">// Handle form submission</span>
<span class="kw">if</span> (<span class="var">$_SERVER</span>[<span class="str">'REQUEST_METHOD'</span>] === <span class="str">'POST'</span>) {
    <span class="var">$email</span>    = <span class="fn">filter_input</span>(<span class="op">INPUT_POST</span>, <span class="str">'email'</span>, <span class="op">FILTER_SANITIZE_EMAIL</span>);
    <span class="var">$password</span> = <span class="var">$_POST</span>[<span class="str">'password'</span>] ?? <span class="str">''</span>;

    <span class="kw">if</span> (<span class="fn">login</span>(<span class="var">$email</span>, <span class="var">$password</span>)) {
        <span class="fn">header</span>(<span class="str">'Location: /dashboard'</span>);
    } <span class="kw">else</span> {
        <span class="var">$error</span> = <span class="str">'Invalid credentials'</span>;
    }
}</pre>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ DEMO 2: TODO LIST ‚îÄ‚îÄ‚îÄ -->
      <h3>Demo 2 ‚Äî Todo List (Session-Backed)</h3>
      <p>Simulates a session-backed todo list ‚Äî the same logic you'd write in PHP using <code>$_SESSION</code>.</p>
      <div class="demo-app">
        <div class="demo-app-title">üìã Todo List Demo</div>
        <div style="display:flex;gap:0.5rem">
          <input class="demo-input" id="todo-input" placeholder="Add a task‚Ä¶" style="margin:0" onkeydown="if(event.key==='Enter')addTodo()">
          <button class="demo-btn" style="margin:0;white-space:nowrap" onclick="addTodo()">+ Add</button>
        </div>
        <div id="todo-list" style="margin-top:0.75rem"></div>
        <div style="margin-top:0.5rem;display:flex;gap:0.5rem">
          <button class="demo-btn" onclick="filterTodos('all')">All</button>
          <button class="demo-btn" onclick="filterTodos('active')">Active</button>
          <button class="demo-btn" onclick="filterTodos('done')">Done</button>
          <button class="demo-btn danger" onclick="clearDoneTodos()">Clear Done</button>
        </div>
      </div>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>todo_controller.php ‚Äî PHP 8.3</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);
<span class="fn">session_start</span>();

<span class="kw">if</span> (!<span class="fn">isset</span>(<span class="var">$_SESSION</span>[<span class="str">'todos'</span>])) {
    <span class="var">$_SESSION</span>[<span class="str">'todos'</span>] = [];
}

<span class="kw">function</span> <span class="fn">addTodo</span>(<span class="typ">string</span> <span class="var">$task</span>): <span class="typ">void</span>
{
    <span class="var">$_SESSION</span>[<span class="str">'todos'</span>][] = [
        <span class="str">'id'</span>      =&gt; <span class="fn">uniqid</span>(<span class="str">'todo_'</span>),
        <span class="str">'task'</span>    =&gt; <span class="fn">htmlspecialchars</span>(<span class="fn">trim</span>(<span class="var">$task</span>)),
        <span class="str">'done'</span>    =&gt; <span class="kw">false</span>,
        <span class="str">'created'</span> =&gt; <span class="kw">new</span> \<span class="typ">DateTimeImmutable</span>(),
    ];
}

<span class="kw">function</span> <span class="fn">toggleTodo</span>(<span class="typ">string</span> <span class="var">$id</span>): <span class="typ">void</span>
{
    <span class="kw">foreach</span> (<span class="var">$_SESSION</span>[<span class="str">'todos'</span>] <span class="kw">as</span> &<span class="var">$todo</span>) {
        <span class="kw">if</span> (<span class="var">$todo</span>[<span class="str">'id'</span>] === <span class="var">$id</span>) {
            <span class="var">$todo</span>[<span class="str">'done'</span>] = !<span class="var">$todo</span>[<span class="str">'done'</span>];
        }
    }
    <span class="kw">unset</span>(<span class="var">$todo</span>);
}

<span class="kw">function</span> <span class="fn">deleteTodo</span>(<span class="typ">string</span> <span class="var">$id</span>): <span class="typ">void</span>
{
    <span class="var">$_SESSION</span>[<span class="str">'todos'</span>] = <span class="fn">array_filter</span>(
        <span class="var">$_SESSION</span>[<span class="str">'todos'</span>],
        <span class="fn">fn</span>(<span class="var">$t</span>) =&gt; <span class="var">$t</span>[<span class="str">'id'</span>] !== <span class="var">$id</span>
    );
}

<span class="cmt">// Route based on POST action</span>
<span class="var">$action</span> = <span class="var">$_POST</span>[<span class="str">'action'</span>] ?? <span class="str">''</span>;
<span class="kw">match</span>(<span class="var">$action</span>) {
    <span class="str">'add'</span>    =&gt; <span class="fn">addTodo</span>(<span class="var">$_POST</span>[<span class="str">'task'</span>] ?? <span class="str">''</span>),
    <span class="str">'toggle'</span> =&gt; <span class="fn">toggleTodo</span>(<span class="var">$_POST</span>[<span class="str">'id'</span>] ?? <span class="str">''</span>),
    <span class="str">'delete'</span> =&gt; <span class="fn">deleteTodo</span>(<span class="var">$_POST</span>[<span class="str">'id'</span>] ?? <span class="str">''</span>),
    <span class="kw">default</span>  =&gt; <span class="kw">null</span>,
};

<span class="fn">header</span>(<span class="str">'Content-Type: application/json'</span>);
<span class="fn">echo</span> <span class="fn">json_encode</span>(<span class="var">$_SESSION</span>[<span class="str">'todos'</span>]);</pre>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ DEMO 3: CRUD ‚îÄ‚îÄ‚îÄ -->
      <h3>Demo 3 ‚Äî Basic CRUD with PDO</h3>
      <p>A complete user management CRUD simulation. In production this talks to MySQL via PDO.</p>
      <div class="demo-app">
        <div class="demo-app-title">üóÑ User CRUD Demo</div>
        <div style="display:flex;gap:0.5rem;flex-wrap:wrap">
          <input class="demo-input" id="crud-name" placeholder="Name" style="flex:1;min-width:100px;margin:0">
          <input class="demo-input" id="crud-email" placeholder="Email" style="flex:1;min-width:130px;margin:0">
          <button class="demo-btn" style="margin:0" onclick="crudCreate()">Create</button>
        </div>
        <div id="crud-table" style="margin-top:0.75rem"></div>
        <div class="demo-output" id="crud-output" style="margin-top:0.5rem"></div>
      </div>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>UserRepository.php ‚Äî PDO CRUD</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);
<span class="kw">namespace</span> <span class="typ">App\Repositories</span>;

<span class="kw">use</span> <span class="typ">App\Models\User</span>;
<span class="kw">use</span> <span class="typ">PDO</span>;

<span class="kw">readonly class</span> <span class="typ">UserRepository</span>
{
    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private</span> <span class="typ">PDO</span> <span class="var">$pdo</span>) {}

    <span class="kw">public function</span> <span class="fn">findAll</span>(): <span class="typ">array</span>
    {
        <span class="kw">return</span> <span class="var">$this</span>-&gt;pdo
            -&gt;<span class="fn">query</span>(<span class="str">'SELECT * FROM users ORDER BY created_at DESC'</span>)
            -&gt;<span class="fn">fetchAll</span>();
    }

    <span class="kw">public function</span> <span class="fn">findById</span>(<span class="typ">int</span> <span class="var">$id</span>): ?<span class="typ">array</span>
    {
        <span class="var">$stmt</span> = <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">prepare</span>(<span class="str">'SELECT * FROM users WHERE id=?'</span>);
        <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$id</span> ]);
        <span class="kw">return</span> <span class="var">$stmt</span>-&gt;<span class="fn">fetch</span>() ?: <span class="kw">null</span>;
    }

    <span class="kw">public function</span> <span class="fn">create</span>(<span class="typ">string</span> <span class="var">$name</span>, <span class="typ">string</span> <span class="var">$email</span>): <span class="typ">int</span>
    {
        <span class="var">$stmt</span> = <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">prepare</span>(
            <span class="str">'INSERT INTO users (name,email,created_at) VALUES (?,?,NOW())'</span>
        );
        <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="fn">trim</span>(<span class="var">$name</span>), <span class="fn">strtolower</span>(<span class="var">$email</span>) ]);
        <span class="kw">return</span> (<span class="typ">int</span>) <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">lastInsertId</span>();
    }

    <span class="kw">public function</span> <span class="fn">update</span>(<span class="typ">int</span> <span class="var">$id</span>, <span class="typ">string</span> <span class="var">$name</span>, <span class="typ">string</span> <span class="var">$email</span>): <span class="typ">bool</span>
    {
        <span class="var">$stmt</span> = <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">prepare</span>(
            <span class="str">'UPDATE users SET name=?,email=? WHERE id=?'</span>
        );
        <span class="kw">return</span> <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$name</span>, <span class="var">$email</span>, <span class="var">$id</span> ]);
    }

    <span class="kw">public function</span> <span class="fn">delete</span>(<span class="typ">int</span> <span class="var">$id</span>): <span class="typ">bool</span>
    {
        <span class="var">$stmt</span> = <span class="var">$this</span>-&gt;pdo-&gt;<span class="fn">prepare</span>(<span class="str">'DELETE FROM users WHERE id=?'</span>);
        <span class="kw">return</span> <span class="var">$stmt</span>-&gt;<span class="fn">execute</span>([ <span class="var">$id</span> ]);
    }
}</pre>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ DEMO 4: FILE UPLOAD ‚îÄ‚îÄ‚îÄ -->
      <h3>Demo 4 ‚Äî File Upload Handler</h3>
      <p>Simulates server-side file validation ‚Äî MIME type checking, size limits, and safe storage.</p>
      <div class="demo-app">
        <div class="demo-app-title">üìÅ File Upload Demo</div>
        <select class="demo-input" id="upload-type" style="margin-bottom:0.5rem">
          <option value="image/jpeg">image/jpeg (2.4 MB) ‚úÖ</option>
          <option value="image/png">image/png (800 KB) ‚úÖ</option>
          <option value="application/pdf">application/pdf (1.1 MB) ‚úÖ</option>
          <option value="text/php">text/php (5 KB) ‚ùå dangerous</option>
          <option value="image/jpeg-big">image/jpeg (12 MB) ‚ùå too large</option>
        </select>
        <button class="demo-btn" onclick="demoUpload()">Simulate Upload</button>
        <div class="demo-output" id="upload-output"><span class="info">// Select a file type and click Simulate Upload</span></div>
      </div>
      <div class="code-block">
        <div class="code-label"><div class="code-dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>FileUploadHandler.php ‚Äî PHP 8.3</div>
        <pre><span class="tag">&lt;?php</span>
<span class="kw">declare</span>(strict_types=<span class="num">1</span>);
<span class="kw">namespace</span> <span class="typ">App\Services</span>;

<span class="kw">use</span> <span class="typ">RuntimeException</span>;
<span class="kw">use</span> <span class="typ">InvalidArgumentException</span>;

<span class="kw">readonly class</span> <span class="typ">FileUploadHandler</span>
{
    <span class="kw">private const array</span> ALLOWED_TYPES = [
        <span class="str">'image/jpeg'</span> =&gt; <span class="str">'jpg'</span>,
        <span class="str">'image/png'</span>  =&gt; <span class="str">'png'</span>,
        <span class="str">'image/gif'</span>  =&gt; <span class="str">'gif'</span>,
        <span class="str">'image/webp'</span> =&gt; <span class="str">'webp'</span>,
        <span class="str">'application/pdf'</span> =&gt; <span class="str">'pdf'</span>,
    ];
    <span class="kw">private const int</span> MAX_BYTES = <span class="num">10_485_760</span>; <span class="cmt">// 10 MB</span>

    <span class="kw">public function</span> <span class="fn">__construct</span>(<span class="kw">private readonly</span> <span class="typ">string</span> <span class="var">$uploadDir</span>) {}

    <span class="kw">public function</span> <span class="fn">handle</span>(<span class="typ">array</span> <span class="var">$file</span>): <span class="typ">string</span>
    {
        <span class="kw">if</span> (<span class="var">$file</span>[<span class="str">'error'</span>] !== <span class="op">UPLOAD_ERR_OK</span>) {
            <span class="kw">throw new</span> <span class="typ">RuntimeException</span>(<span class="str">"Upload failed: code {$file['error']}"</span>);
        }
        <span class="kw">if</span> (<span class="var">$file</span>[<span class="str">'size'</span>] > <span class="kw">self</span>::MAX_BYTES) {
            <span class="kw">throw new</span> <span class="typ">InvalidArgumentException</span>(
                <span class="str">"File too large. Max: "</span> . (<span class="kw">self</span>::MAX_BYTES / <span class="num">1024</span> / <span class="num">1024</span>) . <span class="str">"MB"</span>
            );
        }
        <span class="cmt">// Use finfo ‚Äî NOT $_FILES['type'] (user-supplied, spoofable)</span>
        <span class="var">$finfo</span>    = <span class="kw">new</span> \<span class="typ">finfo</span>(<span class="op">FILEINFO_MIME_TYPE</span>);
        <span class="var">$mimeType</span> = <span class="var">$finfo</span>-&gt;<span class="fn">file</span>(<span class="var">$file</span>[<span class="str">'tmp_name'</span>]);

        <span class="kw">if</span> (!<span class="fn">array_key_exists</span>(<span class="var">$mimeType</span>, <span class="kw">self</span>::ALLOWED_TYPES)) {
            <span class="kw">throw new</span> <span class="typ">InvalidArgumentException</span>(
                <span class="str">"Disallowed file type: $mimeType"</span>
            );
        }
        <span class="var">$ext</span>      = <span class="kw">self</span>::ALLOWED_TYPES[<span class="var">$mimeType</span>];
        <span class="var">$filename</span> = <span class="fn">bin2hex</span>(<span class="fn">random_bytes</span>(<span class="num">16</span>)) . <span class="str">".$ext"</span>;
        <span class="var">$dest</span>     = <span class="var">$this</span>-&gt;uploadDir . <span class="str">'/'</span> . <span class="var">$filename</span>;

        <span class="kw">if</span> (!<span class="fn">move_uploaded_file</span>(<span class="var">$file</span>[<span class="str">'tmp_name'</span>], <span class="var">$dest</span>)) {
            <span class="kw">throw new</span> <span class="typ">RuntimeException</span>(<span class="str">"Failed to save file"</span>);
        }
        <span class="kw">return</span> <span class="var">$filename</span>;
    }
}</pre>
      </div>

      <div class="exercise">
        <div class="exercise-title">‚úèÔ∏è Project Challenge</div>
        <p>Combine all four patterns into one application:</p>
        <ol>
          <li>Build a full login/register system using sessions and PDO (Demo 1 + PDO CRUD).</li>
          <li>After login, show a personal todo list stored per-user in the database (not session).</li>
          <li>Allow users to attach a file to each todo item using the FileUploadHandler.</li>
          <li>Add admin panel that shows all users (CRUD) with edit/delete.</li>
          <li>Protect all routes with <code>requireAuth()</code> middleware and CSRF tokens.</li>
        </ol>
      </div>
    </article>

    <!-- FOOTER -->
    <div style="text-align:center; padding: 4rem 0 2rem; border-top: 1px solid var(--border); margin-top: 4rem;">
      <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: var(--muted); letter-spacing: 0.1em;">
        PHP 2026 Beginner's Guide &nbsp;¬∑&nbsp; 26 Chapters &nbsp;¬∑&nbsp; PHP 8.4 &nbsp;¬∑&nbsp; Interactive Web App
      </div>
      <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: #333; margin-top: 0.5rem;">
        &lt;?php echo "Keep coding!"; ?&gt;
      </div>
    </div>

  </main>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PHP 2026 GUIDE ‚Äî APP JAVASCRIPT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// ‚îÄ‚îÄ Reading progress bar ‚îÄ‚îÄ
window.addEventListener('scroll', () => {
  const d = document.documentElement;
  const pct = (d.scrollTop / (d.scrollHeight - d.clientHeight)) * 100;
  document.getElementById('progress').style.width = pct + '%';
});

// ‚îÄ‚îÄ THEME TOGGLE ‚îÄ‚îÄ
(function initTheme() {
  const saved = localStorage.getItem('php-theme');
  if (saved === 'light') applyLight();
})();
function applyLight() {
  document.body.classList.add('light-mode');
  const btn = document.getElementById('theme-btn');
  if (btn) btn.textContent = 'üåô Dark';
}
function toggleTheme() {
  const isLight = document.body.classList.toggle('light-mode');
  localStorage.setItem('php-theme', isLight ? 'light' : 'dark');
  document.getElementById('theme-btn').textContent = isLight ? 'üåô Dark' : '‚òÄ Light';
}

// ‚îÄ‚îÄ SIDEBAR MOBILE TOGGLE ‚îÄ‚îÄ
function toggleSidebar() {
  const s = document.getElementById('main-sidebar');
  const o = document.getElementById('sidebar-overlay');
  s.classList.toggle('open');
  o.classList.toggle('open');
}

// ‚îÄ‚îÄ SEARCH ‚îÄ‚îÄ
const searchIndex = [];
document.querySelectorAll('.chapter').forEach(ch => {
  const id    = ch.id;
  const title = ch.querySelector('h2')?.textContent || '';
  ch.querySelectorAll('h3,h4').forEach(h => {
    searchIndex.push({ id, text: h.textContent.trim(), sub: title });
  });
  searchIndex.push({ id, text: title, sub: 'Chapter' });
});

function doSearch(q) {
  const box = document.getElementById('search-results');
  if (!q.trim()) { box.style.display = 'none'; return; }
  const lq = q.toLowerCase();
  const matches = searchIndex.filter(i => i.text.toLowerCase().includes(lq)).slice(0, 10);
  if (!matches.length) { box.innerHTML = '<a href="#">No results found</a>'; box.style.display = 'block'; return; }
  box.innerHTML = matches.map(m =>
    `<a href="#${m.id}" onclick="document.getElementById('search-results').style.display='none'">
      <span style="color:var(--muted);font-size:0.65rem">${m.sub} ‚Ä∫ </span>
      ${m.text.replace(new RegExp(q,'gi'), s => `<span class="search-highlight">${s}</span>`)}
    </a>`
  ).join('');
  box.style.display = 'block';
}

// ‚îÄ‚îÄ PANEL HELPERS ‚îÄ‚îÄ
function openPanel(id)  { document.getElementById(id).classList.add('open'); }
function closePanel(id) { document.getElementById(id).classList.remove('open'); }
// Close on overlay click
document.querySelectorAll('.panel-overlay').forEach(p => {
  p.addEventListener('click', e => { if (e.target === p) p.classList.remove('open'); });
});

// ‚îÄ‚îÄ CODE BLOCKS: collapse + copy + run ‚îÄ‚îÄ
document.querySelectorAll('.code-block').forEach((block, idx) => {
  const pre = block.querySelector('pre');
  if (!pre) return;
  // Add actions bar
  const acts = document.createElement('div');
  acts.className = 'code-actions';
  const hasRun = block.dataset.runnable !== undefined;
  acts.innerHTML = `
    <button class="btn-toggle-code" onclick="toggleCode(this)">‚äñ Collapse</button>
    <button class="btn-copy" onclick="copyCode(this)">‚éò Copy</button>
  `;
  block.appendChild(acts);
  // Run output div
  const out = document.createElement('div');
  out.className = 'run-output';
  out.id = 'run-' + idx;
  block.appendChild(out);
});

function toggleCode(btn) {
  const block = btn.closest('.code-block');
  const collapsed = block.classList.toggle('collapsed');
  btn.textContent = collapsed ? '‚äï Expand' : '‚äñ Collapse';
}

function copyCode(btn) {
  const pre = btn.closest('.code-block').querySelector('pre');
  const text = pre.innerText;
  navigator.clipboard?.writeText(text).then(() => {
    btn.textContent = '‚úì Copied!';
    setTimeout(() => { btn.textContent = '‚éò Copy'; }, 1500);
  }).catch(() => {
    btn.textContent = '‚éò Copy';
  });
}

// ‚îÄ‚îÄ BOOKMARKS ‚îÄ‚îÄ
let bookmarks = JSON.parse(localStorage.getItem('php-bookmarks') || '[]');

function toggleBookmark(id, title) {
  const btn = document.querySelector(`[data-bm="${id}"]`);
  if (bookmarks.includes(id)) {
    bookmarks = bookmarks.filter(b => b !== id);
    if (btn) btn.classList.remove('bookmarked');
  } else {
    bookmarks.push(id);
    if (btn) btn.classList.add('bookmarked');
  }
  localStorage.setItem('php-bookmarks', JSON.stringify(bookmarks));
  renderBookmarks();
}

function renderBookmarks() {
  const list = document.getElementById('bookmarks-list');
  if (!list) return;
  if (!bookmarks.length) {
    list.innerHTML = '<span class="no-bookmarks">No bookmarks yet</span>';
    return;
  }
  list.innerHTML = bookmarks.map(id => {
    const ch = document.getElementById(id);
    const title = ch?.querySelector('h2')?.textContent || id;
    return `<a href="#${id}" onclick="toggleSidebar()">${title}</a>`;
  }).join('');
}

// Add bookmark buttons to chapter headers
document.querySelectorAll('.chapter-header').forEach(hdr => {
  const ch = hdr.closest('.chapter');
  if (!ch) return;
  const id = ch.id;
  const title = hdr.querySelector('h2')?.textContent || id;
  const btn = document.createElement('button');
  btn.className = 'btn-bookmark' + (bookmarks.includes(id) ? ' bookmarked' : '');
  btn.dataset.bm = id;
  btn.title = 'Bookmark this section';
  btn.textContent = '‚òÖ';
  btn.onclick = () => toggleBookmark(id, title);
  hdr.appendChild(btn);
});
renderBookmarks();

// ‚îÄ‚îÄ PROGRESS TRACKER ‚îÄ‚îÄ
let readSections = JSON.parse(localStorage.getItem('php-read') || '[]');
const totalChapters = document.querySelectorAll('.chapter').length;

function updateProgress() {
  const pct = Math.round((readSections.length / totalChapters) * 100);
  document.getElementById('sb-progress-pct').textContent = pct + '%';
  document.getElementById('sb-progress-fill').style.width = pct + '%';
}

function toggleRead(id, btn) {
  if (readSections.includes(id)) {
    readSections = readSections.filter(r => r !== id);
    btn.classList.remove('done');
    btn.textContent = '‚óã Mark as Read';
  } else {
    readSections.push(id);
    btn.classList.add('done');
    btn.textContent = '‚úì Read';
  }
  localStorage.setItem('php-read', JSON.stringify(readSections));
  updateProgress();
}

// Add "mark as read" button + progress bar to each chapter
document.querySelectorAll('.chapter').forEach(ch => {
  const id = ch.id;
  const isDone = readSections.includes(id);
  const wrap = document.createElement('div');
  wrap.className = 'progress-bar-wrap';
  wrap.innerHTML = `<button class="btn-read${isDone ? ' done' : ''}" onclick="toggleRead('${id}', this)">${isDone ? '‚úì Read' : '‚óã Mark as Read'}</button>`;
  ch.appendChild(wrap);
});
updateProgress();

// ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ
const quizData = [
  {
    q: "What does the === operator check?",
    opts: ["Value only", "Type only", "Value AND type", "None of the above"],
    answer: 2
  },
  {
    q: "Which PHP 8.0 feature throws UnhandledMatchError for unmatched values?",
    opts: ["switch", "match", "if/elseif", "ternary"],
    answer: 1
  },
  {
    q: "What function safely hashes passwords in PHP?",
    opts: ["md5()", "sha1()", "password_hash()", "crypt()"],
    answer: 2
  },
  {
    q: "In PHP 8.1, which keyword makes a property immutable after construction?",
    opts: ["final", "const", "static", "readonly"],
    answer: 3
  },
  {
    q: "Which superglobal contains uploaded file data?",
    opts: ["$_POST", "$_FILES", "$_GET", "$_SERVER"],
    answer: 1
  },
  {
    q: "What does PDO::ERRMODE_EXCEPTION do?",
    opts: ["Silences DB errors", "Throws PDOException on error", "Logs to file", "Returns false"],
    answer: 1
  },
  {
    q: "Arrow functions (fn) in PHP 7.4+ automatically capture outer scope variables via:",
    opts: ["global keyword", "use clause", "implicit capture", "static keyword"],
    answer: 2
  },
  {
    q: "Which PHP 8.0 feature allows skipping arguments by name?",
    opts: ["Variadic args", "Named arguments", "Default values", "Unpacking"],
    answer: 1
  },
  {
    q: "What does array_values() do after array_filter()?",
    opts: ["Removes nulls", "Re-indexes keys from 0", "Sorts values", "Flips the array"],
    answer: 1
  },
  {
    q: "Which PHP 8.1 feature provides type-safe named constants like Color::Red?",
    opts: ["Attributes", "Fibers", "Enums", "Readonly classes"],
    answer: 2
  }
];

let quizAnswers = {};

function buildQuiz() {
  const body = document.getElementById('quiz-body');
  body.innerHTML = quizData.map((q, qi) => `
    <div class="quiz-q" id="qq-${qi}">
      <div class="quiz-q-text">${qi + 1}. ${q.q}</div>
      ${q.opts.map((opt, oi) => `
        <label class="quiz-option" id="qo-${qi}-${oi}">
          <input type="radio" name="q${qi}" value="${oi}" onchange="quizAnswers[${qi}]=${oi}">
          ${opt}
        </label>
      `).join('')}
    </div>
  `).join('');
  document.getElementById('quiz-score-display').style.display = 'none';
  document.getElementById('quiz-submit-btn').style.display = '';
}

function submitQuiz() {
  let score = 0;
  quizData.forEach((q, qi) => {
    const chosen = quizAnswers[qi] ?? -1;
    q.opts.forEach((_, oi) => {
      const el = document.getElementById(`qo-${qi}-${oi}`);
      if (!el) return;
      el.classList.remove('correct', 'wrong');
      if (oi === q.answer) el.classList.add('correct');
      else if (oi === chosen && chosen !== q.answer) el.classList.add('wrong');
    });
    if (chosen === q.answer) score++;
  });
  document.getElementById('quiz-score-val').textContent = score;
  document.getElementById('quiz-score-display').style.display = 'block';
  document.getElementById('quiz-submit-btn').style.display = 'none';
}

function resetQuiz() {
  quizAnswers = {};
  buildQuiz();
}

buildQuiz();

// ‚îÄ‚îÄ CONTACT FORM ‚îÄ‚îÄ
function submitContact(e) {
  e.preventDefault();
  let valid = true;
  const name  = document.getElementById('c-name').value.trim();
  const email = document.getElementById('c-email').value.trim();
  const msg   = document.getElementById('c-msg').value.trim();
  const showErr = (id, show) => document.getElementById(id).classList.toggle('show', show);
  showErr('err-name',  !name);
  showErr('err-email', !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email));
  showErr('err-msg',   msg.length < 10);
  if (!name || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) || msg.length < 10) return;
  document.getElementById('contact-form').style.display = 'none';
  document.getElementById('contact-success').style.display = 'block';
  setTimeout(() => {
    document.getElementById('contact-form').style.display = '';
    document.getElementById('contact-success').style.display = 'none';
    document.getElementById('contact-form').reset();
    closePanel('contact-panel');
  }, 2500);
}

// ‚îÄ‚îÄ SMOOTH NAV ‚îÄ‚îÄ
document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const target = document.querySelector(link.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      // Close sidebar on mobile after click
      if (window.innerWidth < 900) toggleSidebar();
    }
  });
});

// ‚îÄ‚îÄ DEMO: LOGIN SYSTEM ‚îÄ‚îÄ
const demoUsers = { 'alice@example.com': { name:'Alice', role:'admin', hash:'secret123' } };
let demoSession = null;
function demoLogin() {
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  const pass  = document.getElementById('login-pass').value;
  const out   = document.getElementById('login-output');
  const user  = demoUsers[email];
  if (!user || user.hash !== pass) {
    out.innerHTML = '<span class="err">‚ùå Invalid credentials. Try alice@example.com / secret123</span>';
    return;
  }
  demoSession = { email, name: user.name, role: user.role, csrf: Math.random().toString(36).slice(2) };
  out.innerHTML = `<span class="ok">‚úÖ Logged in as ${user.name} (${user.role})</span>
<span class="info">// Session ID regenerated. CSRF token: ${demoSession.csrf.slice(0,12)}‚Ä¶</span>
<span class="info">// password_hash verified via password_verify()</span>`;
}
function demoLogout() {
  const out = document.getElementById('login-output');
  if (!demoSession) { out.innerHTML = '<span class="err">// No active session</span>'; return; }
  demoSession = null;
  out.innerHTML = '<span class="ok">‚úÖ Logged out. Session destroyed, cookie cleared.</span>';
}
function demoRegister() {
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  const pass  = document.getElementById('login-pass').value;
  const out   = document.getElementById('login-output');
  if (!email || !pass || pass.length < 6) {
    out.innerHTML = '<span class="err">‚ùå Email and password (min 6 chars) required</span>'; return;
  }
  if (demoUsers[email]) { out.innerHTML = '<span class="err">‚ùå Email already registered</span>'; return; }
  demoUsers[email] = { name: email.split('@')[0], role:'user', hash: pass };
  out.innerHTML = `<span class="ok">‚úÖ Registered ${email}</span>
<span class="info">// password_hash($password, PASSWORD_ARGON2ID) stored</span>
<span class="info">// Use Login to test your new account</span>`;
}

// ‚îÄ‚îÄ DEMO: TODO LIST ‚îÄ‚îÄ
let todos = [
  { id:1, task:'Read Chapter 1: Introduction', done:true },
  { id:2, task:'Practice PHP syntax', done:false },
  { id:3, task:'Build a CRUD app', done:false },
];
let todoFilter = 'all';
let nextTodoId = 4;

function renderTodos() {
  const list = document.getElementById('todo-list');
  if (!list) return;
  const visible = todos.filter(t =>
    todoFilter === 'all' ? true : todoFilter === 'done' ? t.done : !t.done
  );
  if (!visible.length) { list.innerHTML = '<div style="color:var(--muted);font-size:0.8rem;padding:0.5rem">No items</div>'; return; }
  list.innerHTML = visible.map(t => `
    <div class="todo-item${t.done ? ' done' : ''}" id="todo-${t.id}">
      <span>${t.task}</span>
      <button onclick="toggleTodoItem(${t.id})" title="Toggle">${t.done ? '‚Ü©' : '‚úì'}</button>
      <button onclick="deleteTodoItem(${t.id})" title="Delete" style="color:var(--accent3)">‚úï</button>
    </div>
  `).join('');
}
function addTodo() {
  const inp = document.getElementById('todo-input');
  const task = inp.value.trim();
  if (!task) return;
  todos.push({ id: nextTodoId++, task, done: false });
  inp.value = '';
  renderTodos();
}
function toggleTodoItem(id) {
  const t = todos.find(x => x.id === id);
  if (t) t.done = !t.done;
  renderTodos();
}
function deleteTodoItem(id) {
  todos = todos.filter(x => x.id !== id);
  renderTodos();
}
function filterTodos(f) { todoFilter = f; renderTodos(); }
function clearDoneTodos() { todos = todos.filter(t => !t.done); renderTodos(); }
renderTodos();

// ‚îÄ‚îÄ DEMO: CRUD ‚îÄ‚îÄ
let crudUsers = [
  { id:1, name:'Alice Johnson', email:'alice@example.com' },
  { id:2, name:'Bob Smith',     email:'bob@example.com'   },
];
let nextCrudId = 3;

function renderCrudTable() {
  const tbl = document.getElementById('crud-table');
  if (!tbl) return;
  if (!crudUsers.length) { tbl.innerHTML = '<div style="color:var(--muted);font-size:0.8rem;padding:0.5rem">No users</div>'; return; }
  tbl.innerHTML = `<table style="width:100%;font-size:0.78rem;border-collapse:collapse">
    <tr style="color:var(--accent);font-family:'JetBrains Mono',monospace;font-size:0.65rem;text-transform:uppercase">
      <th style="padding:0.3rem 0.5rem;text-align:left">ID</th>
      <th style="padding:0.3rem 0.5rem;text-align:left">Name</th>
      <th style="padding:0.3rem 0.5rem;text-align:left">Email</th>
      <th style="padding:0.3rem 0.5rem">Actions</th>
    </tr>
    ${crudUsers.map(u => `<tr style="border-top:1px solid var(--border)">
      <td style="padding:0.35rem 0.5rem;color:var(--muted)">#${u.id}</td>
      <td style="padding:0.35rem 0.5rem" id="cn-${u.id}">${u.name}</td>
      <td style="padding:0.35rem 0.5rem;color:var(--muted)" id="ce-${u.id}">${u.email}</td>
      <td style="padding:0.35rem 0.5rem;text-align:center">
        <button class="demo-btn" style="padding:0.2rem 0.5rem;font-size:0.7rem" onclick="crudEdit(${u.id})">‚úé</button>
        <button class="demo-btn danger" style="padding:0.2rem 0.5rem;font-size:0.7rem" onclick="crudDelete(${u.id})">‚úï</button>
      </td>
    </tr>`).join('')}
  </table>`;
}
function crudCreate() {
  const name  = document.getElementById('crud-name').value.trim();
  const email = document.getElementById('crud-email').value.trim();
  const out   = document.getElementById('crud-output');
  if (!name || !email) { out.innerHTML = '<span class="err">Name and email required</span>'; return; }
  if (crudUsers.find(u => u.email === email)) { out.innerHTML = '<span class="err">Email already exists</span>'; return; }
  const id = nextCrudId++;
  crudUsers.push({ id, name, email });
  document.getElementById('crud-name').value = '';
  document.getElementById('crud-email').value = '';
  out.innerHTML = `<span class="ok">‚úÖ INSERT INTO users (name,email) VALUES ('${name}','${email}') ‚Üí id=${id}</span>`;
  renderCrudTable();
}
function crudDelete(id) {
  crudUsers = crudUsers.filter(u => u.id !== id);
  document.getElementById('crud-output').innerHTML = `<span class="ok">‚úÖ DELETE FROM users WHERE id=${id}</span>`;
  renderCrudTable();
}
function crudEdit(id) {
  const u = crudUsers.find(x => x.id === id);
  if (!u) return;
  const newName  = prompt('Edit name:', u.name);
  const newEmail = prompt('Edit email:', u.email);
  if (newName && newEmail) {
    u.name = newName; u.email = newEmail;
    document.getElementById('crud-output').innerHTML = `<span class="ok">‚úÖ UPDATE users SET name='${newName}',email='${newEmail}' WHERE id=${id}</span>`;
    renderCrudTable();
  }
}
renderCrudTable();

// ‚îÄ‚îÄ DEMO: FILE UPLOAD ‚îÄ‚îÄ
function demoUpload() {
  const sel = document.getElementById('upload-type').value;
  const out = document.getElementById('upload-output');
  const allowed = ['image/jpeg','image/png','application/pdf','image/gif','image/webp'];
  if (sel === 'image/jpeg-big') {
    out.innerHTML = `<span class="err">‚ùå InvalidArgumentException: File too large. Max: 10MB (uploaded: 12MB)</span>
<span class="info">// Upload rejected at FileUploadHandler::handle()</span>`;
    return;
  }
  if (sel === 'text/php') {
    out.innerHTML = `<span class="err">‚ùå InvalidArgumentException: Disallowed file type: text/x-php</span>
<span class="info">// finfo detected real MIME type ‚Äî $_FILES['type'] was 'text/php' but ignored</span>
<span class="info">// File NOT saved to disk</span>`;
    return;
  }
  const ext = sel.split('/')[1];
  const fakeName = Array.from({length:16},()=>'0123456789abcdef'[Math.floor(Math.random()*16)]).join('') + '.' + ext;
  out.innerHTML = `<span class="ok">‚úÖ Upload successful!</span>
<span class="info">// MIME verified by finfo: ${sel}</span>
<span class="info">// Random safe filename: ${fakeName}</span>
<span class="info">// move_uploaded_file('/tmp/phpXXXXXX', 'uploads/${fakeName}')</span>`;
}
</script>
</body>
</html>
